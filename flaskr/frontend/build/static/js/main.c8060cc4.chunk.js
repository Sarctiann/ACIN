(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{202:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(61),c=a.n(r),s=a(43),i=a(7),o=function(){var e=Object(n.useState)(function(){var e=localStorage.getItem("user");return JSON.parse(e)}()),t=Object(i.a)(e,2),a=t[0],r=t[1];return[a,function(e){localStorage.setItem("user",JSON.stringify(e)),r(e)}]},l=a(10),d=function(){var e={theme_mode:"dark",calculator:!0,postsFontFamily:"Helvetica"},t=Object(n.useState)(function(){var t=localStorage.getItem("settings");return Object(l.a)(Object(l.a)({},e),JSON.parse(t))}()),a=Object(i.a)(t,2),r=a[0],c=a[1];return[r,function(e){localStorage.setItem("settings",JSON.stringify(e)),c(e)}]},j=a(0),b=Object(n.createContext)({user:"",setUser:function(){}}),u=Object(n.createContext)({auth:"",setAuth:function(){}}),h=Object(n.createContext)({fetchedPosts:[],setFetchedPosts:function(){}}),x=Object(n.createContext)({userSettings:"",setUserSettings:function(){}}),O=function(e){var t=e.children,a=o(),r=Object(i.a)(a,2),c=r[0],s=r[1],l=Object(n.useMemo)((function(){return{user:c,setUser:s}}),[c,s]),O=Object(n.useState)(!1),m=Object(i.a)(O,2),p=m[0],f=m[1],v=Object(n.useMemo)((function(){return{auth:p,setAuth:f}}),[p,f]),g=Object(n.useState)([]),w=Object(i.a)(g,2),C=w[0],y=w[1],k=Object(n.useMemo)((function(){return{fetchedPosts:C,setFetchedPosts:y}}),[C,y]),_=d(),S=Object(i.a)(_,2),A=S[0],T=S[1],z=Object(n.useMemo)((function(){return{userSettings:A,setUserSettings:T}}),[A,T]);return Object(j.jsx)(b.Provider,{value:l,children:Object(j.jsx)(u.Provider,{value:v,children:Object(j.jsx)(h.Provider,{value:k,children:Object(j.jsx)(x.Provider,{value:z,children:t})})})})},m=a(21),p=a(147),f=a(316),v=a(293),g=a(294),w=a(295),C=a(296),y=a(318),k=a(325),_=a(326),S=a(299),A=a(317),T=a(307),z=a(269),E=a(270),F=a(271),D=a(272),U=["/news","/calculators","/answers","/settings"],P=["answers","calculator","expressions"],I="https://audiocenter-in.herokuapp.com//api-v1",B=a(29),R=a(148),M=a(258),W=a(319),H=["value","items","setTabValue","icon","label","disabled"],N=function(e){var t=e.value,a=e.items,r=e.setTabValue,c=e.icon,s=e.label,o=e.disabled,d=Object(B.a)(e,H),b=Object(m.h)(),u=Object(n.useState)(null),h=Object(i.a)(u,2),x=h[0],O=h[1],p=Boolean(x);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(A.a,Object(l.a)(Object(l.a)({label:s},d),{},{icon:c,iconPosition:"start",id:"id_menu","aria-controls":"aria_menu",onClick:function(e){O(e.currentTarget)},"aria-haspopup":"true","aria-expanded":p?"true":void 0,disabled:o})),Object(j.jsx)(R.a,{id:"aria_menu",anchorEl:x,open:p,onClose:function(){O(null)},TransitionComponent:M.a,children:a.map((function(e){return Object(j.jsx)(W.a,{onClick:function(){var a;a=e.sub_route,O(null),b("".concat(t,"/").concat(a)),r(t)},children:e.label},e.label)}))})]})},L=a(324),$=a(311),G=a(93),V=a(265),K=a(266),J=a(264),Y=a(267),X=a(268),q=a(320),Q=a(263),Z=a(321),ee=a(322),te=a(323),ae=a(310),ne=["title","message","confirmText","color","disabled","action","children"],re=function(e){var t=e.title,a=void 0===t?"add <title> prop":t,r=e.message,c=void 0===r?"add <message> prop":r,s=e.confirmText,o=void 0===s?"add <confirmText> prop":s,d=e.color,b=void 0===d?"error":d,u=e.disabled,h=void 0!==u&&u,x=e.action,O=e.children,m=Object(B.a)(e,ne),p=Object(n.useState)(!1),f=Object(i.a)(p,2),v=f[0],g=f[1],w=function(){g(!1)},C=h?{}:{onClick:function(){g(!0)}};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",Object(l.a)(Object(l.a)({},C),{},{children:O})),Object(j.jsxs)(q.a,Object(l.a)(Object(l.a)({},m),{},{open:v,onClose:w,"aria-labelledby":"title","aria-describedby":"description",children:[Object(j.jsx)(Q.a,{id:"title",children:a}),Object(j.jsx)(Z.a,{children:Object(j.jsx)(ee.a,{id:"description",children:c})}),Object(j.jsxs)(te.a,{children:[Object(j.jsx)(ae.a,{onClick:w,children:"Cancel "}),Object(j.jsxs)(ae.a,{onClick:function(e){g(!1);try{x(e)}catch(t){console.error("add <action> prop, or: ".concat(t))}},color:b,autoFocus:!0,children:[o," "]})]})]}))]})},ce=["setTabValue","disabled"],se=function(e,t){return e&&t?[e.first_name[0],e.last_name[0]].join("").toUpperCase():Object(j.jsx)(J.a,{})},ie=function(e){var t=Object(n.useContext)(b),a=t.user,r=t.setUser,c=Object(n.useContext)(u),s=c.auth,o=c.setAuth,d=e.setTabValue,h=e.disabled,x=Object(B.a)(e,ce),O=Object(m.g)(),p=Object(m.h)(),f="account"===O.pathname.split("/")[1]?"secondary.main":"primary.main";h&&(f="default");var v=Object(n.useState)(null),g=Object(i.a)(v,2),w=g[0],C=g[1],y=Boolean(w);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(L.a,Object(l.a)(Object(l.a)({variant:"outlined"},x),{},{id:"id_menu","aria-controls":"aria_menu",onClick:function(e){C(e.currentTarget)},"aria-haspopup":"true","aria-expanded":y?"true":void 0,color:"secondary",disabled:h,children:Object(j.jsx)($.a,{sx:{bgcolor:f},children:se(a,s)})})),Object(j.jsxs)(R.a,{id:"aria_menu",anchorEl:w,open:y,onClose:function(){C(null)},TransitionComponent:M.a,children:[Object(j.jsx)(G.a,{variant:"overline",color:"secondary",marginX:2,mb:1,children:[null===a||void 0===a?void 0:a.first_name,null===a||void 0===a?void 0:a.last_name].join(" ")}),Object(j.jsx)(G.a,{variant:"subtitle1",color:"GrayText",marginX:2,mb:1,children:null===a||void 0===a?void 0:a.email}),Object(j.jsx)(V.a,{}),Object(j.jsxs)(W.a,{onClick:function(){C(null),d(!1),p("/account")},children:[Object(j.jsx)(K.a,{children:Object(j.jsx)(Y.a,{})}),"Options"]}),Object(j.jsx)(re,{title:"LOGOUT",message:"Confirm logout?",confirmText:"Logout",action:function(){C(null),r(null),o(!1),localStorage.removeItem("user"),localStorage.removeItem("settings")},children:Object(j.jsxs)(W.a,{children:[Object(j.jsx)(K.a,{children:Object(j.jsx)(X.a,{})}),"Logout"]})})]})]})},oe=a(274),le=a(273),de=["setTabValue","disabled","user"],je=function(e){var t=e.setTabValue,a=e.disabled,r=e.user,c=Object(B.a)(e,de),s=[{label:"DIVIDER",icon:z.a,key:0},{label:"News",route:U[0]},{label:"DIVIDER",icon:E.a,key:1},{label:"Calculators",route:"".concat(U[1])},{label:"DIVIDER",icon:F.a,key:2},{label:"Answers",route:U[2]},{label:"DIVIDER",icon:D.a,key:3},{label:"Answers Settings",route:"".concat(U[3],"/").concat(P[0])}];(null===r||void 0===r?void 0:r.is_admin)&&s.push({label:"Calculator Settings",route:"".concat(U[3],"/").concat(P[1])}),s.push({label:"Expressions Settings",route:"".concat(U[3],"/").concat(P[2])});var o=Object(m.h)(),d=Object(n.useState)(null),b=Object(i.a)(d,2),u=b[0],h=b[1],x=Boolean(u);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(L.a,Object(l.a)(Object(l.a)({"aria-label":"Go to...",onClick:function(e){h(e.currentTarget)}},c),{},{sx:{display:{xs:"inline-flex",sm:"none"}},disabled:a,children:Object(j.jsx)(le.a,{})})),Object(j.jsx)(R.a,{id:"aria_menu",anchorEl:u,open:x,onClose:function(){h(null)},TransitionComponent:M.a,children:s.map((function(e){return"DIVIDER"===e.label?Object(j.jsx)(V.a,{textAlign:"right",children:Object(j.jsx)(e.icon,{})},e.key):Object(j.jsxs)(W.a,{onClick:function(){var a;a=e.route,h(null),o(a),t("/".concat(a.split("/")[1]))},children:[Object(j.jsx)(K.a,{children:Object(j.jsx)(oe.a,{})}),e.label]},e.label)}))})]})},be=function(){var e,t=Object(n.useContext)(u).auth,a=Object(n.useContext)(b).user,r=Object(n.useContext)(h).fetchedPosts,c=!Boolean(t),o=Object(m.g)();switch("/".concat(o.pathname.split("/")[1])){case U[0]:e=U[0];break;case U[1]:e=U[1];break;case U[2]:e=U[2];break;case U[3]:e=U[3];break;default:e=!1}var l=Object(n.useState)(e),d=Object(i.a)(l,2),x=d[0],O=d[1],p=Object(n.useState)(0),f=Object(i.a)(p,2),v=f[0],g=f[1],w=Object(n.useMemo)((function(){var e=r.length;return x===U[0]&&g(e),e-v}),[r.length,v,x]),C=[{label:"Answers Settings",sub_route:P[0]}];return(null===a||void 0===a?void 0:a.is_admin)&&C.push({label:"Calculator Settings",sub_route:P[1]}),C.push({label:"Expressions Settings",sub_route:P[2]}),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(k.a,{position:"sticky",color:"default",children:Object(j.jsxs)(_.a,{sx:{justifyContent:"space-between"},children:[Object(j.jsx)(je,{setTabValue:O,disabled:c,user:a}),Object(j.jsxs)(S.a,{sx:{visibility:{xs:"hidden",sm:"visible"}},indicatorColor:"primary",onChange:function(e,t){switch(t){case U[0]:case U[1]:case U[2]:O(t)}},value:x,children:[Object(j.jsx)(A.a,{value:U[0],label:"News",icon:Object(j.jsx)(T.a,{color:"error",badgeContent:w,anchorOrigin:{vertical:"top",horizontal:"left"},children:Object(j.jsx)(z.a,{})}),iconPosition:"start",component:s.b,to:U[0],disabled:c}),Object(j.jsx)(A.a,{value:U[1],label:"Calculators",icon:Object(j.jsx)(E.a,{}),iconPosition:"start",component:s.b,to:U[1],disabled:c}),Object(j.jsx)(A.a,{value:U[2],label:"Answers",icon:Object(j.jsx)(F.a,{}),iconPosition:"start",component:s.b,to:U[2],disabled:c}),Object(j.jsx)(N,{value:U[3],label:"Settings",icon:Object(j.jsx)(D.a,{}),setTabValue:O,items:C,disabled:c})]}),Object(j.jsx)(ie,{setTabValue:O,disabled:c})]})})})},ue=a(15),he=a.n(ue),xe=a(22),Oe=a(20),me=a.n(Oe),pe=function(e){var t=e.children,a=e.setAuth,r=e.user,c=e.setUser,s=Object(n.useContext)(h).setFetchedPosts,o=Object(n.useState)(null),l=Object(i.a)(o,2),d=l[0],j=l[1],b=Object(m.h)();return Object(n.useEffect)((function(){var e=me.a.CancelToken.source(),t=function(){var t=Object(xe.a)(he.a.mark((function t(){var n,i,o;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,me.a.post(I+"/news/fetch-posts",{last_post:d},{cancelToken:e.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(null===r||void 0===r?void 0:r.token)}});case 3:(n=t.sent).data.newest_post?(j(n.data.newest_post),s(n.data.posts)):n.data.wrn?console.warn(n.data.wrn):n.data.err&&(a(!1),console.error(n.data.err)),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),422!==(o=null===(i=t.t0.response)||void 0===i?void 0:i.status)&&401!==o||(b("/login"),c(null),a(!1),localStorage.removeItem("user"));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();r&&t();var n=setInterval((function(){(null===r||void 0===r?void 0:r.token)&&t()}),3e3);return function(){clearInterval(n),e.cancel("Leaving News page or the data is already loaded")}}),[r,c,a,b,d,s]),Object(n.useEffect)((function(){var e=me.a.CancelToken.source(),t=setInterval((function(){(null===r||void 0===r?void 0:r.token)&&Object(xe.a)(he.a.mark((function t(){var a;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,me.a.get(I+"/users/refresh-auth",{cancelToken:e.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(r.token)}});case 3:(a=t.sent).data.user&&c(a.data.user),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}),36e5);return function(){clearInterval(t),e.cancel("Abort refresh token")}}),[r,c]),t},fe=a(332),ve=a(312),ge=a(305),we=a(301),Ce=a(327),ye=a(275),ke=a(313),_e=a(328),Se=a(276),Ae=a(297),Te=a(146),ze=function(e,t){var a,n=((e-t)/864e5).toFixed();switch(n){case"0":a="Today";break;case"1":a="Yesterday";break;default:a="".concat(n," days ago")}return a},Ee=function(e){var t=e.filter,a=t.severity,r=t.owner,c=e.handleMessage,s=Object(n.useContext)(h).fetchedPosts,o=Object(n.useContext)(b).user,d=Object(n.useContext)(x).userSettings,u=Object(n.useState)(""),O=Object(i.a)(u,2),m=O[0],p=O[1],f=Object(n.useMemo)((function(){if(s.length>0){var e;switch(a){case"Reminder":e="rem";break;case"Normal":e="nor";break;case"Urgent":e="urg";break;default:e=null}var t="from All"===r?null:null===o||void 0===o?void 0:o.email,n=s.filter((function(a){return(!e||a.severity===e)&&(!t||a.owner._id===t)})),c=[],i=(new Date).getTime(),l=i;return n.length>0?n.forEach((function(e){var t=ze(i,e._id.$date);l!==t&&(c.push({divider:t}),l=t),c.push(e)})):c.push({divider:"There are no posts with those conditions"}),c}}),[s,a,r,o]),v=function(){p("")};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(ve.a,{item:!0,xs:12,md:7,children:Object(j.jsx)(Ce.a,{border:2,p:2,borderRadius:1,borderColor:"primary.main",sx:{height:"80vh"},children:Object(j.jsx)(ye.a,{spacing:1,pr:1,sx:{paddingBlockEnd:2,height:"75vh",overflow:"auto"},children:null===f||void 0===f?void 0:f.map((function(e){var t;if(e.divider&&(t=Object(j.jsx)(ve.a,{item:!0,children:Object(j.jsx)(V.a,{children:Object(j.jsx)(ke.a,{color:"primary",label:e.divider})})},e.divider)),e._id){var a;switch(e.severity){case"rem":a={icon:Object(j.jsx)(Se.a,{}),severity:"success"};break;case"nor":a={severity:"warning"};break;case"urg":a={severity:"error"};break;default:a={}}((null===o||void 0===o?void 0:o.is_admin)||e.owner._id===(null===o||void 0===o?void 0:o.email))&&(a=Object(l.a)(Object(l.a)({},a),{},{onClose:function(){p(e._id)}})),t=Object(j.jsx)(ve.a,{item:!0,children:Object(j.jsxs)(we.a,Object(l.a)(Object(l.a)({variant:"filled"},a),{},{style:{fontFamily:"".concat(d.postsFontFamily,", Helvetica"),fontSize:"1em"},children:[Object(j.jsx)(_e.a,{children:Object(j.jsxs)(G.a,{variant:"h5",children:[e.owner.username," - ",e.title]})}),Object(j.jsx)(Ae.a,{children:e.content,remarkPlugins:[Te.a]})]}))},e._id.$date)}return t}))})})}),Object(j.jsxs)(q.a,{open:Boolean(m),onClose:v,"aria-labelledby":"title","aria-describedby":"description",children:[Object(j.jsx)(Q.a,{id:"title",children:"Delete"}),Object(j.jsx)(Z.a,{children:Object(j.jsx)(ee.a,{id:"description",children:"Confirm delete post?"})}),Object(j.jsxs)(te.a,{children:[Object(j.jsx)(ae.a,{onClick:v,children:"Cancel "}),Object(j.jsx)(ae.a,{onClick:function(){return e=m,Object(xe.a)(he.a.mark((function t(){var a;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,me.a.delete(I+"/news/delete-post",{headers:{Accept:"*/*",Authorization:"Bearer ".concat(null===o||void 0===o?void 0:o.token)},data:e});case 2:(a=t.sent).data.msg&&c(a.data.msg,"info"),a.data.wrn&&c(a.data.wrn,"warning"),a.data.err&&c(a.data.err,"error");case 6:case"end":return t.stop()}}),t)})))(),void p("");var e},color:"error",autoFocus:!0,children:"DELETE "})]})]})]})},Fe=a(3),De=a(277),Ue=a(300),Pe=a(278),Ie=a(329),Be=a(303),Re=["options","option","setOption"],Me=function(e){var t=e.options,a=e.option,n=e.setOption,r=Object(B.a)(e,Re);return Object(j.jsx)(Ie.a,Object(l.a)(Object(l.a)({fullWidth:!0},r),{},{children:Object(j.jsx)(Be.a,{size:"small",value:a,onChange:function(e){n(e.target.value)},children:t.map((function(e){return Object(j.jsx)(W.a,{value:e,children:e},e)}))})}))},We=function(e){var t,a=e.filter,r=a.severity,c=a.setSeverity,s=a.owner,o=a.setOwner,d=e.handleMessage,u=Object(n.useContext)(b).user,h=Object(n.useState)({title:"",content:"",days_offset:""}),x=Object(i.a)(h,2),O=x[0],m=x[1],p=Object(n.useState)("Normal"),f=Object(i.a)(p,2),v=f[0],g=f[1],w=Object(n.useState)("to Me"),C=Object(i.a)(w,2),k=C[0],_=C[1],S=function(e){var t=e.target,a=t.name,n=t.value;m(Object(l.a)(Object(l.a)({},O),{},Object(Fe.a)({},a,n)))},A=function(){switch(v){case"Reminder":return"rem";default:case"Normal":return"nor";case"Urgent":return"urg"}},T=function(){switch(k){default:case"to Me":return!1;case"to All":return!0}},z={rows:Object(De.a)((function(e){return e.breakpoints.down("md")}))?8:12};switch(v){case"Reminder":t={color:"success"};break;case"Normal":t={color:"warning"};break;case"Urgent":t={color:"error"};break;default:t={}}return Object(j.jsx)(ve.a,{item:!0,xs:12,md:5,children:Object(j.jsx)(y.a,{elevation:3,children:Object(j.jsx)(Ce.a,{sx:{paddingBlockEnd:2,height:"80vh"},border:2,p:2,borderRadius:1,borderColor:"secondary.main",children:Object(j.jsxs)(ve.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"center",sx:{height:"75vh",overflow:"auto"},children:[Object(j.jsx)(ve.a,{item:!0,xs:6,children:Object(j.jsx)(Me,{options:["All","Urgent","Normal","Reminder"],option:r,setOption:c})}),Object(j.jsx)(ve.a,{item:!0,xs:6,children:Object(j.jsx)(Me,{options:["from All","Mine only"],option:s,setOption:o})}),Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(V.a,{children:Object(j.jsx)(G.a,{color:"secondary",children:"CREATE NEW POST"})})}),Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(Ue.a,{fullWidth:!0,size:"small",label:"Title",name:"title",value:O.title,onChange:S})}),Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(Ue.a,Object(l.a)(Object(l.a)({fullWidth:!0},z),{},{multiline:!0,size:"small",label:"Content",name:"content",value:O.content,onChange:S}))}),Object(j.jsx)(ve.a,{item:!0,xs:7,md:3,children:Object(j.jsx)(Me,{options:["Urgent","Normal","Reminder"],option:v,setOption:g})}),Object(j.jsx)(ve.a,{item:!0,xs:5,md:3,children:Object(j.jsx)(Me,{options:["to Me","to All"],option:k,setOption:_})}),Object(j.jsx)(ve.a,{item:!0,xs:7,md:3,children:Object(j.jsx)(Ue.a,{fullWidth:!0,label:"within days",size:"small",name:"days_offset",type:"number",inputProps:{min:"0",max:"7",step:"1"},value:O.days_offset,onChange:S})}),Object(j.jsx)(ve.a,{item:!0,xs:5,md:3,children:Object(j.jsx)(ae.a,Object(l.a)(Object(l.a)({variant:"contained",fullWidth:!0,size:"small",onClick:function(){if(O.title)if(O.content){var e=parseInt(O.days_offset||0);0>e||7<e?d('"within days" must be between 0 and 7',"error"):Object(xe.a)(he.a.mark((function t(){var a;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,me.a.post(I+"/news/create-post",{title:O.title,content:O.content,severity:A(),days_offset:e,is_public:T()},{headers:{Accept:"*/*",Authorization:"Bearer ".concat(u.token)}});case 3:(a=t.sent).data.msg&&(d(a.data.msg,"success"),m({title:"",content:"",days_offset:""}),g("Normal"),_("to Me")),a.data.err&&d(a.data.err,"error"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}else d("You must provide a Content","error");else d("You must provide a Title","error")}},t),{},{endIcon:Object(j.jsx)(Pe.a,{}),children:Object(j.jsx)(G.a,{variant:"h6",children:"Send"})}))})]})})})})},He=function(){var e=Object(n.useState)("All"),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)("from All"),s=Object(i.a)(c,2),o=s[0],l=s[1],d=Object(n.useState)({msg:"",vnt:""}),b=Object(i.a)(d,2),u=b[0],h=b[1],x=Object(n.useState)(!1),O=Object(i.a)(x,2),m=O[0],p=O[1],f={severity:a,setSeverity:r,owner:o,setOwner:l},v=function(e,t){h({msg:e,vnt:t}),p(!0)};return Object(j.jsxs)(fe.a,{maxWidth:"xl",children:[Object(j.jsxs)(ve.a,{container:!0,spacing:1,margin:0,pt:3,children:[Object(j.jsx)(We,{filter:f,handleMessage:v}),Object(j.jsx)(Ee,{filter:{severity:a,owner:o},handleMessage:v})]}),Object(j.jsx)(ge.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:m,autoHideDuration:3e3,onClose:function(){p(!1)},children:Object(j.jsx)(we.a,{variant:"filled",color:u.vnt,children:u.msg})})]})},Ne=a(333),Le=a(335),$e=a(17),Ge=a(315),Ve=a(302),Ke=a(334),Je=a(279),Ye=a(280),Xe=a(281),qe=function(e){var t=e.handleMessage,a=e.history,r=e.setHistory,c=Object(n.useContext)(b).user,s=Object(n.useState)({first:"",second:"",third:""}),o=Object(i.a)(s,2),d=o[0],u=o[1],h=Object(n.useState)("pri"),x=Object(i.a)(h,2),O=x[0],m=x[1],p=Object(n.useState)("add"),f=Object(i.a)(p,2),v=f[0],g=f[1],w=Object(n.useState)(""),C=Object(i.a)(w,2),k=C[0],_=C[1],S=function(e){var t=e.target,a=t.name,n=t.value;u(Object(l.a)(Object(l.a)({},d),{},Object(Fe.a)({},a,n)))},A=function(e,n,s){for(var o=0,j=Object.entries(n);o<j.length;o++){var b=Object(i.a)(j[o],2),h=b[0];if(!b[1])return void t("The ".concat(h," field is required"),"error")}n=Object(l.a)(Object(l.a)({},n),{},{sign:O,operation:v}),Object(xe.a)(he.a.mark((function i(){var o;return he.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,me.a.post(I+e,n,{headers:{Accept:"*/*",Authorization:"Bearer ".concat(c.token)}});case 3:void 0!==(o=i.sent).data.result&&(t("$".concat(o.data.result),"success"),r([{_id:{$date:(new Date).getTime()},calculation:o.data.calculation,footnote:o.data.footnote}].concat(Object($e.a)(a))),u(Object(l.a)(Object(l.a)({},d),{},Object(Fe.a)({},s,o.data.result))),n.expression||_(o.data.result)),o.data.err&&t(o.data.err,"error"),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(0),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[0,8]])})))()},T=function(){var e={second:d.second,third:d.third};A("/calculator/get-first-term",e,"first")},z=function(){var e={first:d.first,third:d.third};A("/calculator/get-second-term",e,"second")},F=function(){var e={first:d.first,second:d.second};A("/calculator/get-result",e,"third")},D=function(){A("/calculator/resolve-expression",{expression:k})},U=function(){""===d.first&&""!==d.second&&""!==d.third?T():""!==d.first&&""===d.second&&""!==d.third?z():""!==d.first&&""!==d.second&&""===d.third?F():""!==d.first&&""!==d.second&&""!==d.third?t("impossible to know which operation to perform!","warning"):t("You must provide 2 fields at least!","warning")};return Object(j.jsx)(ve.a,{item:!0,xs:12,md:7,children:Object(j.jsx)(y.a,{elevation:5,sx:{borderRadius:3},children:Object(j.jsx)(Ce.a,{sx:{paddingBlockEnd:2,minHeight:"65vh"},p:2,children:Object(j.jsxs)(ve.a,{container:!0,spacing:3,align:"center",pr:2,sx:{minHeight:"60vh",overflow:"auto"},children:[Object(j.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(Ie.a,{sx:{width:"100%"},component:"fieldset",children:Object(j.jsx)(Ge.a,{name:"sign",value:O,onChange:function(e){var t=e.target.value;m(t),u(Object(l.a)(Object(l.a)({},d),{},{first:"",third:""}))},children:Object(j.jsx)(y.a,{children:Object(j.jsxs)(ve.a,{item:!0,px:3,children:[Object(j.jsx)(Ne.a,{value:"pri",control:Object(j.jsx)(Ve.a,{}),label:Object(j.jsx)(G.a,{variant:"h5",color:"primary",children:"$"})}),Object(j.jsx)(Ne.a,{value:"per",control:Object(j.jsx)(Ve.a,{color:"secondary"}),label:Object(j.jsx)(G.a,{variant:"h5",color:"secondary",children:"%"})})]})})})})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(Ie.a,{sx:{width:"100%"},component:"fieldset",children:Object(j.jsx)(Ge.a,{name:"operation",value:v,onChange:function(e){var t=e.target.value;g(t),u(Object(l.a)(Object(l.a)({},d),{},{second:""}))},children:Object(j.jsx)(y.a,{children:Object(j.jsxs)(ve.a,{px:3,children:[Object(j.jsx)(Ne.a,{value:"add",control:Object(j.jsx)(Ve.a,{}),label:Object(j.jsx)(G.a,{variant:"h4",color:"primary",children:"+"})}),Object(j.jsx)(Ne.a,{value:"sub",control:Object(j.jsx)(Ve.a,{color:"secondary"}),label:Object(j.jsx)(G.a,{variant:"h4",color:"secondary",children:"-"})})]})})})})}),Object(j.jsx)(ve.a,{item:!0,xs:4,children:Object(j.jsx)(G.a,{variant:"h5",color:"initial",sx:{display:{xs:"none",md:"flex"}},children:"complete calculator"})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(Ue.a,{fullWidth:!0,size:"small",type:"number",label:"pri"===O?"Price":"Percentage",InputProps:{inputProps:{min:"0",step:"10"},startAdornment:Object(j.jsx)(Ke.a,{position:"start",children:Object(j.jsx)(G.a,{variant:"h5",color:"pri"===O?"primary":"secondary",children:"pri"===O?"$":""})}),endAdornment:Object(j.jsx)(Ke.a,{position:"start",children:Object(j.jsx)(G.a,{variant:"h5",color:"secondary",children:"pri"===O?"":"%"})})},name:"first",value:d.first,onChange:S,onKeyPress:function(e){"Enter"===e.key&&U()}})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(Ue.a,{fullWidth:!0,label:"day/month/year | Percentage",size:"small",InputProps:{startAdornment:Object(j.jsx)(Ke.a,{position:"start",children:Object(j.jsx)(G.a,{variant:"h4",color:"add"===v?"primary":"secondary",children:"add"===v?"+":"-"})}),endAdornment:Object(j.jsx)(Ke.a,{position:"start",children:Object(j.jsx)(G.a,{variant:"h5",color:"inherit",children:"%"})})},name:"second",value:d.second,onChange:S,onKeyPress:function(e){"Enter"===e.key&&U()}})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(Ue.a,{fullWidth:!0,label:"Result",type:"number",size:"small",InputProps:{inputProps:{min:"0",step:"10"},startAdornment:Object(j.jsx)(Ke.a,{position:"start",children:Object(j.jsx)(G.a,{variant:"h5",color:"inherit",children:"pri"===O?"= $":"="})}),endAdornment:Object(j.jsx)(Ke.a,{position:"start",children:Object(j.jsx)(G.a,{variant:"h5",color:"inherit",children:"pri"===O?"":"%"})})},name:"third",value:d.third,onChange:S,onKeyPress:function(e){"Enter"===e.key&&U()}})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(ae.a,{fullWidth:!0,onClick:T,size:"large",sx:{minHeight:"100%"},variant:"contained",color:"success",endIcon:Object(j.jsx)(Je.a,{}),children:Object(j.jsx)(G.a,{variant:"body1",children:"GET"})})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(ae.a,{fullWidth:!0,onClick:z,size:"large",sx:{minHeight:"100%"},variant:"contained",color:"success",endIcon:Object(j.jsx)(Ye.a,{}),children:Object(j.jsx)(G.a,{variant:"body1",children:"GET"})})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(ae.a,{fullWidth:!0,onClick:F,size:"large",sx:{minHeight:"100%"},variant:"contained",color:"success",endIcon:Object(j.jsx)(Xe.a,{}),children:Object(j.jsx)(G.a,{variant:"body1",children:"GET"})})}),Object(j.jsx)(ve.a,{item:!0,xs:12,py:2,children:Object(j.jsx)(V.a,{})}),Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(Ue.a,{fullWidth:!0,label:"Evaluate Expression",size:"small",name:"expression",InputProps:{style:{fontFamily:"monospace",fontSize:20},startAdornment:Object(j.jsx)(Ke.a,{position:"start",children:Object(j.jsx)(G.a,{variant:"h4",color:"primary",children:">>>"})})},InputLabelProps:{style:{fontFamily:"monospace",fontSize:20}},value:k,onChange:function(e){var t=e.target.value;_(t)},onKeyPress:function(e){"Enter"===e.key&&D()}})}),Object(j.jsx)(ve.a,{item:!0,xs:4}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(ae.a,{fullWidth:!0,onClick:function(){u({first:"",second:"",third:""}),_("")},size:"large",sx:{minHeight:"100%"},variant:"contained",color:"error",endIcon:Object(j.jsx)(E.a,{}),children:Object(j.jsx)(G.a,{variant:"body1",children:"Clear"})})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(ae.a,{fullWidth:!0,onClick:D,size:"large",sx:{minHeight:"100%"},variant:"contained",color:"primary",endIcon:Object(j.jsx)(E.a,{}),children:Object(j.jsx)(G.a,{variant:"body1",children:"Evaluate"})})})]})})})})},Qe=function(e){var t=e.handleMessage,a=e.history,r=e.setHistory,c=Object(n.useContext)(b).user,s=Object(n.useState)({price:"",str_date:""}),o=Object(i.a)(s,2),d=o[0],u=o[1],h=function(e){var t=e.target,a=t.name,n=t.value;u(Object(l.a)(Object(l.a)({},d),{},Object(Fe.a)({},a,n)))},x=function(){for(var e=0,n=Object.entries(d);e<n.length;e++){var s=Object(i.a)(n[e],2),o=s[0];if(!s[1])return void t("The ".concat(o," field is required"),"error")}Object(xe.a)(he.a.mark((function e(){var n;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.a.post(I+"/calculator/price-add-percent",Object(l.a)(Object(l.a)({},d),{},{str_date:d.str_date.split("-").reverse().join("/")}),{headers:{Accept:"*/*",Authorization:"Bearer ".concat(c.token)}});case 3:void 0!==(n=e.sent).data.result&&(t("$".concat(n.data.result),"success"),r([{_id:{$date:(new Date).getTime()},calculation:n.data.calculation,footnote:n.data.footnote}].concat(Object($e.a)(a)))),n.data.err&&t(n.data.err,"error"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()};return Object(j.jsx)(ve.a,{item:!0,xs:12,md:7,children:Object(j.jsx)(y.a,{elevation:5,sx:{borderRadius:3},children:Object(j.jsx)(Ce.a,{sx:{paddingBlockEnd:2,minHeight:"30vh"},p:2,children:Object(j.jsxs)(ve.a,{container:!0,spacing:3,align:"center",pr:2,sx:{minHeight:"25vh",overflow:"auto"},children:[Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(G.a,{variant:"h5",color:"initial",children:"basic calculator"})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(Ue.a,{fullWidth:!0,label:"Price",type:"number",name:"price",InputProps:{inputProps:{min:"0",step:"10"},startAdornment:Object(j.jsx)(Ke.a,{position:"start",children:Object(j.jsx)(G.a,{variant:"h5",color:"primary",children:"$"})})},value:d.price,onChange:h,onKeyPress:function(e){"Enter"===e.key&&x()}})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(Ue.a,{fullWidth:!0,label:"Date",type:"date",InputProps:{startAdornment:Object(j.jsx)(Ke.a,{position:"start",children:Object(j.jsx)(G.a,{variant:"body1",color:"primary",children:"from"})})},name:"str_date",value:d.str_date,onChange:h,onKeyPress:function(e){"Enter"===e.key&&x()}})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(ae.a,{fullWidth:!0,onClick:x,size:"large",sx:{minHeight:"75%"},variant:"contained",color:"success",endIcon:Object(j.jsx)(E.a,{}),children:Object(j.jsx)(G.a,{variant:"body1",children:"GET PRICE"})})})]})})})})},Ze=a(298),et=function(e){var t=e.history,a=Object(n.useMemo)((function(){var e=[],a=(new Date).getTime(),n=a;return t.length>0?t.forEach((function(t){var r=ze(a,t._id.$date);n!==r&&(e.push({divider:r}),n=r),e.push(t)})):e.push({divider:"There are no previous calculations"}),e}),[t]);return Object(j.jsx)(ve.a,{item:!0,xs:12,md:5,children:Object(j.jsx)(Ce.a,{sx:{paddingBlockEnd:2,height:"75vh",backgroundColor:"info.main"},borderRadius:3,p:2,children:Object(j.jsxs)(ve.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"top",alignContent:"flex-start",sx:{height:"70vh",overflow:"auto"},children:[Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(G.a,{variant:"h5",color:"initial",children:"Result / History"})}),a.map((function(e,t){var a,n;(e.divider&&(a=Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(V.a,{children:Object(j.jsx)(ke.a,{color:"warning",size:"small",label:e.divider})})},e.divider)),e._id)&&(1!==t&&(n={color:"info.light"}),a=Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(y.a,{elevation:7,children:Object(j.jsx)(Ze.a,{title:e.footnote,placement:"right",disableInteractive:!0,arrow:!0,followCursor:!0,children:Object(j.jsx)(G.a,Object(l.a)(Object(l.a)({variant:"h6"},n),{},{sx:{whiteSpace:"pre-line"},children:e.calculation}))})})},e._id.$date));return a}))]})})})},tt=function(){var e=Object(n.useContext)(b).user,t=Object(n.useContext)(x).userSettings,a=Object(n.useState)({msg:"",vnt:""}),r=Object(i.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)([]),l=Object(i.a)(o,2),d=l[0],u=l[1],h=Object(n.useState)(!1),O=Object(i.a)(h,2),m=O[0],p=O[1],f=Object(n.useState)(Boolean(null===t||void 0===t?void 0:t.calculator)),v=Object(i.a)(f,2),g=v[0],w=v[1];Object(n.useEffect)((function(){var t=me.a.CancelToken.source();return Object(xe.a)(he.a.mark((function a(){var n;return he.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,me.a.get(I+"/calculator/get-history",{cancelToken:t.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(e.token)}});case 2:(n=a.sent).data.hist&&u(n.data.hist),n.data.msg,n.data.err&&console.error(n.data.err);case 6:case"end":return a.stop()}}),a)})))(),function(){t.cancel()}}),[e,u]);var C=function(e,t){s({msg:e,vnt:t}),p(!0)};return Object(j.jsxs)(fe.a,{maxWidth:"xl",children:[Object(j.jsxs)(ve.a,{container:!0,spacing:1,margin:0,pt:3,children:[Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(Ne.a,{labelPlacement:"start",label:Object(j.jsx)(G.a,{px:1,children:"Calculator"}),control:Object(j.jsx)(Ne.a,{control:Object(j.jsx)(Le.a,{checked:g,onChange:function(e){var t=e.target.checked;w(t)}}),label:"Basic"})})}),g?Object(j.jsx)(Qe,{history:d,setHistory:u,handleMessage:C}):Object(j.jsx)(qe,{history:d,setHistory:u,handleMessage:C}),Object(j.jsx)(et,{history:d,setHistory:u})]}),Object(j.jsx)(ge.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:m,autoHideDuration:3e3,onClose:function(){p(!1)},children:Object(j.jsx)(we.a,{variant:"filled",color:c.vnt,children:c.msg})})]})},at=function(e,t,a,r,c,s){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(e){console.error(e)},o=Object(n.useContext)(b),l=o.user,d={Accept:"*/*",Authorization:"Bearer ".concat(null===l||void 0===l?void 0:l.token)};return function(){var n=Object(xe.a)(he.a.mark((function n(o){var l;return he.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,n.t0=e,n.next="post"===n.t0?8:"put"===n.t0?12:"delete"===n.t0?16:4;break;case 4:return n.next=6,me.a.get(I+t,{headers:d});case 6:return l=n.sent,n.abrupt("break",20);case 8:return n.next=10,me.a.post(I+t,o,{headers:d});case 10:return l=n.sent,n.abrupt("break",20);case 12:return n.next=14,me.a.put(I+t,o,{headers:d});case 14:return l=n.sent,n.abrupt("break",20);case 16:return n.next=18,me.a.delete(I+t,{headers:d,data:o});case 18:return l=n.sent,n.abrupt("break",20);case 20:l.data[a]&&r(l.data),l.data.wrn&&c(l.data),l.data.err&&s(l.data),n.next=28;break;case 25:n.prev=25,n.t1=n.catch(0),i(n.t1);case 28:case"end":return n.stop()}}),n,null,[[0,25]])})));return function(e){return n.apply(this,arguments)}}()},nt=function(e,t,a,r,c){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(e){console.error(e)},i=Object(n.useContext)(b),o=i.user;Object(n.useEffect)((function(){var n={Accept:"*/*",Authorization:"Bearer ".concat(null===o||void 0===o?void 0:o.token)},i=me.a.CancelToken.source();return Object(xe.a)(he.a.mark((function o(){var l;return he.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,me.a.get(I+e,{cancelToken:i.token,headers:n});case 3:(l=o.sent).data[t]&&a(l.data),l.data.wrn&&r(l.data),l.data.err&&c(l.data),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(0),s(o.t0);case 12:case"end":return o.stop()}}),o,null,[[0,9]])})))(),function(){i.cancel("useAxios: canceled")}}),[o])},rt=a(55),ct=a(336),st=a(337),it=a(338),ot=a(339),lt=a(340),dt=a(341),jt=a(282),bt=function(e,t,a){var n=e;return void 0!==t&&t.forEach((function(e){var t=e.pattern,a=e.replacement;n=n.replace(RegExp(t,"ig"),a)})),n.replace(/{([\w\s]+)}/g,(function(e,t){return"undefined"===typeof a[t]?e:a[t]}))},ut=["children","sx"],ht=function(e){var t=e.children,a=e.sx,n=Object(B.a)(e,ut);return Object(j.jsx)(ct.a,Object(l.a)(Object(l.a)({align:"center",sx:Object(l.a)({borderColor:"#FFFFFF"},a)},n),{},{children:t}))},xt=function(e){var t=e.payMeths,a=e.sysRegex,r=e.handleMessage,c=Object(n.useState)(""),s=Object(i.a)(c,2),o=s[0],l=s[1],d=Object(n.useMemo)((function(){var e,a="",n=[],r=Object(rt.a)(t);try{for(r.s();!(e=r.n()).done;){var c=e.value;c.card_name!==a&&(a=c.card_name,n.push({id:a,header:a}));var s=0|(parseFloat(o)*(1+c.increase/100)).toFixed(),i=(s/c.installments).toFixed();n.push({id:c._id.$oid,card_name:c.card_name,installments:c.installments,total:s,monthly:i,increase:c.increase,pos_code:c.pos_code,description:c.description})}}catch(l){r.e(l)}finally{r.f()}return n}),[t,o]);return Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(Ce.a,{sx:{paddingBlockEnd:2,height:"80vh"},border:2,p:2,borderRadius:1,borderColor:"primary.main",children:Object(j.jsxs)(ve.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"center",children:[Object(j.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(G.a,{variant:"h6",color:"primary.main",children:"Credit Cards Payments"})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(Ue.a,{label:"Price",size:"small",inputProps:{min:0,step:10},InputProps:{startAdornment:Object(j.jsx)(Ke.a,{position:"start",children:Object(j.jsx)(G.a,{variant:"h6",color:"primary",children:"$"})})},type:"number",value:o,onChange:function(e){l(e.target.value)}})}),Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsxs)(y.a,{elevation:3,sx:{borderRadius:"15px 15px 0px 0px"},children:[Object(j.jsx)(y.a,{elevation:3,sx:{borderRadius:"15px 15px 0px 0px",backgroundColor:"warning.dark",height:40},children:Object(j.jsx)(G.a,{variant:"body1",color:"initial",p:1,children:"Card Name"})}),Object(j.jsx)(st.a,{sx:{height:{xs:"57vh",md:"60vh"}},children:Object(j.jsxs)(it.a,{stickyHeader:!0,size:"small",children:[Object(j.jsx)(ot.a,{children:Object(j.jsxs)(lt.a,{children:[Object(j.jsx)(ht,{width:"20%",children:"Installments"}),Object(j.jsx)(ht,{width:"20%",sx:{backgroundColor:"error.dark"},children:"Total"}),Object(j.jsx)(ht,{width:"20%",sx:{backgroundColor:"success.dark"},children:"Monthly"}),Object(j.jsx)(ht,{width:"20%",children:"Increase"}),Object(j.jsx)(ht,{width:"20%",children:"PosCode"}),Object(j.jsx)(ht,{width:"20%",children:"Copy"})]})}),Object(j.jsx)(dt.a,{children:d.map((function(e){return e.header?Object(j.jsx)(lt.a,{children:Object(j.jsx)(ht,{width:"100%",colSpan:6,sx:{borderRadius:"20px 20px 0px 0px",backgroundColor:"warning.dark"},children:e.header})},e.header):Object(j.jsx)(Ze.a,{title:e.description,disableInteractive:!0,placement:"right",arrow:!0,followCursor:!0,children:Object(j.jsxs)(lt.a,{hover:!0,children:[Object(j.jsx)(ht,{children:e.installments}),Object(j.jsxs)(ht,{sx:{backgroundColor:"error.dark"},children:["$",e.total]}),Object(j.jsxs)(ht,{sx:{backgroundColor:"success.dark"},children:["$",e.monthly]}),Object(j.jsxs)(ht,{children:[e.increase,"%"]}),Object(j.jsxs)(ht,{children:["*",e.pos_code,"*"]}),Object(j.jsx)(ht,{children:Object(j.jsx)(L.a,{size:"small",color:"primary",onClick:function(){return function(e){Object(xe.a)(he.a.mark((function t(){return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:navigator.clipboard.writeText(bt("".concat(e.installments," ").concat(e.monthly),a));case 1:case"end":return t.stop()}}),t)})))(),r("Text Copied to Clipboard","success")}(e)},children:Object(j.jsx)(jt.a,{fontSize:"small"})})})]})},e.id)}))})]})})]})})]})})})},Ot=a(283),mt=function(e){var t=e.commonAnswers,a=e.ownAnswers,r=e.sysRegex,c=e.ownRegex,s=e.handleMessage,o=Object(n.useState)(""),d=Object(i.a)(o,2),b=d[0],u=d[1],h=Object(n.useMemo)((function(){if(t.length>0&&a.length>0)return[].concat(Object($e.a)(t),Object($e.a)(a)).map((function(e){var t=e.label,a=e.content;return Object(Fe.a)({},t,a)})).reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),t)}))}),[t,a]),x=function(e){u(e)};return Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(Ce.a,{sx:{paddingBlockEnd:2,minHeight:"80vh"},border:2,p:2,borderRadius:1,borderColor:"primary.main",children:Object(j.jsxs)(ve.a,{container:!0,spacing:1,align:"center",pr:2,children:[Object(j.jsx)(ve.a,{item:!0,xs:12,md:11,children:Object(j.jsx)(Ue.a,{label:"Content",focused:!0,color:"warning",fullWidth:!0,multiline:!0,rows:4,InputProps:{readOnly:!0},value:b})}),Object(j.jsxs)(ve.a,{item:!0,xs:12,md:1,children:[Object(j.jsx)(Ze.a,{title:"Copy Formated Text",placement:"left",children:Object(j.jsx)(L.a,{color:"primary",onClick:function(){Object(xe.a)(he.a.mark((function e(){return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.clipboard.writeText(bt(b,[].concat(Object($e.a)(r),Object($e.a)(c)),h));case 1:case"end":return e.stop()}}),e)})))(),s("Formatted Text Copied to Clipboard","success")},children:Object(j.jsx)(jt.a,{})})}),Object(j.jsx)(Ze.a,{title:"Copy Raw Text",placement:"left",children:Object(j.jsx)(L.a,{color:"info",onClick:function(){Object(xe.a)(he.a.mark((function e(){return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.clipboard.writeText(b);case 1:case"end":return e.stop()}}),e)})))(),s("Raw Text Copied to Clipboard","success")},children:Object(j.jsx)(jt.a,{})})}),Object(j.jsx)(Ze.a,{title:"Unselect Answer",placement:"left",children:Object(j.jsx)(L.a,{color:"warning",onClick:function(){return u("")},children:Object(j.jsx)(Ot.a,{})})})]}),Object(j.jsxs)(ve.a,{item:!0,xs:12,md:6,children:[Object(j.jsx)(G.a,{variant:"h6",children:"Commons"}),Object(j.jsx)(ye.a,{spacing:1,p:1,sx:{paddingBlockEnd:2,height:"50vh",overflow:"auto"},children:t.map((function(e){return Object(j.jsx)(ae.a,{fullWidth:!0,variant:"contained",sx:{color:"#FFFFFF",background:e.color,"&:hover":{background:e.color,filter:"brightness(90%)"}},onClick:function(){return x(e.content)},children:e.label},e._id.$oid)}))})]}),Object(j.jsxs)(ve.a,{item:!0,xs:12,md:6,children:[Object(j.jsx)(G.a,{variant:"h6",children:"Own"}),Object(j.jsx)(ye.a,{spacing:1,p:1,sx:{paddingBlockEnd:2,height:"50vh",overflow:"auto"},children:a.map((function(e){return Object(j.jsx)(ae.a,{fullWidth:!0,variant:"contained",sx:{color:"#FFFFFF",background:e.color,"&:hover":{background:e.color,filter:"brightness(90%)"}},onClick:function(){return x(e.content)},children:e.label},e._id.$oid)}))})]})]})})})},pt=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)({msg:"",vnt:""}),s=Object(i.a)(c,2),o=s[0],l=s[1],d=Object(n.useState)([]),b=Object(i.a)(d,2),u=b[0],h=b[1],x=Object(n.useState)([]),O=Object(i.a)(x,2),m=O[0],p=O[1],f=Object(n.useState)([]),v=Object(i.a)(f,2),g=v[0],w=v[1],C=Object(n.useState)([]),y=Object(i.a)(C,2),k=y[0],_=y[1],S=Object(n.useState)([]),A=Object(i.a)(S,2),T=A[0],z=A[1];nt("/answers/get-all","answers",(function(e){e.answers.payment_methods&&h(e.answers.payment_methods),e.answers.common_answers&&p(e.answers.common_answers),e.answers.own_answers&&w(e.answers.own_answers),e.answers.sys_regex&&_(e.answers.sys_regex),e.answers.own_regex&&z(e.answers.own_regex)}),(function(e){E(e.wrn,"warning")}),(function(e){E(e.err,"error")}));var E=function(e,t){l({msg:e,vnt:t}),r(!0)};return Object(j.jsxs)(fe.a,{maxWidth:"xl",children:[Object(j.jsxs)(ve.a,{container:!0,spacing:1,margin:0,pt:3,children:[Object(j.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(xt,{payMeths:u,sysRegex:k,handleMessage:E})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(mt,{commonAnswers:m,ownAnswers:g,sysRegex:k,ownRegex:T,handleMessage:E})})]}),Object(j.jsx)(ge.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:a,autoHideDuration:3e3,onClose:function(){r(!1)},children:Object(j.jsx)(we.a,{variant:"filled",color:o.vnt,sx:{whiteSpace:"pre-line"},children:o.msg})})]})},ft=function(){return Object(j.jsx)(fe.a,{maxWidth:"xl",children:Object(j.jsx)(ve.a,{container:!0,spacing:1,margin:0,pt:3,children:Object(j.jsx)(m.b,{})})})},vt=a(284),gt=a(285),wt=a(286),Ct=a(287),yt=["children","sx"],kt=function(e){var t=e.children,a=e.sx,n=Object(B.a)(e,yt);return Object(j.jsx)(ct.a,Object(l.a)(Object(l.a)({align:"center",sx:Object(l.a)({borderColor:"#FFFFFF"},a)},n),{},{children:t}))},_t=function(e){var t=e.payMeths,a=e.setPayMeths,r=e.handleMessage,c=Object(n.useMemo)((function(){var e,a="",n=[],r=Object(rt.a)(t);try{for(r.s();!(e=r.n()).done;){var c=e.value;c.card_name!==a&&(a=c.card_name,n.push({id:a,header:a})),n.push({id:c._id.$oid,card_name:c.card_name,installments:c.installments,increase:c.increase,pos_code:c.pos_code,description:c.description})}}catch(s){r.e(s)}finally{r.f()}return n}),[t]),s={id:"",card_name:"",installments:"",increase:"",pos_code:"",description:""},o=Object(n.useState)(""),d=Object(i.a)(o,2),b=d[0],u=d[1],h=Object(n.useState)(s),x=Object(i.a)(h,2),O=x[0],m=x[1],p=Object(n.useState)(s),f=Object(i.a)(p,2),v=f[0],g=f[1],w=function(e){var t=e.target,a=t.name,n=t.value;g(Object(l.a)(Object(l.a)({},v),{},Object(Fe.a)({},a,n)))},C=at("post","/answers/create-payment-method","payment_methods",(function(e){a(e.payment_methods),r(e.msg,"success"),u(""),m(s)}),(function(e){r(e.wrn,"warning")}),(function(e){r(e.err,"error")})),k=at("post","/answers/create-payment-method","payment_methods",(function(e){a(e.payment_methods),r(e.msg,"success"),u(""),m(s)}),(function(e){r(e.wrn,"warning")}),(function(e){r(e.err,"error")})),_=at("put","/answers/update-credit-card","payment_methods",(function(e){a(e.payment_methods),r(e.msg,"success"),u(""),m(s)}),(function(e){r(e.wrn,"warning")}),(function(e){r(e.err,"error")})),S=at("put","/answers/update-method","payment_methods",(function(e){a(e.payment_methods),r(e.msg,"success"),u(""),m(s)}),(function(e){r(e.wrn,"warning")}),(function(e){r(e.err,"error")})),A=at("delete","/answers/delete-credit-card","payment_methods",(function(e){a(e.payment_methods),r(e.msg,"success"),u(""),m(s)}),(function(e){r(e.wrn,"warning")}),(function(e){r(e.err,"error")})),T=at("delete","/answers/delete-method","payment_methods",(function(e){a(e.payment_methods),r(e.msg,"success"),u(""),m(s)}),(function(e){r(e.wrn,"warning")}),(function(e){r(e.err,"error")}));return Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(y.a,{elevation:3,children:Object(j.jsx)(Ce.a,{sx:{paddingBlockEnd:2,height:"80vh"},border:2,p:2,borderRadius:1,borderColor:"secondary.main",children:Object(j.jsxs)(ve.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"center",children:[Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(G.a,{variant:"body1",color:"secondary.main",children:"Edit Credit Cards Payments Methods"})}),Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsxs)(y.a,{elevation:3,sx:{borderRadius:"15px 15px 0px 0px"},children:[Object(j.jsx)(y.a,{elevation:3,sx:{borderRadius:"15px 15px 0px 0px",backgroundColor:"warning.main",height:40},children:Object(j.jsx)(G.a,{variant:"body1",color:"initial",p:1,children:"Card Name"})}),Object(j.jsx)(st.a,{sx:{height:"60vh"},children:Object(j.jsxs)(it.a,{stickyHeader:!0,size:"small",children:[Object(j.jsx)(ot.a,{children:Object(j.jsxs)(lt.a,{children:[Object(j.jsx)(kt,{width:"25%",children:"Installments"}),Object(j.jsx)(kt,{width:"25%",children:"Description"}),Object(j.jsx)(kt,{width:"25%",children:"Increase"}),Object(j.jsx)(kt,{width:"25%",children:"Code"}),Object(j.jsx)(kt,{width:"5%",children:"Upg"}),Object(j.jsx)(kt,{width:"5%",children:"Drop"}),Object(j.jsx)(kt,{width:"5%",children:"Add"})]})}),Object(j.jsxs)(dt.a,{children:[Object(j.jsxs)(lt.a,{children:[Object(j.jsx)(kt,{width:"90%",colSpan:6,sx:{borderRadius:"50px 0px 0px 50px",backgroundColor:"success.dark"},children:Object(j.jsx)(Ue.a,{fullWidth:!0,label:"Card Name",size:"small",variant:"standard",value:b,color:"secondary",inputProps:{style:{textAlign:"center"}},onChange:function(e){u(e.target.value)}})}),Object(j.jsx)(kt,{sx:{borderRadius:"0px 50px 50px 0px",backgroundColor:"success.dark"},children:Object(j.jsx)(L.a,{size:"small",color:"secondary",disabled:!Boolean(b),onClick:function(){return C({method:{card_name:b,installments:0,increase:0,pos_code:0,description:"FIXME"}})},children:Object(j.jsx)(vt.a,{fontSize:"small"})})})]}),c.map((function(e){return O.id===e.id?e.header?Object(j.jsxs)(lt.a,{children:[Object(j.jsx)(kt,{width:"90%",colSpan:4,sx:{borderRadius:"50px 0px 0px 0px",backgroundColor:"warning.main"},children:Object(j.jsx)(Ue.a,{label:"Card Name",size:"small",variant:"standard",value:v.header,name:"header",onChange:w})}),Object(j.jsx)(kt,{sx:{backgroundColor:"warning.main"},children:Object(j.jsx)(re,{title:"Update",confirmText:"Update",message:"Confirm Update Payment Method?",color:"warning",action:function(){return _({name:e.id,new_name:v.header})},children:Object(j.jsx)(L.a,{size:"small",color:"error",children:Object(j.jsx)(gt.a,{fontSize:"small"})})})}),Object(j.jsx)(kt,{sx:{backgroundColor:"warning.main"},children:Object(j.jsx)(L.a,{size:"small",color:"info",onClick:function(){return m(s)},children:Object(j.jsx)(Ot.a,{fontSize:"small"})})}),Object(j.jsx)(kt,{sx:{borderRadius:"0px 50px 50px 0px",backgroundColor:"warning.main"},children:Object(j.jsx)(L.a,{size:"small",color:"info",onClick:function(){return k({method:{card_name:e.header,installments:0,increase:0,pos_code:0,description:"FIXME"}})},children:Object(j.jsx)(vt.a,{fontSize:"small"})})})]},e.header):Object(j.jsxs)(lt.a,{hover:!0,children:[Object(j.jsx)(kt,{children:Object(j.jsx)(Ue.a,{label:"Installments",size:"small",variant:"standard",name:"installments",value:v.installments,onChange:w})}),Object(j.jsx)(kt,{children:Object(j.jsx)(Ue.a,{label:"Description",size:"small",variant:"standard",name:"description",value:v.description,onChange:w})}),Object(j.jsx)(kt,{children:Object(j.jsx)(Ue.a,{label:"Increase",size:"small",variant:"standard",name:"increase",value:v.increase,onChange:w})}),Object(j.jsx)(kt,{children:Object(j.jsx)(Ue.a,{label:"Pos-Code",size:"small",variant:"standard",name:"pos_code",value:v.pos_code,onChange:w})}),Object(j.jsx)(kt,{children:Object(j.jsx)(re,{title:"Update",confirmText:"Update",message:"Confirm Update Payment Method?",color:"success",action:function(){return S({method:Object(l.a)({},v)})},children:Object(j.jsx)(L.a,{size:"small",color:"success",children:Object(j.jsx)(gt.a,{fontSize:"small"})})})}),Object(j.jsx)(kt,{children:Object(j.jsx)(L.a,{size:"small",color:"info",onClick:function(){return m(s)},children:Object(j.jsx)(Ot.a,{fontSize:"small"})})})]},e.id):e.header?Object(j.jsxs)(lt.a,{children:[Object(j.jsx)(kt,{width:"90%",colSpan:4,sx:{borderRadius:"50px 0px 0px 0px",backgroundColor:"warning.main"},children:e.header}),Object(j.jsx)(kt,{sx:{backgroundColor:"warning.main"},children:Object(j.jsx)(L.a,{size:"small",color:"error",onClick:function(){m(e),g(e)},children:Object(j.jsx)(wt.a,{fontSize:"small"})})}),Object(j.jsx)(kt,{sx:{backgroundColor:"warning.main"},children:Object(j.jsx)(re,{title:"Drop",confirmText:"Drop",message:"Confirm Drop Payment Method?",color:"error",action:function(){return A({card_name:e.header})},children:Object(j.jsx)(L.a,{size:"small",color:"error",children:Object(j.jsx)(Ct.a,{fontSize:"small"})})})}),Object(j.jsx)(kt,{sx:{borderRadius:"0px 50px 50px 0px",backgroundColor:"warning.main"},children:Object(j.jsx)(L.a,{size:"small",color:"info",onClick:function(){return k({method:{card_name:e.header,installments:0,increase:0,pos_code:0,description:"FIXME"}})},children:Object(j.jsx)(vt.a,{fontSize:"small"})})})]},e.header):Object(j.jsxs)(lt.a,{hover:!0,children:[Object(j.jsx)(kt,{children:e.installments}),Object(j.jsx)(kt,{children:e.description}),Object(j.jsx)(kt,{children:e.increase}),Object(j.jsx)(kt,{children:e.pos_code}),Object(j.jsx)(kt,{children:Object(j.jsx)(L.a,{size:"small",color:"warning",onClick:function(){m(e),g(e)},children:Object(j.jsx)(wt.a,{fontSize:"small"})})}),Object(j.jsx)(kt,{children:Object(j.jsx)(re,{title:"Drop",confirmText:"Drop",message:"Confirm Drop Payment Method?",color:"error",action:function(){return T({method:{id:e.id}})},children:Object(j.jsx)(L.a,{size:"small",color:"error",children:Object(j.jsx)(Ct.a,{fontSize:"small"})})})})]},e.id)}))]})]})})]})})]})})})})},St=a(288),At=function(e){var t=e.user,a=e.commonAnswers,r=e.ownAnswers,c=e.setCommonAnswers,s=e.setOwnAnswers,o=e.handleMessage,d={"#1976d2":"BLUE","#0097a7":"CYAN","#388e3c":"GREEN","#fbc02d":"YELLOW","#f57c00":"ORANGE","#d32f2f":"RED","#c2185b":"PINK","#7b1fa2":"PURPLE","#5d4037":"BROWN","#455a64":"GREY"},b={id:"",label:"",color:"",content:"",common:!1,order:0},u=Object(n.useState)(b),h=Object(i.a)(u,2),x=h[0],O=h[1],m=Object(n.useState)(!1),p=Object(i.a)(m,2),f=p[0],v=p[1],g=function(e){var t=e.target,a=t.name,n=t.value,r=t.checked;O(Object(l.a)(Object(l.a)({},x),{},Object(Fe.a)({},a,"common"!==a?n:r)))},w=function(e){O(e),v(!0)},C=[function(e){e.answers.common_answers&&c(e.answers.common_answers),e.answers.own_answers&&s(e.answers.own_answers),o(e.msg,"success"),O(b),v(!1)},function(e){o(e.wrn,"warning")},function(e){o(e.err,"error")}],k=at.apply(void 0,["post","/answers/create-answer","answers"].concat(C)),_=at.apply(void 0,["put","/answers/update-answer","answers"].concat(C)),S=at.apply(void 0,["delete","/answers/delete-answer","answers"].concat(C));return Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(y.a,{elevation:3,children:Object(j.jsx)(Ce.a,{sx:{paddingBlockEnd:2,minHeight:"80vh"},border:2,p:2,borderRadius:1,borderColor:"secondary.main",children:Object(j.jsxs)(ve.a,{container:!0,spacing:1,align:"center",pr:2,children:[Object(j.jsx)(ve.a,{item:!0,xs:12,md:3,children:Object(j.jsx)(Ue.a,{size:"small",label:"Label",color:"warning",fullWidth:!0,name:"label",value:x.label,onChange:g})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:3,children:Object(j.jsx)(Ue.a,{size:"small",label:"Order",color:"warning",fullWidth:!0,name:"order",type:"number",value:x.order,onChange:g})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:3,children:Object(j.jsx)(Ie.a,{fullWidth:!0,children:Object(j.jsx)(Be.a,{size:"small",name:"color",value:x.color,onChange:g,children:Object.entries(d).map((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(j.jsx)(W.a,{value:a,children:Object(j.jsx)(G.a,{color:a,children:n})},n)}))})})}),(null===t||void 0===t?void 0:t.is_admin)&&!f&&Object(j.jsx)(ve.a,{item:!0,xs:12,md:3,children:Object(j.jsx)(Ne.a,{control:Object(j.jsx)(Le.a,{name:"common",checked:x.common,onChange:g}),label:"Common"})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:11,children:Object(j.jsx)(Ue.a,{label:"Content",color:"warning",fullWidth:!0,multiline:!0,rows:5,name:"content",value:x.content,onChange:g})}),Object(j.jsxs)(ve.a,{item:!0,xs:12,md:1,children:[Object(j.jsx)(re,{title:f?"Update Answer":"Create Answer",confirmText:f?"Update":"Create",message:f?"Confirm Update Answer?":"Confirm Create Answer?",action:f?function(){return _({answer:Object(l.a)(Object(l.a)({},x),{},{id:x._id.$oid,color:d[x.color]})})}:function(){return k({answer:Object(l.a)(Object(l.a)({},x),{},{color:d[x.color]})})},color:f?"warning":"success",children:Object(j.jsx)(L.a,{color:f?"primary":"success",disabled:!Boolean(x.label),children:Object(j.jsx)(St.a,{})})}),Object(j.jsx)(re,{title:"Delete Answer",message:"Confirm Delete Answer?",confirmText:"Delete",action:function(){return S({answer:{id:x._id.$oid}})},children:Object(j.jsx)(L.a,{color:"error",disabled:!Boolean(x.label),children:Object(j.jsx)(Ct.a,{})})}),Object(j.jsx)(L.a,{color:"warning",disabled:!Boolean(x.label),onClick:function(){O(b),v(!1)},children:Object(j.jsx)(Ot.a,{})})]}),(null===t||void 0===t?void 0:t.is_admin)&&Object(j.jsxs)(ve.a,{item:!0,xs:12,md:6,children:[Object(j.jsx)(G.a,{variant:"h6",children:"Commons"}),Object(j.jsx)(ye.a,{spacing:1,p:1,sx:{paddingBlockEnd:2,height:"40vh",overflow:"auto"},children:a.map((function(e){return Object(j.jsx)(ae.a,{fullWidth:!0,variant:"contained",sx:{color:"#FFFFFF",background:e.color,"&:hover":{background:e.color,filter:"brightness(90%)"}},onClick:function(){return w(e)},children:e.label},e._id.$oid)}))})]}),Object(j.jsxs)(ve.a,{item:!0,xs:12,md:6,children:[Object(j.jsx)(G.a,{variant:"h6",children:"Own"}),Object(j.jsx)(ye.a,{spacing:1,p:1,sx:{paddingBlockEnd:2,height:"40vh",overflow:"auto"},children:r.map((function(e){return Object(j.jsx)(ae.a,{fullWidth:!0,variant:"contained",sx:{color:"#FFFFFF",background:e.color,"&:hover":{background:e.color,filter:"brightness(90%)"}},onClick:function(){return w(e)},children:e.label},e._id.$oid)}))})]})]})})})})},Tt=function(){var e=Object(n.useContext)(b).user,t=Object(n.useState)(!1),a=Object(i.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)({msg:"",vnt:""}),o=Object(i.a)(s,2),l=o[0],d=o[1],u=Object(n.useState)([]),h=Object(i.a)(u,2),x=h[0],O=h[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),f=p[0],v=p[1],g=Object(n.useState)([]),w=Object(i.a)(g,2),C=w[0],y=w[1];nt("/answers/get-all","answers",(function(e){e.answers.payment_methods&&O(e.answers.payment_methods),e.answers.common_answers&&v(e.answers.common_answers),e.answers.own_answers&&y(e.answers.own_answers)}),(function(e){k(e.wrn,"warning")}),(function(e){k(e.err,"error")}));var k=function(e,t){d({msg:e,vnt:t}),c(!0)};return Object(j.jsxs)(j.Fragment,{children:[e.is_admin&&Object(j.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(_t,{payMeths:x,setPayMeths:O,handleMessage:k})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(At,{user:e,commonAnswers:f,setCommonAnswers:v,ownAnswers:C,setOwnAnswers:y,handleMessage:k})}),Object(j.jsx)(ge.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:r,autoHideDuration:3e3,onClose:function(){c(!1)},children:Object(j.jsx)(we.a,{variant:"filled",color:l.vnt,sx:{whiteSpace:"pre-line"},children:l.msg})})]})},zt=a(306),Et=a(289),Ft=function(e){var t=e.dates,a=e.setDates,r=e.setHasChanged,c=e.handleMessage,s={str_date:"",percent:"",increaseAll:!0},o=Object(n.useState)(s),d=Object(i.a)(o,2),b=d[0],u=d[1],h=Object(n.useState)(""),x=Object(i.a)(h,2),O=x[0],m=x[1],p=function(e){var t=e.target,a=t.name,n=t.value,r=t.checked;u(Object(l.a)(Object(l.a)({},b),{},Object(Fe.a)({},a,"increaseAll"===a?r:n)))},f=function(e){var a=parseFloat(e);return t.map((function(e){var t=parseFloat(e.percent),n=t+a+t*a/100;return{_id:e._id,percent:n.toFixed(2)}}))};return Object(j.jsx)(ve.a,{item:!0,pb:"1vh",children:Object(j.jsx)(y.a,{elevation:5,sx:{borderRadius:1},children:Object(j.jsx)(Ce.a,{borderRadius:3,p:2,sx:{paddingBlockEnd:2,minHeight:"39vh"},children:Object(j.jsxs)(ve.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"center",sx:{minHeight:"35vh",overflow:"auto"},children:[Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(G.a,{variant:"h6",color:"success.main",children:"Add New Date - Percentage"})}),Object(j.jsx)(ve.a,{item:!0,xs:8,md:4,children:Object(j.jsx)(Ue.a,{fullWidth:!0,size:"small",label:"Date",focused:!0,type:"date",name:"str_date",value:b.str_date,onChange:p})}),Object(j.jsx)(ve.a,{item:!0,xs:4,md:2,children:Object(j.jsx)(Ue.a,{fullWidth:!0,size:"small",label:"Percentage",inputProps:{min:0},type:"number",name:"percent",value:b.percent,onChange:p})}),Object(j.jsx)(ve.a,{item:!0,xs:6,md:3,children:Object(j.jsx)(Ne.a,{label:"Increase All",control:Object(j.jsx)(zt.a,{color:"warning",name:"increaseAll",checked:b.increaseAll,onChange:p})})}),Object(j.jsx)(ve.a,{item:!0,xs:6,md:3,children:Object(j.jsx)(re,{title:"Add New Date-Percentage Pair",message:"Confirm add a new one?",confirmText:"ADD",color:"success",action:function(){var e,n=b.str_date.split("-").join("/"),i=parseFloat(b.percent),o=Object(rt.a)(t);try{for(o.s();!(e=o.n()).done;){var l=e.value;if(l._id===n)return void c("'".concat(l._id,"' is already on the list"),"error")}}catch(j){o.e(j)}finally{o.f()}var d=b.increaseAll?f(i):t;a([{_id:n,percent:i}].concat(Object($e.a)(d))),r(!0),u(s)},children:Object(j.jsx)(ae.a,{fullWidth:!0,variant:"contained",color:"success",disabled:!Boolean(b.str_date)||!Boolean(b.percent),sx:{height:"100%"},startIcon:Object(j.jsx)(vt.a,{}),children:"ADD"})})}),Object(j.jsx)(ve.a,{item:!0,xs:12,py:2,children:Object(j.jsx)(V.a,{})}),Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(G.a,{variant:"h6",color:"warning.main",children:"Increase All Percentages"})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(Ue.a,{fullWidth:!0,size:"small",label:"Percentage",inputProps:{min:0},type:"number",value:O,onChange:function(e){return m(e.target.value)}})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(re,{title:"Update Date-Percentage Table",message:"Confirm update table?",confirmText:"UPDATE",action:function(){a(f(O)),r(!0),m("")},children:Object(j.jsx)(ae.a,{fullWidth:!0,variant:"contained",color:"warning",disabled:!Boolean(O),sx:{height:"100%"},startIcon:Object(j.jsx)(Et.a,{}),children:"UPDATE TABLE"})})})]})})})})},Dt=a(290),Ut=function(e){var t=e.lists,a=e.setLists,r=e.setDates,c=e.setHasChanged,s=e.handleMessage,o=Object(n.useContext)(b).user,l=Object(n.useState)(""),d=Object(i.a)(l,2),u=d[0],h=d[1],x=function(){try{Object(xe.a)(he.a.mark((function e(){var t;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.a.get(I+"/calculator/get-lists-data",{headers:{Accept:"*/*",Authorization:"Bearer ".concat(o.token)}});case 2:(t=e.sent).data.dates&&r(t.data.dates),t.data.err&&console.error(t.data.err);case 5:case"end":return e.stop()}}),e)})))()}catch(e){console.error(e)}};return Object(j.jsx)(ve.a,{item:!0,children:Object(j.jsx)(y.a,{elevation:5,sx:{borderRadius:1},children:Object(j.jsx)(Ce.a,{borderRadius:3,p:2,sx:{paddingBlockEnd:2,minHeight:"40vh"},children:Object(j.jsxs)(ve.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"center",alignContent:"flex-start",children:[Object(j.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(G.a,{variant:"h6",color:"error.main",children:"Load Table"})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:6,pb:2,children:Object(j.jsx)(re,{title:"Load Table",message:"Confirm load table?",confirmText:"LOAD",disabled:!Boolean(u),action:function(){try{Object(xe.a)(he.a.mark((function e(){var t;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.a.post(I+"/calculator/load-list",{list_name:u},{headers:{Accept:"*/*",Authorization:"Bearer ".concat(null===o||void 0===o?void 0:o.token)}});case 2:(t=e.sent).data.msg&&(x(),s(t.data.msg,"success")),t.data.err&&s(t.data.err,"error");case 5:case"end":return e.stop()}}),e)})))(),h(""),c(!1)}catch(e){console.error(e)}},children:Object(j.jsx)(ae.a,{fullWidth:!0,variant:"contained",color:"error",disabled:!Boolean(u),sx:{height:"100%"},startIcon:Object(j.jsx)(Et.a,{}),children:"LOAD TABLE"})})}),Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(ve.a,{container:!0,align:"center",alignItems:"center",alignContent:"flex-start",sx:{height:"25vh",overflow:"auto"},children:Object(j.jsxs)(it.a,{stickyHeader:!0,size:"small",children:[Object(j.jsx)(ot.a,{children:Object(j.jsxs)(lt.a,{children:[Object(j.jsx)(ct.a,{align:"center",width:"80%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Table Name"}),Object(j.jsx)(ct.a,{align:"center",width:"10%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Download"}),Object(j.jsx)(ct.a,{align:"center",width:"10%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Drop"})]})}),Object(j.jsx)(dt.a,{children:t.map((function(e){var n=u===e.list_name;return Object(j.jsxs)(lt.a,{hover:!0,selected:n,children:[Object(j.jsx)(ct.a,{align:"center",onClick:function(){h(n?"":e.list_name)},children:e.list_name}),Object(j.jsx)(ct.a,{align:"center",children:Object(j.jsx)(L.a,{size:"small",color:"info",onClick:function(){return function(e){try{Object(xe.a)(he.a.mark((function t(){var a,n,r;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,me.a.post(I+"/calculator/get-list-file",{file_name:e},{headers:{Accept:"*/*",Authorization:"Bearer ".concat(null===o||void 0===o?void 0:o.token)}});case 2:(a=t.sent).data.err?console.error(a.data.err):(n=window.URL.createObjectURL(new Blob([JSON.stringify(a.data,void 0,2)],{type:"application/json"})),(r=document.createElement("a")).href=n,r.setAttribute("download","".concat(e)),document.body.appendChild(r),r.click(),r.remove());case 4:case"end":return t.stop()}}),t)})))()}catch(t){console.error(t)}}(e.list_name)},children:Object(j.jsx)(Dt.a,{})})}),Object(j.jsx)(ct.a,{align:"center",children:Object(j.jsx)(re,{title:"Drop Data Table?",message:"Confirm drop Table?",confirmText:"DROP",action:function(){!function(e){try{Object(xe.a)(he.a.mark((function n(){var r,c;return he.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,me.a.delete(I+"/calculator/drop-list",{headers:{Accept:"*/*",Authorization:"Bearer ".concat(null===o||void 0===o?void 0:o.token)},data:{file_name:e}});case 2:(r=n.sent).data.msg&&(c=t.filter((function(t){return t.list_name!==e})),a(c),h(""),s(r.data.msg,"info")),r.data.err&&s(r.data.err,"error");case 5:case"end":return n.stop()}}),n)})))()}catch(n){console.error(n)}}(e.list_name)},children:Object(j.jsx)(L.a,{size:"small",color:"error",children:Object(j.jsx)(Ct.a,{})})})})]},e._id.$oid)}))})]})})})]})})})})},Pt=function(e){var t=e.dates,a=e.setDates,r=e.lists,c=e.setLists,s=e.hasChanged,o=e.setHasChanged,d=e.handleMessage,u=Object(n.useContext)(b).user,h=Object(n.useState)({_id:"",percent:""}),x=Object(i.a)(h,2),O=x[0],m=x[1],p=Object(n.useState)({_id:"",percent:""}),f=Object(i.a)(p,2),v=f[0],g=f[1],w=function(e){var t=e.target,a=t.name,n=t.value;g(Object(l.a)(Object(l.a)({},v),{},Object(Fe.a)({},a,n)))},C=function(){var e=t.map((function(e){return e._id!==O._id?e:{_id:v._id,percent:parseFloat(v.percent)}}));O._id!==v._id&&e.push(Object(l.a)(Object(l.a)({},O),{},{percent:-1})),a(e),m({_id:"",percent:""}),o(!0)};return Object(j.jsx)(y.a,{elevation:5,sx:{borderRadius:1},children:Object(j.jsxs)(Ce.a,{borderRadius:3,p:2,sx:{paddingBlockEnd:2,minHeight:"80vh"},children:[Object(j.jsx)(ve.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"top",alignContent:"flex-start",sx:{height:"65vh",overflow:"auto"},children:Object(j.jsxs)(it.a,{stickyHeader:!0,size:"small",children:[Object(j.jsx)(ot.a,{children:Object(j.jsxs)(lt.a,{children:[Object(j.jsx)(ct.a,{align:"center",width:"50%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Date (y/m/d)"}),Object(j.jsx)(ct.a,{align:"center",width:"30%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Percentage"}),Object(j.jsx)(ct.a,{align:"center",width:"10%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Edit"}),Object(j.jsx)(ct.a,{align:"center",width:"10%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Drop"})]})}),Object(j.jsx)(dt.a,{children:null===t||void 0===t?void 0:t.map((function(e){var n=O._id===v._id&&O.percent.toString()===v.percent.toString();return O._id===e._id?Object(j.jsxs)(lt.a,{hover:!0,selected:!0,children:[Object(j.jsx)(ct.a,{children:Object(j.jsx)(Ue.a,{size:"small",variant:"standard",inputProps:{style:{textAlign:"center"}},name:"_id",value:v._id,onChange:w})}),Object(j.jsx)(ct.a,{children:Object(j.jsx)(Ue.a,{size:"small",variant:"standard",inputProps:{style:{textAlign:"center"},min:0},type:"number",name:"percent",value:v.percent,onChange:w})}),Object(j.jsx)(ct.a,{align:"right",children:Object(j.jsx)(L.a,{size:"small",color:"success",disabled:n,onClick:C,children:Object(j.jsx)(gt.a,{})})}),Object(j.jsx)(ct.a,{align:"right",children:Object(j.jsx)(L.a,{size:"small",color:"info",onClick:function(){return m({_id:"",percent:""})},children:Object(j.jsx)(Ot.a,{})})})]},e._id):Object(j.jsxs)(lt.a,{hover:!0,children:[Object(j.jsx)(ct.a,{align:"center",children:e._id}),Object(j.jsx)(ct.a,{align:"center",children:e.percent}),Object(j.jsx)(ct.a,{align:"right",children:Object(j.jsx)(L.a,{size:"small",color:"warning",onClick:function(){g({_id:e._id,percent:e.percent}),m({_id:e._id,percent:e.percent})},children:Object(j.jsx)(wt.a,{})})}),Object(j.jsx)(ct.a,{align:"right",children:Object(j.jsx)(re,{title:"Delete Data?",message:"Confirm delete Data Percentage?",confirmText:"Delete",action:function(){return function(e){var n=t.filter((function(t){return t._id!==e}));a(n),o(!0)}(e._id)},children:Object(j.jsx)(L.a,{size:"small",color:"error",children:Object(j.jsx)(Ct.a,{})})})})]},e._id)}))})]})}),Object(j.jsxs)(ve.a,{container:!0,spacing:2,py:2,children:[Object(j.jsx)(ve.a,{item:!0,xs:6,md:9}),Object(j.jsx)(ve.a,{item:!0,xs:6,md:3,children:Object(j.jsx)(re,{title:"Update Table",message:"Confirm Update Table?",confirmText:"UPDATE",action:function(){try{Object(xe.a)(he.a.mark((function e(){var n,s,i;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.a.post(I+"/calculator/load-list",{dates:t},{headers:{Accept:"*/*",Authorization:"Bearer ".concat(null===u||void 0===u?void 0:u.token)}});case 2:(n=e.sent).data.msg&&((s=r).unshift({_id:{$oid:(new Date).getTime()},list_name:n.data.new_list}),c(s),i=t.filter((function(e){return-1!==e.percent})).sort((function(e,t){return e._id>t._id?-1:e._id<t._id?1:0})),a(i),d(n.data.msg,"success"),o(!1)),n.data.err&&d(n.data.err,"error");case 5:case"end":return e.stop()}}),e)})))()}catch(e){console.error(e)}},color:"warning",disabled:!s,children:Object(j.jsx)(ae.a,{fullWidth:!0,variant:"contained",color:"error",disabled:!s,children:"Update Table"})})})]})]})})},It=function(){var e=Object(n.useContext)(b).user,t=Object(n.useState)({msg:"",vnt:""}),a=Object(i.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),o=Object(i.a)(s,2),l=o[0],d=o[1],u=Object(n.useState)([]),h=Object(i.a)(u,2),x=h[0],O=h[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),f=p[0],v=p[1],g=Object(n.useState)(!1),w=Object(i.a)(g,2),C=w[0],y=w[1];Object(n.useEffect)((function(){var t=me.a.CancelToken.source();try{Object(xe.a)(he.a.mark((function a(){var n;return he.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,me.a.get(I+"/calculator/get-lists-data",{cancelToken:t.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(e.token)}});case 2:(n=a.sent).data.dates&&(O(n.data.dates),v(n.data.lists)),n.data.err&&console.error(n.data.err);case 5:case"end":return a.stop()}}),a)})))()}catch(a){console.error(a)}return function(){t.cancel()}}),[e]);var k=function(e,t){c({msg:e,vnt:t}),d(!0)};return Object(j.jsxs)(j.Fragment,{children:[(null===e||void 0===e?void 0:e.is_admin)?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(ve.a,{item:!0,xs:12,md:6,children:[Object(j.jsx)(Ft,{dates:x,setDates:O,setHasChanged:y,handleMessage:k}),Object(j.jsx)(Ut,{lists:f,setLists:v,setDates:O,setHasChanged:y,handleMessage:k})]}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(Pt,{dates:x,setDates:O,lists:f,setLists:v,hasChanged:C,setHasChanged:y,handleMessage:k})})]}):Object(j.jsx)(ve.a,{item:!0,children:Object(j.jsx)(G.a,{variant:"h3",color:"error",children:"\u26d4 This section is for admins only"})}),Object(j.jsx)(ge.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:l,autoHideDuration:3e3,onClose:function(){d(!1)},children:Object(j.jsx)(we.a,{variant:"filled",color:r.vnt,children:r.msg})})]})},Bt=function(){var e=Object(n.useContext)(b).user,t={id:"",is_system:!1,identifier:"",pattern:"",replacement:""},a=Object(n.useState)(!1),r=Object(i.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)({msg:"",vnt:""}),d=Object(i.a)(o,2),u=d[0],h=d[1],x=Object(n.useState)([]),O=Object(i.a)(x,2),m=O[0],p=O[1],f=Object(n.useState)([]),v=Object(i.a)(f,2),g=v[0],w=v[1],C=Object(n.useState)(t),k=Object(i.a)(C,2),_=k[0],S=k[1],A=Object(n.useState)(!1),T=Object(i.a)(A,2),z=T[0],E=T[1],F=function(e,t){h({msg:e,vnt:t}),s(!0)},D=function(e){var t=e.target,a=t.name,n=t.value,r=t.checked;S(Object(l.a)(Object(l.a)({},_),{},Object(Fe.a)({},a,"is_system"!==a?n:r)))},U=function(e){S(e),E(!0)},P=[function(e){e.answers.sys_regex&&p(e.answers.sys_regex),e.answers.own_regex&&w(e.answers.own_regex),e.msg&&F(e.msg,"success"),S(t),E(!1)},function(e){F(e.wrn,"warning")},function(e){F(e.err,"error")}];nt.apply(void 0,["/answers/get-expressions","answers"].concat(P));var I=at.apply(void 0,["post","/answers/create-expression","answers"].concat(P)),B=at.apply(void 0,["put","/answers/update-expression","answers"].concat(P)),R=at.apply(void 0,["delete","/answers/delete-expression","answers"].concat(P));return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(y.a,{elevation:7,children:Object(j.jsx)(Ce.a,{sx:{paddingBlockEnd:2,minHeight:"80vh"},border:2,p:2,borderRadius:1,borderColor:"info.main",children:Object(j.jsxs)(ve.a,{container:!0,spacing:1,align:"center",pr:2,children:[Object(j.jsx)(ve.a,{item:!0,xs:12,md:8,children:Object(j.jsx)(Ue.a,{size:"small",label:"Identifier",color:"warning",fullWidth:!0,name:"identifier",value:_.identifier,onChange:D})}),(null===e||void 0===e?void 0:e.is_admin)&&!z&&Object(j.jsx)(ve.a,{item:!0,xs:12,md:3,children:Object(j.jsx)(Ne.a,{control:Object(j.jsx)(Le.a,{name:"is_system",checked:_.is_system,onChange:D}),label:"System"})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:11,children:Object(j.jsx)(Ue.a,{size:"small",label:"Pattern",color:"warning",fullWidth:!0,name:"pattern",value:_.pattern,onChange:D})}),Object(j.jsx)(ve.a,{item:!0,xs:12,md:11,children:Object(j.jsx)(Ue.a,{label:"Replacement",color:"warning",fullWidth:!0,multiline:!0,rows:4,name:"replacement",value:_.replacement,onChange:D})}),Object(j.jsxs)(ve.a,{item:!0,xs:12,md:1,children:[Object(j.jsx)(re,{title:z?"Update Answer":"Create Answer",confirmText:z?"Update":"Create",message:z?"Confirm Update Answer?":"Confirm Create Answer?",action:z?function(){return B({expression:Object(l.a)(Object(l.a)({},_),{},{id:_._id.$oid})})}:function(){return I({expression:_})},color:z?"warning":"success",children:Object(j.jsx)(L.a,{color:z?"primary":"success",disabled:!Boolean(_.identifier),children:Object(j.jsx)(St.a,{})})}),Object(j.jsx)(re,{title:"Delete Answer",message:"Confirm Delete Answer?",confirmText:"Delete",action:function(){return R({expression:{id:_._id.$oid}})},children:Object(j.jsx)(L.a,{color:"error",disabled:!Boolean(_.identifier),children:Object(j.jsx)(Ct.a,{})})}),Object(j.jsx)(L.a,{color:"warning",disabled:!Boolean(_.identifier),onClick:function(){S(t),E(!1)},children:Object(j.jsx)(Ot.a,{})})]}),(null===e||void 0===e?void 0:e.is_admin)&&Object(j.jsxs)(ve.a,{item:!0,xs:12,md:6,children:[Object(j.jsx)(G.a,{variant:"h6",children:"System"}),Object(j.jsx)(ye.a,{spacing:1,p:1,sx:{paddingBlockEnd:2,height:"38vh",overflow:"auto"},children:m.map((function(e){return Object(j.jsx)(ae.a,{fullWidth:!0,variant:"contained",color:"error",onClick:function(){return U(e)},children:e.identifier},e._id.$oid)}))})]}),Object(j.jsxs)(ve.a,{item:!0,xs:12,md:6,children:[Object(j.jsx)(G.a,{variant:"h6",children:"Own"}),Object(j.jsx)(ye.a,{spacing:1,p:1,sx:{paddingBlockEnd:2,height:"38vh",overflow:"auto"},children:g.map((function(e){return Object(j.jsx)(ae.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){return U(e)},children:e.identifier},e._id.$oid)}))})]})]})})})}),Object(j.jsx)(ge.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:c,autoHideDuration:3e3,onClose:function(){s(!1)},children:Object(j.jsx)(we.a,{variant:"filled",color:u.vnt,sx:{whiteSpace:"pre-line"},children:u.msg})})]})},Rt=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),s=Object(i.a)(c,2),o=s[0],d=s[1],u=Object(n.useState)(""),h=Object(i.a)(u,2),O=h[0],p=h[1],f=Object(n.useContext)(b),v=f.user,g=f.setUser,w=Object(n.useContext)(x).setUserSettings,C=Object(m.h)(),y=Object(m.g)();Object(n.useEffect)((function(){v&&C("/login"===y.pathname?"/news":y.pathname,{replace:!0})}));var k=function(){var e=Object(xe.a)(he.a.mark((function e(t){var n,c;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n="/login"===y.pathname?"/news":y.pathname,e.prev=2,e.next=5,me.a.post(I+"/users/signin",{username:a,password:o});case 5:(c=e.sent).data.user?(g(Object(l.a)(Object(l.a)({},c.data.user),{},{username:a})),w(Object(l.a)({},c.data.settings))):(r(""),d(""),p(c.data.msg),setTimeout((function(){p("")}),2500)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:C(n,{replace:!0});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)(fe.a,{children:Object(j.jsxs)(ve.a,{container:!0,spacing:3,margin:0,children:[Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(G.a,{variant:"h3",color:"primary",children:"User Login"})}),Object(j.jsx)(ve.a,{item:!0,children:Object(j.jsx)(M.a,{in:Boolean(O),timeout:1e3,children:Object(j.jsx)(we.a,{severity:"warning",variant:"outlined",children:O})})}),Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(Ue.a,{id:"uName",label:"Username",value:a,onChange:function(e){r(e.target.value)}})}),Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(Ue.a,{id:"uPass",label:"Password",type:"password",value:o,onChange:function(e){d(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&k(e)}})}),Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(ae.a,{variant:"contained",color:"primary",onClick:k,children:"Login"})})]})})},Mt=["user","setUser"],Wt=function(e){var t=e.user,a=e.setUser,r=Object(B.a)(e,Mt),c=Object(n.useState)({username:"",email:"",password:"",new_password:"",confirm_new_password:"",first_name:"",last_name:"",is_admin:!1}),s=Object(i.a)(c,2),o=s[0],d=s[1];Object(n.useEffect)((function(){var e=me.a.CancelToken.source();return(null===t||void 0===t?void 0:t.token)&&Object(xe.a)(he.a.mark((function a(){var n;return he.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,me.a.get(I+"/users/get-user-data",{cancelToken:e.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:n=a.sent,d(Object(l.a)(Object(l.a)({},n.data),{},{password:"",new_password:"",confirm_new_password:""})),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))(),function(){e.cancel()}}),[t]);var b=function(e){var t=e.target,a=t.name,n=t.value,r=t.checked;d(Object(l.a)(Object(l.a)({},o),{},Object(Fe.a)({},a,"is_admin"!==a?n:r)))},u=Object(n.useState)(!0),h=Object(i.a)(u,2),x=h[0],O=h[1],m=function(e){var t=e.target,a=t.name,n=t.value;"new_password"===a?(d(Object(l.a)(Object(l.a)({},o),{},Object(Fe.a)({},a,n))),O(o.confirm_new_password===n)):(d(Object(l.a)(Object(l.a)({},o),{},Object(Fe.a)({},a,n))),O(o.new_password===n))},p=Object(n.useState)({msg:"",vnt:"info"}),f=Object(i.a)(p,2),v=f[0],g=f[1],w=function(){if(!x)return g({msg:"new password doesn't match",vnt:"error"}),void setTimeout((function(){g({msg:"",vnt:"error"})}),2500);Object(xe.a)(he.a.mark((function e(){var n,r;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.a.post(I+"/users/update-user",o,{headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:(n=e.sent).data.msg?(g({msg:n.data.msg,vnt:"success"}),r=Object(l.a)(Object(l.a)({},t),{},{username:o.username,first_name:o.first_name,last_name:o.last_name,is_admin:o.is_admin}),setTimeout((function(){g({msg:"",vnt:"success"})}),2500),n.data.wrn?(setTimeout((function(){g({msg:n.data.wrn,vnt:"warning"})}),2600),setTimeout((function(){g({msg:"",vnt:"warning"}),a(r)}),5100)):a(r)):(g({msg:n.data.err,vnt:"error"}),setTimeout((function(){g({msg:"",vnt:"error"})}),2500)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))(),setTimeout((function(){O(!0)}),500)};return Object(j.jsx)(n.Fragment,Object(l.a)(Object(l.a)({},r),{},{children:Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(y.a,{elevation:3,children:Object(j.jsxs)(ve.a,{container:!0,spacing:2,margin:0,px:{xs:0,md:3},children:[Object(j.jsx)(ve.a,{item:!0,children:Object(j.jsx)(G.a,{variant:"h6",color:"primary",children:"Update My User Account"})}),Object(j.jsx)(ve.a,{item:!0,xs:12,mx:1,children:Object(j.jsx)(G.a,{variant:"h6",color:"GrayText",children:o.email})}),Object(j.jsx)(ve.a,{item:!0,children:Object(j.jsx)(Ue.a,{size:"small",name:"username",label:"Username",value:o.username,onChange:b})}),t.is_admin&&Object(j.jsx)(ve.a,{item:!0,mb:0,children:Object(j.jsx)(Ne.a,{control:Object(j.jsx)(Le.a,{name:"is_admin",checked:o.is_admin,onChange:b}),label:"Is Admin"})}),Object(j.jsx)(ve.a,{item:!0,children:Object(j.jsx)(Ue.a,{size:"small",name:"first_name",label:"First Name",value:o.first_name,onChange:b})}),Object(j.jsx)(ve.a,{item:!0,children:Object(j.jsx)(Ue.a,{size:"small",name:"last_name",label:"Last Name",value:o.last_name,onChange:b})}),Object(j.jsxs)(ve.a,{item:!0,children:[Object(j.jsxs)(y.a,{elevation:1,sx:{background:"darkGray2",display:"inline-block"},children:[Object(j.jsx)(ve.a,{item:!0,pb:2,children:Object(j.jsx)(Ue.a,{size:"small",error:!x,name:"new_password",label:"New Password",type:"password",value:o.new_password,onChange:m})}),Object(j.jsx)(ve.a,{item:!0,children:Object(j.jsx)(Ue.a,{size:"small",error:!x,name:"confirm_new_password",label:"Confirm New Password",type:"password",value:o.confirm_new_password,onChange:m})})]}),Object(j.jsxs)(ve.a,{container:!0,columns:2,pt:2,children:[Object(j.jsx)(ve.a,{item:!0,pb:2,children:Object(j.jsx)(Ue.a,{size:"small",color:"warning",focused:!0,name:"password",label:"Password",type:"password",value:o.password,onChange:b,onKeyPress:function(e){"Enter"===e.key&&w()}})}),Object(j.jsx)(re,{title:"Update User",message:"Confirm user update?",confirmText:"UPDATE",color:"secondary",action:w,children:Object(j.jsx)(ve.a,{item:!0,px:2,pb:2,children:Object(j.jsx)(ae.a,{variant:"contained",color:"warning",children:"UPDATE"})})})]}),Object(j.jsx)(ve.a,{item:!0,pb:2,children:Object(j.jsx)(M.a,{in:Boolean(v.msg),timeout:1e3,children:Object(j.jsx)(we.a,{severity:v.vnt,variant:"outlined",children:v.msg})})})]})]})})})}))},Ht=function(e){var t=Object(n.useContext)(x),a=t.userSettings,r=t.setUserSettings,c=Object(n.useState)(a),s=Object(i.a)(c,2),o=s[0],d=s[1],b=Object(n.useState)({msg:"",vnt:""}),u=Object(i.a)(b,2),h=u[0],O=u[1],m=Object(n.useState)(!1),p=Object(i.a)(m,2),f=p[0],v=p[1],g=function(e,t){O({msg:e,vnt:t}),v(!0)},w=function(e){var t=e.target,a=t.name,n=t.value,r=t.checked;d(Object(l.a)(Object(l.a)({},o),{},Object(Fe.a)({},a,"calculator"!==a?n:r)))},C=at("put","/users/update-user-settings","settings",(function(e){r(e.settings),g(e.msg,"success")}),(function(e){g(e.wrn,"warning")}),(function(e){g(e.err,"error")}));return Object(j.jsxs)(n.Fragment,Object(l.a)(Object(l.a)({},e),{},{children:[Object(j.jsx)(ve.a,{item:!0,xs:12,mt:2,children:Object(j.jsx)(y.a,{elevation:3,children:Object(j.jsxs)(ve.a,{container:!0,spacing:2,margin:0,px:{xs:0,md:3},children:[Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(G.a,{variant:"h6",color:"primary",children:"User Settings"})}),Object(j.jsx)(ve.a,{item:!0,xs:11,children:Object(j.jsx)(Ie.a,{fullWidth:!0,children:Object(j.jsxs)(Be.a,{size:"small",name:"theme_mode",value:o.theme_mode,onChange:w,children:[Object(j.jsx)(W.a,{value:"dark",children:" DARK THEME "}),Object(j.jsx)(W.a,{value:"light",children:" LIGHT THEME"})]})})}),Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(Ne.a,{control:Object(j.jsx)(Le.a,{name:"calculator",checked:o.calculator,onChange:w}),label:"Basic Calculator for Default"})}),Object(j.jsx)(ve.a,{item:!0,xs:11,children:Object(j.jsx)(Ue.a,{fullWidth:!0,size:"small",label:"Posts Font Family",name:"postsFontFamily",value:o.postsFontFamily,onChange:w})}),Object(j.jsx)(ve.a,{item:!0,xs:12,px:2,pb:2,children:Object(j.jsx)(re,{title:"Save User Settings",confirmText:"UPDATE",message:"Confirm Save user settings?",color:"warning",action:function(){return C({settings:{theme_mode:o.theme_mode,calculator:o.calculator,postsFontFamily:o.postsFontFamily}})},children:Object(j.jsx)(ae.a,{variant:"contained",color:"warning",children:"CONFIGURE"})})})]})})}),Object(j.jsx)(ge.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:f,autoHideDuration:3e3,onClose:function(){v(!1)},children:Object(j.jsx)(we.a,{variant:"filled",color:h.vnt,children:h.msg})})]}))},Nt=a(308),Lt=a(291),$t=a(292),Gt=["user","setEdit","usersSate","setUsersState","initialOtherUser","setOtherUserData"],Vt=function(e){var t=e.user,a=e.setEdit,r=e.usersSate,c=e.setUsersState,s=e.initialOtherUser,o=e.setOtherUserData,d=Object(B.a)(e,Gt),b=Object(n.useState)([]),u=Object(i.a)(b,2),h=u[0],x=u[1];Object(n.useEffect)((function(){var e=me.a.CancelToken.source();return(null===t||void 0===t?void 0:t.token)&&Object(xe.a)(he.a.mark((function a(){var n;return he.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,me.a.get(I+"/users/get-users",{cancelToken:e.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:n=a.sent,x(n.data),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))(),function(){e.cancel()}}),[t,r]);return Object(j.jsx)(n.Fragment,Object(l.a)(Object(l.a)({},d),{},{children:Object(j.jsxs)(ve.a,{item:!0,xs:12,md:4,children:[Object(j.jsx)(y.a,{elevation:3,children:Object(j.jsxs)(ve.a,{container:!0,spacing:2,margin:0,px:{xs:0,md:3},children:[Object(j.jsx)(ve.a,{item:!0,children:Object(j.jsx)(G.a,{variant:"h6",color:"primary",children:"List of Active Users"})}),h.map((function(e){return Object(j.jsx)(Nt.a,{secondaryAction:Object(j.jsx)(re,{title:"Delete",message:"Confirm user Delete?",confirmText:"DELETE",action:function(){return n=e.email,Object(xe.a)(he.a.mark((function e(){var a;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.a.delete(I+"/users/delete-other-user",{headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)},data:{email:n}});case 3:(a=e.sent).data.msg?(c({msg:a.data.msg,vnt:"info"}),setTimeout((function(){c({msg:"",vnt:"info"})}),2500)):(c({msg:a.data.err,vnt:"error"}),setTimeout((function(){c({msg:"",vnt:"error"})}),2500)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))(),a(!1),void o(s);var n},children:Object(j.jsx)(L.a,{edge:"end",children:Object(j.jsx)(Ct.a,{fontSize:"large",color:"error"})})}),children:Object(j.jsx)(Lt.a,{onClick:function(){!function(e){o(Object(l.a)({},e)),a(!0)}(e)},children:Object(j.jsx)($t.a,{primary:["".concat(e.username," -"),e.first_name,e.last_name].join(" "),secondary:e.email})})},e.username)}))]})}),Object(j.jsx)(ve.a,{item:!0,pt:3,children:Object(j.jsx)(M.a,{in:Boolean(r.msg),timeout:1e3,children:Object(j.jsx)(we.a,{severity:r.vnt,variant:"outlined",children:r.msg})})})]})}))},Kt=["user","edit","setEdit","setUsersState","initialOtherUser","otherUserData","setOtherUserData"],Jt=function(e){var t=e.user,a=e.edit,r=e.setEdit,c=e.setUsersState,s=e.initialOtherUser,o=e.otherUserData,d=e.setOtherUserData,b=Object(B.a)(e,Kt),u=function(e){var t=e.target,a=t.name,n=t.value,r=t.checked;d(Object(l.a)(Object(l.a)({},o),{},Object(Fe.a)({},a,"is_admin"!==a?n:r)))},h=Object(n.useState)(!0),x=Object(i.a)(h,2),O=x[0],m=x[1],p=function(e){var t=e.target,a=t.name,n=t.value;"email"===a?(d(Object(l.a)(Object(l.a)({},o),{},Object(Fe.a)({},a,n))),m(o.confirm_email===n)):(d(Object(l.a)(Object(l.a)({},o),{},Object(Fe.a)({},a,n))),m(o.email===n))};return Object(j.jsx)(n.Fragment,Object(l.a)(Object(l.a)({},b),{},{children:Object(j.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(y.a,{elevation:3,children:Object(j.jsxs)(ve.a,{container:!0,spacing:2,margin:0,px:{xs:0,md:3},children:[Object(j.jsx)(ve.a,{item:!0,children:Object(j.jsx)(G.a,{variant:"h6",color:"primary",children:"Update/Create User Account"})}),a?Object(j.jsx)(ve.a,{item:!0,xs:12,mx:1,children:Object(j.jsx)(G.a,{variant:"h6",color:"GrayText",children:o.email})}):Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(ve.a,{item:!0,children:Object(j.jsxs)(y.a,{elevation:1,sx:{background:"darkGray2",display:"inline-block"},children:[Object(j.jsx)(ve.a,{item:!0,pb:2,children:Object(j.jsx)(Ue.a,{size:"small",error:!O,name:"email",label:"Email (ID - immutable)",value:o.email,onChange:p})}),Object(j.jsx)(ve.a,{item:!0,children:Object(j.jsx)(Ue.a,{size:"small",error:!O,name:"confirm_email",label:"Confirm Email",value:o.confirm_email,onChange:p})})]})})}),Object(j.jsx)(ve.a,{item:!0,children:Object(j.jsx)(Ue.a,{size:"small",name:"username",label:"Username",value:o.username,onChange:u})}),Object(j.jsx)(ve.a,{item:!0,mb:0,children:Object(j.jsx)(Ne.a,{control:Object(j.jsx)(Le.a,{name:"is_admin",checked:o.is_admin,onChange:u}),label:"Is Admin"})}),Object(j.jsx)(ve.a,{item:!0,children:Object(j.jsx)(Ue.a,{size:"small",name:"first_name",label:"Fisrs Name",value:o.first_name,onChange:u})}),Object(j.jsx)(ve.a,{item:!0,children:Object(j.jsx)(Ue.a,{size:"small",name:"last_name",label:"Last Name",value:o.last_name,onChange:u})}),Object(j.jsx)(ve.a,{item:!0,children:Object(j.jsx)(ve.a,{container:!0,columns:2,sx:{alignItems:"flex-end"},children:a?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(ve.a,{item:!0,pl:2,pb:2,children:Object(j.jsx)(ae.a,{variant:"contained",color:"error",onClick:function(){d(s),r(!1),m(!0)},children:"CANCEL"})}),Object(j.jsx)(re,{title:"Update Other User",message:"Confirm user update?",color:"secondary",confirmText:"UPDATE",action:function(){Object(xe.a)(he.a.mark((function e(){var a;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.a.post(I+"/users/update-other-user",{email:(n=o).email,username:n.username,first_name:n.first_name,last_name:n.last_name,is_admin:n.is_admin},{headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:(a=e.sent).data.msg?(c({msg:a.data.msg,vnt:"success"}),setTimeout((function(){c({msg:"",vnt:"success"})}),2500)):(c({msg:a.data.err,vnt:"error"}),setTimeout((function(){c({msg:"",vnt:"error"})}),2500)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}var n}),e,null,[[0,7]])})))(),d(s),r(!1)},children:Object(j.jsx)(ve.a,{item:!0,pl:2,pb:2,children:Object(j.jsx)(ae.a,{variant:"contained",color:"warning",children:"UPDATE"})})})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(ve.a,{item:!0,pb:2,children:Object(j.jsx)(y.a,{elevation:1,sx:{maxWidth:"230px",background:"darkGray2",display:"inline-block"},children:Object(j.jsx)(ve.a,{item:!0,p:2,children:Object(j.jsx)(G.a,{variant:"body1",color:"warning.main",children:'By default the password will be "abc123" the user must change it later'})})})}),Object(j.jsx)(ve.a,{item:!0,px:2,pb:2,children:Object(j.jsx)(ae.a,{variant:"contained",color:"success",onClick:function(){for(var e=0,a=Object.entries(o);e<a.length;e++){var n=Object(i.a)(a[e],2),r=n[0];if(""===n[1])return c({msg:"Missing Value ".concat(r),vnt:"error"}),void setTimeout((function(){c({msg:"",vnt:"error"})}),2500)}if(!O)return c({msg:"Email doesn't match",vnt:"error"}),void setTimeout((function(){c({msg:"",vnt:"error"})}),2500);Object(xe.a)(he.a.mark((function e(){var a;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.a.post(I+"/users/signup",o,{headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:(a=e.sent).data.msg?(c({msg:a.data.msg,vnt:"success"}),d(s),setTimeout((function(){c({msg:"",vnt:"success"})}),2500)):(c({msg:a.data.err,vnt:"error"}),setTimeout((function(){c({msg:"",vnt:"error"})}),2500)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))(),setTimeout((function(){m(!0)}),500)},children:"CREATE"})})]})})})]})})})}))},Yt=function(){var e=Object(n.useContext)(b),t=e.user,a=e.setUser,r={username:"",email:"",confirm_email:"",first_name:"",last_name:"",is_admin:!1},c=Object(n.useState)(!1),s=Object(i.a)(c,2),o=s[0],l=s[1],d=Object(n.useState)(r),u=Object(i.a)(d,2),h=u[0],x=u[1],O=Object(n.useState)({msg:"",vnt:"success"}),m=Object(i.a)(O,2),p=m[0],f=m[1];return Object(j.jsxs)(fe.a,{maxWidth:"xl",children:[Object(j.jsx)(ve.a,{item:!0,xs:12,children:Object(j.jsx)(G.a,{variant:"h3",color:"secondary",children:"User Account"})}),Object(j.jsxs)(ve.a,{container:!0,spacing:2,children:[Object(j.jsxs)(ve.a,{item:!0,xs:12,md:4,children:[Object(j.jsx)(Wt,{user:t,setUser:a}),Object(j.jsx)(Ht,{})]}),t.is_admin&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Vt,{user:t,setEdit:l,usersSate:p,setUsersState:f,initialOtherUser:r,setOtherUserData:x}),Object(j.jsx)(Jt,{user:t,edit:o,setEdit:l,setUsersState:f,initialOtherUser:r,otherUserData:h,setOtherUserData:x})]})]})]})},Xt=function(){var e=Object(n.useContext)(b),t=e.user,a=e.setUser,r=Object(n.useContext)(u),c=r.auth,s=r.setAuth,i=Object(n.useContext)(x).userSettings,o=Object(n.useMemo)((function(){return"light"!==i.theme_mode?Object(p.a)({palette:{mode:"dark",primary:v.a,secondary:g.a,info:w.a}}):Object(p.a)({palette:{mode:i.theme_mode,primary:v.a,secondary:g.a,info:w.a,background:{paper:"#eaeaea",default:"#fafafa"}}})}),[i.theme_mode]);return Object(n.useEffect)((function(){(null===t||void 0===t?void 0:t.token)&&s(!0)}),[t,s]),Object(j.jsx)(f.a,{theme:o,children:Object(j.jsx)(C.a,{enableColorScheme:!0,children:Object(j.jsxs)(y.a,{sx:{paddingBlockEnd:2,minHeight:"100vh"},square:!0,children:[Object(j.jsx)(be,{}),c?Object(j.jsx)(pe,{setAuth:s,user:t,setUser:a,children:Object(j.jsxs)(m.e,{children:[Object(j.jsx)(m.c,{path:"/",element:Object(j.jsx)(m.a,{to:U[0]})}),Object(j.jsx)(m.c,{path:U[0],element:Object(j.jsx)(He,{})}),Object(j.jsx)(m.c,{path:U[1],element:Object(j.jsx)(tt,{})}),Object(j.jsx)(m.c,{path:U[2],element:Object(j.jsx)(pt,{})}),Object(j.jsxs)(m.c,{path:U[3],element:Object(j.jsx)(ft,{}),children:[Object(j.jsx)(m.c,{path:P[0],element:Object(j.jsx)(Tt,{})}),Object(j.jsx)(m.c,{path:P[1],element:Object(j.jsx)(It,{})}),Object(j.jsx)(m.c,{path:P[2],element:Object(j.jsx)(Bt,{})})]}),Object(j.jsx)(m.c,{path:"login",element:Object(j.jsx)(Rt,{})}),Object(j.jsx)(m.c,{path:"account",element:Object(j.jsx)(Yt,{})})]})}):Object(j.jsx)(Rt,{})]})})})};c.a.render(Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(s.a,{children:Object(j.jsx)(O,{children:Object(j.jsx)(Xt,{})})})}),document.getElementById("root"))}},[[202,1,2]]]);
//# sourceMappingURL=main.c8060cc4.chunk.js.map