(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{202:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(61),c=a.n(r),s=a(43),i=a(7),o=function(){var e=Object(n.useState)(function(){var e=localStorage.getItem("user");return JSON.parse(e)}()),t=Object(i.a)(e,2),a=t[0],r=t[1];return[a,function(e){localStorage.setItem("user",JSON.stringify(e)),r(e)}]},l=function(){var e={theme_mode:"dark",calculator:!0},t=Object(n.useState)(function(){var t=localStorage.getItem("settings");return JSON.parse(t)||e}()),a=Object(i.a)(t,2),r=a[0],c=a[1];return[r,function(e){localStorage.setItem("settings",JSON.stringify(e)),c(e)}]},d=a(0),j=Object(n.createContext)({user:"",setUser:function(){}}),b=Object(n.createContext)({auth:"",setAuth:function(){}}),u=Object(n.createContext)({fetchedPosts:[],setFetchedPosts:function(){}}),h=Object(n.createContext)({userSettings:"",setUserSettings:function(){}}),x=function(e){var t=e.children,a=o(),r=Object(i.a)(a,2),c=r[0],s=r[1],x=Object(n.useMemo)((function(){return{user:c,setUser:s}}),[c,s]),O=Object(n.useState)(!1),m=Object(i.a)(O,2),p=m[0],f=m[1],v=Object(n.useMemo)((function(){return{auth:p,setAuth:f}}),[p,f]),g=Object(n.useState)([]),w=Object(i.a)(g,2),C=w[0],y=w[1],k=Object(n.useMemo)((function(){return{fetchedPosts:C,setFetchedPosts:y}}),[C,y]),_=l(),S=Object(i.a)(_,2),A=S[0],T=S[1],z=Object(n.useMemo)((function(){return{userSettings:A,setUserSettings:T}}),[A,T]);return Object(d.jsx)(j.Provider,{value:x,children:Object(d.jsx)(b.Provider,{value:v,children:Object(d.jsx)(u.Provider,{value:k,children:Object(d.jsx)(h.Provider,{value:z,children:t})})})})},O=a(21),m=a(147),p=a(316),f=a(293),v=a(294),g=a(295),w=a(296),C=a(318),y=a(325),k=a(326),_=a(299),S=a(317),A=a(307),T=a(269),z=a(270),E=a(271),D=a(272),U=["/news","/calculators","/answers","/settings"],P=["answers","calculator","expressions"],F="https://audiocenter-in.herokuapp.com//api-v1",I=a(11),B=a(29),R=a(148),M=a(258),W=a(319),H=["value","items","setTabValue","icon","label","disabled"],N=function(e){var t=e.value,a=e.items,r=e.setTabValue,c=e.icon,s=e.label,o=e.disabled,l=Object(B.a)(e,H),j=Object(O.h)(),b=Object(n.useState)(null),u=Object(i.a)(b,2),h=u[0],x=u[1],m=Boolean(h);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(S.a,Object(I.a)(Object(I.a)({label:s},l),{},{icon:c,iconPosition:"start",id:"id_menu","aria-controls":"aria_menu",onClick:function(e){x(e.currentTarget)},"aria-haspopup":"true","aria-expanded":m?"true":void 0,disabled:o})),Object(d.jsx)(R.a,{id:"aria_menu",anchorEl:h,open:m,onClose:function(){x(null)},TransitionComponent:M.a,children:a.map((function(e){return Object(d.jsx)(W.a,{onClick:function(){var a;a=e.sub_route,x(null),j("".concat(t,"/").concat(a)),r(t)},children:e.label},e.label)}))})]})},L=a(324),$=a(311),G=a(93),V=a(265),K=a(266),J=a(264),Y=a(267),X=a(268),q=a(320),Q=a(263),Z=a(321),ee=a(322),te=a(323),ae=a(310),ne=["title","message","confirmText","color","disabled","action","children"],re=function(e){var t=e.title,a=void 0===t?"add <title> prop":t,r=e.message,c=void 0===r?"add <message> prop":r,s=e.confirmText,o=void 0===s?"add <confirmText> prop":s,l=e.color,j=void 0===l?"error":l,b=e.disabled,u=void 0!==b&&b,h=e.action,x=e.children,O=Object(B.a)(e,ne),m=Object(n.useState)(!1),p=Object(i.a)(m,2),f=p[0],v=p[1],g=function(){v(!1)},w=u?{}:{onClick:function(){v(!0)}};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",Object(I.a)(Object(I.a)({},w),{},{children:x})),Object(d.jsxs)(q.a,Object(I.a)(Object(I.a)({},O),{},{open:f,onClose:g,"aria-labelledby":"title","aria-describedby":"description",children:[Object(d.jsx)(Q.a,{id:"title",children:a}),Object(d.jsx)(Z.a,{children:Object(d.jsx)(ee.a,{id:"description",children:c})}),Object(d.jsxs)(te.a,{children:[Object(d.jsx)(ae.a,{onClick:g,children:"Cancel "}),Object(d.jsxs)(ae.a,{onClick:function(e){v(!1);try{h(e)}catch(t){console.error("add <action> prop, or: ".concat(t))}},color:j,autoFocus:!0,children:[o," "]})]})]}))]})},ce=["setTabValue","disabled"],se=function(e,t){return e&&t?[e.first_name[0],e.last_name[0]].join("").toUpperCase():Object(d.jsx)(J.a,{})},ie=function(e){var t=Object(n.useContext)(j),a=t.user,r=t.setUser,c=Object(n.useContext)(b),s=c.auth,o=c.setAuth,l=e.setTabValue,u=e.disabled,h=Object(B.a)(e,ce),x=Object(O.g)(),m=Object(O.h)(),p="account"===x.pathname.split("/")[1]?"secondary.main":"primary.main";u&&(p="default");var f=Object(n.useState)(null),v=Object(i.a)(f,2),g=v[0],w=v[1],C=Boolean(g);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(L.a,Object(I.a)(Object(I.a)({variant:"outlined"},h),{},{id:"id_menu","aria-controls":"aria_menu",onClick:function(e){w(e.currentTarget)},"aria-haspopup":"true","aria-expanded":C?"true":void 0,color:"secondary",disabled:u,children:Object(d.jsx)($.a,{sx:{bgcolor:p},children:se(a,s)})})),Object(d.jsxs)(R.a,{id:"aria_menu",anchorEl:g,open:C,onClose:function(){w(null)},TransitionComponent:M.a,children:[Object(d.jsx)(G.a,{variant:"overline",color:"secondary",marginX:2,mb:1,children:[null===a||void 0===a?void 0:a.first_name,null===a||void 0===a?void 0:a.last_name].join(" ")}),Object(d.jsx)(G.a,{variant:"subtitle1",color:"GrayText",marginX:2,mb:1,children:null===a||void 0===a?void 0:a.email}),Object(d.jsx)(V.a,{}),Object(d.jsxs)(W.a,{onClick:function(){w(null),l(!1),m("/account")},children:[Object(d.jsx)(K.a,{children:Object(d.jsx)(Y.a,{})}),"Options"]}),Object(d.jsx)(re,{title:"LOGOUT",message:"Confirm logout?",confirmText:"Logout",action:function(){w(null),r(null),o(!1),localStorage.removeItem("user"),localStorage.removeItem("settings")},children:Object(d.jsxs)(W.a,{children:[Object(d.jsx)(K.a,{children:Object(d.jsx)(X.a,{})}),"Logout"]})})]})]})},oe=a(274),le=a(273),de=["setTabValue","disabled","user"],je=function(e){var t=e.setTabValue,a=e.disabled,r=e.user,c=Object(B.a)(e,de),s=[{label:"DIVIDER",icon:T.a,key:0},{label:"News",route:U[0]},{label:"DIVIDER",icon:z.a,key:1},{label:"Calculators",route:"".concat(U[1])},{label:"DIVIDER",icon:E.a,key:2},{label:"Answers",route:U[2]},{label:"DIVIDER",icon:D.a,key:3},{label:"Answers Settings",route:"".concat(U[3],"/").concat(P[0])}];(null===r||void 0===r?void 0:r.is_admin)&&s.push({label:"Calculator Settings",route:"".concat(U[3],"/").concat(P[1])}),s.push({label:"Expressions Settings",route:"".concat(U[3],"/").concat(P[2])});var o=Object(O.h)(),l=Object(n.useState)(null),j=Object(i.a)(l,2),b=j[0],u=j[1],h=Boolean(b);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(L.a,Object(I.a)(Object(I.a)({"aria-label":"Go to...",onClick:function(e){u(e.currentTarget)}},c),{},{sx:{display:{xs:"inline-flex",sm:"none"}},disabled:a,children:Object(d.jsx)(le.a,{})})),Object(d.jsx)(R.a,{id:"aria_menu",anchorEl:b,open:h,onClose:function(){u(null)},TransitionComponent:M.a,children:s.map((function(e){return"DIVIDER"===e.label?Object(d.jsx)(V.a,{textAlign:"right",children:Object(d.jsx)(e.icon,{})},e.key):Object(d.jsxs)(W.a,{onClick:function(){var a;a=e.route,u(null),o(a),t("/".concat(a.split("/")[1]))},children:[Object(d.jsx)(K.a,{children:Object(d.jsx)(oe.a,{})}),e.label]},e.label)}))})]})},be=function(){var e,t=Object(n.useContext)(b).auth,a=Object(n.useContext)(j).user,r=Object(n.useContext)(u).fetchedPosts,c=!Boolean(t),o=Object(O.g)();switch("/".concat(o.pathname.split("/")[1])){case U[0]:e=U[0];break;case U[1]:e=U[1];break;case U[2]:e=U[2];break;case U[3]:e=U[3];break;default:e=!1}var l=Object(n.useState)(e),h=Object(i.a)(l,2),x=h[0],m=h[1],p=Object(n.useState)(0),f=Object(i.a)(p,2),v=f[0],g=f[1],w=Object(n.useMemo)((function(){var e=r.length;return x===U[0]&&g(e),e-v}),[r.length,v,x]),C=[{label:"Answers Settings",sub_route:P[0]}];return(null===a||void 0===a?void 0:a.is_admin)&&C.push({label:"Calculator Settings",sub_route:P[1]}),C.push({label:"Expressions Settings",sub_route:P[2]}),Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(y.a,{position:"sticky",color:"default",children:Object(d.jsxs)(k.a,{sx:{justifyContent:"space-between"},children:[Object(d.jsx)(je,{setTabValue:m,disabled:c,user:a}),Object(d.jsxs)(_.a,{sx:{visibility:{xs:"hidden",sm:"visible"}},indicatorColor:"primary",onChange:function(e,t){switch(t){case U[0]:case U[1]:case U[2]:m(t)}},value:x,children:[Object(d.jsx)(S.a,{value:U[0],label:"News",icon:Object(d.jsx)(A.a,{color:"error",badgeContent:w,anchorOrigin:{vertical:"top",horizontal:"left"},children:Object(d.jsx)(T.a,{})}),iconPosition:"start",component:s.b,to:U[0],disabled:c}),Object(d.jsx)(S.a,{value:U[1],label:"Calculators",icon:Object(d.jsx)(z.a,{}),iconPosition:"start",component:s.b,to:U[1],disabled:c}),Object(d.jsx)(S.a,{value:U[2],label:"Answers",icon:Object(d.jsx)(E.a,{}),iconPosition:"start",component:s.b,to:U[2],disabled:c}),Object(d.jsx)(N,{value:U[3],label:"Settings",icon:Object(d.jsx)(D.a,{}),setTabValue:m,items:C,disabled:c})]}),Object(d.jsx)(ie,{setTabValue:m,disabled:c})]})})})},ue=a(15),he=a.n(ue),xe=a(22),Oe=a(20),me=a.n(Oe),pe=function(e){var t=e.children,a=e.setAuth,r=e.user,c=e.setUser,s=Object(n.useContext)(u).setFetchedPosts,o=Object(n.useState)(null),l=Object(i.a)(o,2),d=l[0],j=l[1],b=Object(O.h)();return Object(n.useEffect)((function(){var e=me.a.CancelToken.source(),t=function(){var t=Object(xe.a)(he.a.mark((function t(){var n,i,o;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,me.a.post(F+"/news/fetch-posts",{last_post:d},{cancelToken:e.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(null===r||void 0===r?void 0:r.token)}});case 3:(n=t.sent).data.newest_post?(j(n.data.newest_post),s(n.data.posts)):n.data.wrn?console.warn(n.data.wrn):n.data.err&&(a(!1),console.error(n.data.err)),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),422!==(o=null===(i=t.t0.response)||void 0===i?void 0:i.status)&&401!==o||(b("/login"),c(null),a(!1),localStorage.removeItem("user"));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();r&&t();var n=setInterval((function(){(null===r||void 0===r?void 0:r.token)&&t()}),3e3);return function(){clearInterval(n),e.cancel("Leaving News page or the data is already loaded")}}),[r,c,a,b,d,s]),Object(n.useEffect)((function(){var e=me.a.CancelToken.source(),t=setInterval((function(){(null===r||void 0===r?void 0:r.token)&&Object(xe.a)(he.a.mark((function t(){var a;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,me.a.get(F+"/users/refresh-auth",{cancelToken:e.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(r.token)}});case 3:(a=t.sent).data.user&&c(a.data.user),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}),36e5);return function(){clearInterval(t),e.cancel("Abort refresh token")}}),[r,c]),t},fe=a(332),ve=a(312),ge=a(305),we=a(301),Ce=a(327),ye=a(275),ke=a(313),_e=a(328),Se=a(276),Ae=a(297),Te=a(146),ze=function(e,t){var a,n=((e-t)/864e5).toFixed();switch(n){case"0":a="Today";break;case"1":a="Yesterday";break;default:a="".concat(n," days ago")}return a},Ee=function(e){var t=e.filter,a=t.severity,r=t.owner,c=e.handleMessage,s=Object(n.useContext)(u).fetchedPosts,o=Object(n.useContext)(j).user,l=Object(n.useState)(""),b=Object(i.a)(l,2),h=b[0],x=b[1],O=Object(n.useMemo)((function(){if(s.length>0){var e;switch(a){case"Reminder":e="rem";break;case"Normal":e="nor";break;case"Urgent":e="urg";break;default:e=null}var t="from All"===r?null:null===o||void 0===o?void 0:o.email,n=s.filter((function(a){return(!e||a.severity===e)&&(!t||a.owner._id===t)})),c=[],i=(new Date).getTime(),l=i;return n.length>0?n.forEach((function(e){var t=ze(i,e._id.$date);l!==t&&(c.push({divider:t}),l=t),c.push(e)})):c.push({divider:"There are no posts with those conditions"}),c}}),[s,a,r,o]),m=function(){x("")};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(ve.a,{item:!0,xs:12,md:7,children:Object(d.jsx)(Ce.a,{border:2,p:2,borderRadius:1,borderColor:"primary.main",sx:{height:"80vh"},children:Object(d.jsx)(ye.a,{spacing:1,pr:1,sx:{paddingBlockEnd:2,height:"75vh",overflow:"auto"},children:null===O||void 0===O?void 0:O.map((function(e){var t;if(e.divider&&(t=Object(d.jsx)(ve.a,{item:!0,children:Object(d.jsx)(V.a,{children:Object(d.jsx)(ke.a,{color:"primary",label:e.divider})})},e.divider)),e._id){var a;switch(e.severity){case"rem":a={icon:Object(d.jsx)(Se.a,{}),severity:"success"};break;case"nor":a={severity:"warning"};break;case"urg":a={severity:"error"};break;default:a={}}((null===o||void 0===o?void 0:o.is_admin)||e.owner._id===(null===o||void 0===o?void 0:o.email))&&(a=Object(I.a)(Object(I.a)({},a),{},{onClose:function(){x(e._id)}})),t=Object(d.jsx)(ve.a,{item:!0,children:Object(d.jsxs)(we.a,Object(I.a)(Object(I.a)({variant:"filled"},a),{},{style:{fontFamily:"Helvetica",fontSize:"1em"},children:[Object(d.jsx)(_e.a,{children:Object(d.jsxs)(G.a,{variant:"h5",children:[e.owner.username," - ",e.title]})}),Object(d.jsx)(Ae.a,{children:e.content,remarkPlugins:[Te.a]})]}))},e._id.$date)}return t}))})})}),Object(d.jsxs)(q.a,{open:Boolean(h),onClose:m,"aria-labelledby":"title","aria-describedby":"description",children:[Object(d.jsx)(Q.a,{id:"title",children:"Delete"}),Object(d.jsx)(Z.a,{children:Object(d.jsx)(ee.a,{id:"description",children:"Confirm delete post?"})}),Object(d.jsxs)(te.a,{children:[Object(d.jsx)(ae.a,{onClick:m,children:"Cancel "}),Object(d.jsx)(ae.a,{onClick:function(){return e=h,Object(xe.a)(he.a.mark((function t(){var a;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,me.a.delete(F+"/news/delete-post",{headers:{Accept:"*/*",Authorization:"Bearer ".concat(null===o||void 0===o?void 0:o.token)},data:e});case 2:(a=t.sent).data.msg&&c(a.data.msg,"info"),a.data.wrn&&c(a.data.wrn,"warning"),a.data.err&&c(a.data.err,"error");case 6:case"end":return t.stop()}}),t)})))(),void x("");var e},color:"error",autoFocus:!0,children:"DELETE "})]})]})]})},De=a(3),Ue=a(277),Pe=a(300),Fe=a(278),Ie=a(329),Be=a(303),Re=["options","option","setOption"],Me=function(e){var t=e.options,a=e.option,n=e.setOption,r=Object(B.a)(e,Re);return Object(d.jsx)(Ie.a,Object(I.a)(Object(I.a)({fullWidth:!0},r),{},{children:Object(d.jsx)(Be.a,{size:"small",value:a,onChange:function(e){n(e.target.value)},children:t.map((function(e){return Object(d.jsx)(W.a,{value:e,children:e},e)}))})}))},We=function(e){var t,a=e.filter,r=a.severity,c=a.setSeverity,s=a.owner,o=a.setOwner,l=e.handleMessage,b=Object(n.useContext)(j).user,u=Object(n.useState)({title:"",content:"",days_offset:""}),h=Object(i.a)(u,2),x=h[0],O=h[1],m=Object(n.useState)("Normal"),p=Object(i.a)(m,2),f=p[0],v=p[1],g=Object(n.useState)("to Me"),w=Object(i.a)(g,2),y=w[0],k=w[1],_=function(e){var t=e.target,a=t.name,n=t.value;O(Object(I.a)(Object(I.a)({},x),{},Object(De.a)({},a,n)))},S=function(){switch(f){case"Reminder":return"rem";default:case"Normal":return"nor";case"Urgent":return"urg"}},A=function(){switch(y){default:case"to Me":return!1;case"to All":return!0}},T={rows:Object(Ue.a)((function(e){return e.breakpoints.down("md")}))?8:12};switch(f){case"Reminder":t={color:"success"};break;case"Normal":t={color:"warning"};break;case"Urgent":t={color:"error"};break;default:t={}}return Object(d.jsx)(ve.a,{item:!0,xs:12,md:5,children:Object(d.jsx)(C.a,{elevation:3,children:Object(d.jsx)(Ce.a,{sx:{paddingBlockEnd:2,height:"80vh"},border:2,p:2,borderRadius:1,borderColor:"secondary.main",children:Object(d.jsxs)(ve.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"center",sx:{height:"75vh",overflow:"auto"},children:[Object(d.jsx)(ve.a,{item:!0,xs:6,children:Object(d.jsx)(Me,{options:["All","Urgent","Normal","Reminder"],option:r,setOption:c})}),Object(d.jsx)(ve.a,{item:!0,xs:6,children:Object(d.jsx)(Me,{options:["from All","Mine only"],option:s,setOption:o})}),Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(V.a,{children:Object(d.jsx)(G.a,{color:"secondary",children:"CREATE NEW POST"})})}),Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(Pe.a,{fullWidth:!0,size:"small",label:"Title",name:"title",value:x.title,onChange:_})}),Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(Pe.a,Object(I.a)(Object(I.a)({fullWidth:!0},T),{},{multiline:!0,size:"small",label:"Content",name:"content",value:x.content,onChange:_}))}),Object(d.jsx)(ve.a,{item:!0,xs:7,md:3,children:Object(d.jsx)(Me,{options:["Urgent","Normal","Reminder"],option:f,setOption:v})}),Object(d.jsx)(ve.a,{item:!0,xs:5,md:3,children:Object(d.jsx)(Me,{options:["to Me","to All"],option:y,setOption:k})}),Object(d.jsx)(ve.a,{item:!0,xs:7,md:3,children:Object(d.jsx)(Pe.a,{fullWidth:!0,label:"within days",size:"small",name:"days_offset",type:"number",inputProps:{min:"0",max:"7",step:"1"},value:x.days_offset,onChange:_})}),Object(d.jsx)(ve.a,{item:!0,xs:5,md:3,children:Object(d.jsx)(ae.a,Object(I.a)(Object(I.a)({variant:"contained",fullWidth:!0,size:"small",onClick:function(){if(x.title)if(x.content){var e=parseInt(x.days_offset||0);0>e||7<e?l('"within days" must be between 0 and 7',"error"):Object(xe.a)(he.a.mark((function t(){var a;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,me.a.post(F+"/news/create-post",{title:x.title,content:x.content,severity:S(),days_offset:e,is_public:A()},{headers:{Accept:"*/*",Authorization:"Bearer ".concat(b.token)}});case 3:(a=t.sent).data.msg&&(l(a.data.msg,"success"),O({title:"",content:"",days_offset:""}),v("Normal"),k("to Me")),a.data.err&&l(a.data.err,"error"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}else l("You must provide a Content","error");else l("You must provide a Title","error")}},t),{},{endIcon:Object(d.jsx)(Fe.a,{}),children:Object(d.jsx)(G.a,{variant:"h6",children:"Send"})}))})]})})})})},He=function(){var e=Object(n.useState)("All"),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)("from All"),s=Object(i.a)(c,2),o=s[0],l=s[1],j=Object(n.useState)({msg:"",vnt:""}),b=Object(i.a)(j,2),u=b[0],h=b[1],x=Object(n.useState)(!1),O=Object(i.a)(x,2),m=O[0],p=O[1],f={severity:a,setSeverity:r,owner:o,setOwner:l},v=function(e,t){h({msg:e,vnt:t}),p(!0)};return Object(d.jsxs)(fe.a,{maxWidth:"xl",children:[Object(d.jsxs)(ve.a,{container:!0,spacing:1,margin:0,pt:3,children:[Object(d.jsx)(We,{filter:f,handleMessage:v}),Object(d.jsx)(Ee,{filter:{severity:a,owner:o},handleMessage:v})]}),Object(d.jsx)(ge.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:m,autoHideDuration:3e3,onClose:function(){p(!1)},children:Object(d.jsx)(we.a,{variant:"filled",color:u.vnt,children:u.msg})})]})},Ne=a(333),Le=a(335),$e=a(17),Ge=a(315),Ve=a(302),Ke=a(334),Je=a(279),Ye=a(280),Xe=a(281),qe=function(e){var t=e.handleMessage,a=e.history,r=e.setHistory,c=Object(n.useContext)(j).user,s=Object(n.useState)({first:"",second:"",third:""}),o=Object(i.a)(s,2),l=o[0],b=o[1],u=Object(n.useState)("pri"),h=Object(i.a)(u,2),x=h[0],O=h[1],m=Object(n.useState)("add"),p=Object(i.a)(m,2),f=p[0],v=p[1],g=Object(n.useState)(""),w=Object(i.a)(g,2),y=w[0],k=w[1],_=function(e){var t=e.target,a=t.name,n=t.value;b(Object(I.a)(Object(I.a)({},l),{},Object(De.a)({},a,n)))},S=function(e,n,s){for(var o=0,d=Object.entries(n);o<d.length;o++){var j=Object(i.a)(d[o],2),u=j[0];if(!j[1])return void t("The ".concat(u," field is required"),"error")}n=Object(I.a)(Object(I.a)({},n),{},{sign:x,operation:f}),Object(xe.a)(he.a.mark((function i(){var o;return he.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,me.a.post(F+e,n,{headers:{Accept:"*/*",Authorization:"Bearer ".concat(c.token)}});case 3:void 0!==(o=i.sent).data.result&&(t("$".concat(o.data.result),"success"),r([{_id:{$date:(new Date).getTime()},calculation:o.data.calculation,footnote:o.data.footnote}].concat(Object($e.a)(a))),b(Object(I.a)(Object(I.a)({},l),{},Object(De.a)({},s,o.data.result))),n.expression||k(o.data.result)),o.data.err&&t(o.data.err,"error"),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(0),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[0,8]])})))()},A=function(){var e={second:l.second,third:l.third};S("/calculator/get-first-term",e,"first")},T=function(){var e={first:l.first,third:l.third};S("/calculator/get-second-term",e,"second")},E=function(){var e={first:l.first,second:l.second};S("/calculator/get-result",e,"third")},D=function(){S("/calculator/resolve-expression",{expression:y})},U=function(){""===l.first&&""!==l.second&&""!==l.third?A():""!==l.first&&""===l.second&&""!==l.third?T():""!==l.first&&""!==l.second&&""===l.third?E():""!==l.first&&""!==l.second&&""!==l.third?t("impossible to know which operation to perform!","warning"):t("You must provide 2 fields at least!","warning")};return Object(d.jsx)(ve.a,{item:!0,xs:12,md:7,children:Object(d.jsx)(C.a,{elevation:5,sx:{borderRadius:3},children:Object(d.jsx)(Ce.a,{sx:{paddingBlockEnd:2,minHeight:"65vh"},p:2,children:Object(d.jsxs)(ve.a,{container:!0,spacing:3,align:"center",pr:2,sx:{minHeight:"60vh",overflow:"auto"},children:[Object(d.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(d.jsx)(Ie.a,{sx:{width:"100%"},component:"fieldset",children:Object(d.jsx)(Ge.a,{name:"sign",value:x,onChange:function(e){var t=e.target.value;O(t),b(Object(I.a)(Object(I.a)({},l),{},{first:"",third:""}))},children:Object(d.jsx)(C.a,{children:Object(d.jsxs)(ve.a,{item:!0,px:3,children:[Object(d.jsx)(Ne.a,{value:"pri",control:Object(d.jsx)(Ve.a,{}),label:Object(d.jsx)(G.a,{variant:"h5",color:"primary",children:"$"})}),Object(d.jsx)(Ne.a,{value:"per",control:Object(d.jsx)(Ve.a,{color:"secondary"}),label:Object(d.jsx)(G.a,{variant:"h5",color:"secondary",children:"%"})})]})})})})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(d.jsx)(Ie.a,{sx:{width:"100%"},component:"fieldset",children:Object(d.jsx)(Ge.a,{name:"operation",value:f,onChange:function(e){var t=e.target.value;v(t),b(Object(I.a)(Object(I.a)({},l),{},{second:""}))},children:Object(d.jsx)(C.a,{children:Object(d.jsxs)(ve.a,{px:3,children:[Object(d.jsx)(Ne.a,{value:"add",control:Object(d.jsx)(Ve.a,{}),label:Object(d.jsx)(G.a,{variant:"h4",color:"primary",children:"+"})}),Object(d.jsx)(Ne.a,{value:"sub",control:Object(d.jsx)(Ve.a,{color:"secondary"}),label:Object(d.jsx)(G.a,{variant:"h4",color:"secondary",children:"-"})})]})})})})}),Object(d.jsx)(ve.a,{item:!0,xs:4,children:Object(d.jsx)(G.a,{variant:"h5",color:"initial",sx:{display:{xs:"none",md:"flex"}},children:"complete calculator"})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(d.jsx)(Pe.a,{fullWidth:!0,size:"small",type:"number",label:"pri"===x?"Price":"Percentage",InputProps:{inputProps:{min:"0",step:"10"},startAdornment:Object(d.jsx)(Ke.a,{position:"start",children:Object(d.jsx)(G.a,{variant:"h5",color:"pri"===x?"primary":"secondary",children:"pri"===x?"$":""})}),endAdornment:Object(d.jsx)(Ke.a,{position:"start",children:Object(d.jsx)(G.a,{variant:"h5",color:"secondary",children:"pri"===x?"":"%"})})},name:"first",value:l.first,onChange:_,onKeyPress:function(e){"Enter"===e.key&&U()}})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(d.jsx)(Pe.a,{fullWidth:!0,label:"day/month/year | Percentage",size:"small",InputProps:{startAdornment:Object(d.jsx)(Ke.a,{position:"start",children:Object(d.jsx)(G.a,{variant:"h4",color:"add"===f?"primary":"secondary",children:"add"===f?"+":"-"})}),endAdornment:Object(d.jsx)(Ke.a,{position:"start",children:Object(d.jsx)(G.a,{variant:"h5",color:"inherit",children:"%"})})},name:"second",value:l.second,onChange:_,onKeyPress:function(e){"Enter"===e.key&&U()}})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(d.jsx)(Pe.a,{fullWidth:!0,label:"Result",type:"number",size:"small",InputProps:{inputProps:{min:"0",step:"10"},startAdornment:Object(d.jsx)(Ke.a,{position:"start",children:Object(d.jsx)(G.a,{variant:"h5",color:"inherit",children:"pri"===x?"= $":"="})}),endAdornment:Object(d.jsx)(Ke.a,{position:"start",children:Object(d.jsx)(G.a,{variant:"h5",color:"inherit",children:"pri"===x?"":"%"})})},name:"third",value:l.third,onChange:_,onKeyPress:function(e){"Enter"===e.key&&U()}})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(d.jsx)(ae.a,{fullWidth:!0,onClick:A,size:"large",sx:{minHeight:"100%"},variant:"contained",color:"success",endIcon:Object(d.jsx)(Je.a,{}),children:Object(d.jsx)(G.a,{variant:"body1",children:"GET"})})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(d.jsx)(ae.a,{fullWidth:!0,onClick:T,size:"large",sx:{minHeight:"100%"},variant:"contained",color:"success",endIcon:Object(d.jsx)(Ye.a,{}),children:Object(d.jsx)(G.a,{variant:"body1",children:"GET"})})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(d.jsx)(ae.a,{fullWidth:!0,onClick:E,size:"large",sx:{minHeight:"100%"},variant:"contained",color:"success",endIcon:Object(d.jsx)(Xe.a,{}),children:Object(d.jsx)(G.a,{variant:"body1",children:"GET"})})}),Object(d.jsx)(ve.a,{item:!0,xs:12,py:2,children:Object(d.jsx)(V.a,{})}),Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(Pe.a,{fullWidth:!0,label:"Evaluate Expression",size:"small",name:"expression",InputProps:{style:{fontFamily:"monospace",fontSize:20},startAdornment:Object(d.jsx)(Ke.a,{position:"start",children:Object(d.jsx)(G.a,{variant:"h4",color:"primary",children:">>>"})})},InputLabelProps:{style:{fontFamily:"monospace",fontSize:20}},value:y,onChange:function(e){var t=e.target.value;k(t)},onKeyPress:function(e){"Enter"===e.key&&D()}})}),Object(d.jsx)(ve.a,{item:!0,xs:4}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(d.jsx)(ae.a,{fullWidth:!0,onClick:function(){b({first:"",second:"",third:""}),k("")},size:"large",sx:{minHeight:"100%"},variant:"contained",color:"error",endIcon:Object(d.jsx)(z.a,{}),children:Object(d.jsx)(G.a,{variant:"body1",children:"Clear"})})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(d.jsx)(ae.a,{fullWidth:!0,onClick:D,size:"large",sx:{minHeight:"100%"},variant:"contained",color:"primary",endIcon:Object(d.jsx)(z.a,{}),children:Object(d.jsx)(G.a,{variant:"body1",children:"Evaluate"})})})]})})})})},Qe=function(e){var t=e.handleMessage,a=e.history,r=e.setHistory,c=Object(n.useContext)(j).user,s=Object(n.useState)({price:"",str_date:""}),o=Object(i.a)(s,2),l=o[0],b=o[1],u=function(e){var t=e.target,a=t.name,n=t.value;b(Object(I.a)(Object(I.a)({},l),{},Object(De.a)({},a,n)))},h=function(){for(var e=0,n=Object.entries(l);e<n.length;e++){var s=Object(i.a)(n[e],2),o=s[0];if(!s[1])return void t("The ".concat(o," field is required"),"error")}Object(xe.a)(he.a.mark((function e(){var n;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.a.post(F+"/calculator/price-add-percent",Object(I.a)(Object(I.a)({},l),{},{str_date:l.str_date.split("-").reverse().join("/")}),{headers:{Accept:"*/*",Authorization:"Bearer ".concat(c.token)}});case 3:void 0!==(n=e.sent).data.result&&(t("$".concat(n.data.result),"success"),r([{_id:{$date:(new Date).getTime()},calculation:n.data.calculation,footnote:n.data.footnote}].concat(Object($e.a)(a)))),n.data.err&&t(n.data.err,"error"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()};return Object(d.jsx)(ve.a,{item:!0,xs:12,md:7,children:Object(d.jsx)(C.a,{elevation:5,sx:{borderRadius:3},children:Object(d.jsx)(Ce.a,{sx:{paddingBlockEnd:2,minHeight:"30vh"},p:2,children:Object(d.jsxs)(ve.a,{container:!0,spacing:3,align:"center",pr:2,sx:{minHeight:"25vh",overflow:"auto"},children:[Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(G.a,{variant:"h5",color:"initial",children:"basic calculator"})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(d.jsx)(Pe.a,{fullWidth:!0,label:"Price",type:"number",name:"price",InputProps:{inputProps:{min:"0",step:"10"},startAdornment:Object(d.jsx)(Ke.a,{position:"start",children:Object(d.jsx)(G.a,{variant:"h5",color:"primary",children:"$"})})},value:l.price,onChange:u,onKeyPress:function(e){"Enter"===e.key&&h()}})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(d.jsx)(Pe.a,{fullWidth:!0,label:"Date",type:"date",InputProps:{startAdornment:Object(d.jsx)(Ke.a,{position:"start",children:Object(d.jsx)(G.a,{variant:"body1",color:"primary",children:"from"})})},name:"str_date",value:l.str_date,onChange:u,onKeyPress:function(e){"Enter"===e.key&&h()}})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(d.jsx)(ae.a,{fullWidth:!0,onClick:h,size:"large",sx:{minHeight:"75%"},variant:"contained",color:"success",endIcon:Object(d.jsx)(z.a,{}),children:Object(d.jsx)(G.a,{variant:"body1",children:"GET PRICE"})})})]})})})})},Ze=a(298),et=function(e){var t=e.history,a=Object(n.useMemo)((function(){var e=[],a=(new Date).getTime(),n=a;return t.length>0?t.forEach((function(t){var r=ze(a,t._id.$date);n!==r&&(e.push({divider:r}),n=r),e.push(t)})):e.push({divider:"There are no previous calculations"}),e}),[t]);return Object(d.jsx)(ve.a,{item:!0,xs:12,md:5,children:Object(d.jsx)(Ce.a,{sx:{paddingBlockEnd:2,height:"75vh",backgroundColor:"info.main"},borderRadius:3,p:2,children:Object(d.jsxs)(ve.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"top",alignContent:"flex-start",sx:{height:"70vh",overflow:"auto"},children:[Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(G.a,{variant:"h5",color:"initial",children:"Result / History"})}),a.map((function(e,t){var a,n;(e.divider&&(a=Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(V.a,{children:Object(d.jsx)(ke.a,{color:"warning",size:"small",label:e.divider})})},e.divider)),e._id)&&(1!==t&&(n={color:"info.light"}),a=Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(C.a,{elevation:7,children:Object(d.jsx)(Ze.a,{title:e.footnote,placement:"right",disableInteractive:!0,arrow:!0,followCursor:!0,children:Object(d.jsx)(G.a,Object(I.a)(Object(I.a)({variant:"h6"},n),{},{sx:{whiteSpace:"pre-line"},children:e.calculation}))})})},e._id.$date));return a}))]})})})},tt=function(){var e=Object(n.useContext)(j).user,t=Object(n.useContext)(h).userSettings,a=Object(n.useState)({msg:"",vnt:""}),r=Object(i.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)([]),l=Object(i.a)(o,2),b=l[0],u=l[1],x=Object(n.useState)(!1),O=Object(i.a)(x,2),m=O[0],p=O[1],f=Object(n.useState)(Boolean(null===t||void 0===t?void 0:t.calculator)),v=Object(i.a)(f,2),g=v[0],w=v[1];Object(n.useEffect)((function(){var t=me.a.CancelToken.source();return Object(xe.a)(he.a.mark((function a(){var n;return he.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,me.a.get(F+"/calculator/get-history",{cancelToken:t.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(e.token)}});case 2:(n=a.sent).data.hist&&u(n.data.hist),n.data.msg,n.data.err&&console.error(n.data.err);case 6:case"end":return a.stop()}}),a)})))(),function(){t.cancel()}}),[e,u]);var C=function(e,t){s({msg:e,vnt:t}),p(!0)};return Object(d.jsxs)(fe.a,{maxWidth:"xl",children:[Object(d.jsxs)(ve.a,{container:!0,spacing:1,margin:0,pt:3,children:[Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(Ne.a,{labelPlacement:"start",label:Object(d.jsx)(G.a,{px:1,children:"Calculator"}),control:Object(d.jsx)(Ne.a,{control:Object(d.jsx)(Le.a,{checked:g,onChange:function(e){var t=e.target.checked;w(t)}}),label:"Basic"})})}),g?Object(d.jsx)(Qe,{history:b,setHistory:u,handleMessage:C}):Object(d.jsx)(qe,{history:b,setHistory:u,handleMessage:C}),Object(d.jsx)(et,{history:b,setHistory:u})]}),Object(d.jsx)(ge.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:m,autoHideDuration:3e3,onClose:function(){p(!1)},children:Object(d.jsx)(we.a,{variant:"filled",color:c.vnt,children:c.msg})})]})},at=function(e,t,a,r,c,s){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(e){console.error(e)},o=Object(n.useContext)(j),l=o.user,d={Accept:"*/*",Authorization:"Bearer ".concat(null===l||void 0===l?void 0:l.token)};return function(){var n=Object(xe.a)(he.a.mark((function n(o){var l;return he.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,n.t0=e,n.next="post"===n.t0?8:"put"===n.t0?12:"delete"===n.t0?16:4;break;case 4:return n.next=6,me.a.get(F+t,{headers:d});case 6:return l=n.sent,n.abrupt("break",20);case 8:return n.next=10,me.a.post(F+t,o,{headers:d});case 10:return l=n.sent,n.abrupt("break",20);case 12:return n.next=14,me.a.put(F+t,o,{headers:d});case 14:return l=n.sent,n.abrupt("break",20);case 16:return n.next=18,me.a.delete(F+t,{headers:d,data:o});case 18:return l=n.sent,n.abrupt("break",20);case 20:l.data[a]&&r(l.data),l.data.wrn&&c(l.data),l.data.err&&s(l.data),n.next=28;break;case 25:n.prev=25,n.t1=n.catch(0),i(n.t1);case 28:case"end":return n.stop()}}),n,null,[[0,25]])})));return function(e){return n.apply(this,arguments)}}()},nt=function(e,t,a,r,c){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(e){console.error(e)},i=Object(n.useContext)(j),o=i.user;Object(n.useEffect)((function(){var n={Accept:"*/*",Authorization:"Bearer ".concat(null===o||void 0===o?void 0:o.token)},i=me.a.CancelToken.source();return Object(xe.a)(he.a.mark((function o(){var l;return he.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,me.a.get(F+e,{cancelToken:i.token,headers:n});case 3:(l=o.sent).data[t]&&a(l.data),l.data.wrn&&r(l.data),l.data.err&&c(l.data),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(0),s(o.t0);case 12:case"end":return o.stop()}}),o,null,[[0,9]])})))(),function(){i.cancel("useAxios: canceled")}}),[o])},rt=a(55),ct=a(336),st=a(337),it=a(338),ot=a(339),lt=a(340),dt=a(341),jt=a(282),bt=function(e,t,a){var n=e;return void 0!==t&&t.forEach((function(e){var t=e.pattern,a=e.replacement;n=n.replace(RegExp(t,"ig"),a)})),n.replace(/{([\w\s]+)}/g,(function(e,t){return"undefined"===typeof a[t]?e:a[t]}))},ut=["children","sx"],ht=function(e){var t=e.children,a=e.sx,n=Object(B.a)(e,ut);return Object(d.jsx)(ct.a,Object(I.a)(Object(I.a)({align:"center",sx:Object(I.a)({borderColor:"#FFFFFF"},a)},n),{},{children:t}))},xt=function(e){var t=e.payMeths,a=e.sysRegex,r=e.handleMessage,c=Object(n.useState)(""),s=Object(i.a)(c,2),o=s[0],l=s[1],j=Object(n.useMemo)((function(){var e,a="",n=[],r=Object(rt.a)(t);try{for(r.s();!(e=r.n()).done;){var c=e.value;c.card_name!==a&&(a=c.card_name,n.push({id:a,header:a}));var s=0|(parseFloat(o)*(1+c.increase/100)).toFixed(),i=(s/c.installments).toFixed();n.push({id:c._id.$oid,card_name:c.card_name,installments:c.installments,total:s,monthly:i,increase:c.increase,pos_code:c.pos_code,description:c.description})}}catch(l){r.e(l)}finally{r.f()}return n}),[t,o]);return Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(Ce.a,{sx:{paddingBlockEnd:2,height:"80vh"},border:2,p:2,borderRadius:1,borderColor:"primary.main",children:Object(d.jsxs)(ve.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"center",children:[Object(d.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(d.jsx)(G.a,{variant:"h6",color:"primary.main",children:"Credit Cards Payments"})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(d.jsx)(Pe.a,{label:"Price",size:"small",inputProps:{min:0,step:10},InputProps:{startAdornment:Object(d.jsx)(Ke.a,{position:"start",children:Object(d.jsx)(G.a,{variant:"h6",color:"primary",children:"$"})})},type:"number",value:o,onChange:function(e){l(e.target.value)}})}),Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsxs)(C.a,{elevation:3,sx:{borderRadius:"15px 15px 0px 0px"},children:[Object(d.jsx)(C.a,{elevation:3,sx:{borderRadius:"15px 15px 0px 0px",backgroundColor:"warning.dark",height:40},children:Object(d.jsx)(G.a,{variant:"body1",color:"initial",p:1,children:"Card Name"})}),Object(d.jsx)(st.a,{sx:{height:{xs:"57vh",md:"60vh"}},children:Object(d.jsxs)(it.a,{stickyHeader:!0,size:"small",children:[Object(d.jsx)(ot.a,{children:Object(d.jsxs)(lt.a,{children:[Object(d.jsx)(ht,{width:"20%",children:"Installments"}),Object(d.jsx)(ht,{width:"20%",sx:{backgroundColor:"error.dark"},children:"Total"}),Object(d.jsx)(ht,{width:"20%",sx:{backgroundColor:"success.dark"},children:"Monthly"}),Object(d.jsx)(ht,{width:"20%",children:"Increase"}),Object(d.jsx)(ht,{width:"20%",children:"PosCode"}),Object(d.jsx)(ht,{width:"20%",children:"Copy"})]})}),Object(d.jsx)(dt.a,{children:j.map((function(e){return e.header?Object(d.jsx)(lt.a,{children:Object(d.jsx)(ht,{width:"100%",colSpan:6,sx:{borderRadius:"20px 20px 0px 0px",backgroundColor:"warning.dark"},children:e.header})},e.header):Object(d.jsx)(Ze.a,{title:e.description,disableInteractive:!0,placement:"right",arrow:!0,followCursor:!0,children:Object(d.jsxs)(lt.a,{hover:!0,children:[Object(d.jsx)(ht,{children:e.installments}),Object(d.jsxs)(ht,{sx:{backgroundColor:"error.dark"},children:["$",e.total]}),Object(d.jsxs)(ht,{sx:{backgroundColor:"success.dark"},children:["$",e.monthly]}),Object(d.jsxs)(ht,{children:[e.increase,"%"]}),Object(d.jsxs)(ht,{children:["*",e.pos_code,"*"]}),Object(d.jsx)(ht,{children:Object(d.jsx)(L.a,{size:"small",color:"primary",onClick:function(){return function(e){Object(xe.a)(he.a.mark((function t(){return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:navigator.clipboard.writeText(bt("".concat(e.installments," ").concat(e.monthly),a));case 1:case"end":return t.stop()}}),t)})))(),r("Text Copied to Clipboard","success")}(e)},children:Object(d.jsx)(jt.a,{fontSize:"small"})})})]})},e.id)}))})]})})]})})]})})})},Ot=a(283),mt=function(e){var t=e.commonAnswers,a=e.ownAnswers,r=e.sysRegex,c=e.ownRegex,s=e.handleMessage,o=Object(n.useState)(""),l=Object(i.a)(o,2),j=l[0],b=l[1],u=Object(n.useMemo)((function(){if(t.length>0&&a.length>0)return[].concat(Object($e.a)(t),Object($e.a)(a)).map((function(e){var t=e.label,a=e.content;return Object(De.a)({},t,a)})).reduce((function(e,t){return Object(I.a)(Object(I.a)({},e),t)}))}),[t,a]),h=function(e){b(e)};return Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(Ce.a,{sx:{paddingBlockEnd:2,minHeight:"80vh"},border:2,p:2,borderRadius:1,borderColor:"primary.main",children:Object(d.jsxs)(ve.a,{container:!0,spacing:1,align:"center",pr:2,children:[Object(d.jsx)(ve.a,{item:!0,xs:12,md:11,children:Object(d.jsx)(Pe.a,{label:"Content",focused:!0,color:"warning",fullWidth:!0,multiline:!0,rows:4,InputProps:{readOnly:!0},value:j})}),Object(d.jsxs)(ve.a,{item:!0,xs:12,md:1,children:[Object(d.jsx)(Ze.a,{title:"Copy Formated Text",placement:"left",children:Object(d.jsx)(L.a,{color:"primary",onClick:function(){Object(xe.a)(he.a.mark((function e(){return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.clipboard.writeText(bt(j,[].concat(Object($e.a)(r),Object($e.a)(c)),u));case 1:case"end":return e.stop()}}),e)})))(),s("Formatted Text Copied to Clipboard","success")},children:Object(d.jsx)(jt.a,{})})}),Object(d.jsx)(Ze.a,{title:"Copy Raw Text",placement:"left",children:Object(d.jsx)(L.a,{color:"info",onClick:function(){Object(xe.a)(he.a.mark((function e(){return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.clipboard.writeText(j);case 1:case"end":return e.stop()}}),e)})))(),s("Raw Text Copied to Clipboard","success")},children:Object(d.jsx)(jt.a,{})})}),Object(d.jsx)(Ze.a,{title:"Unselect Answer",placement:"left",children:Object(d.jsx)(L.a,{color:"warning",onClick:function(){return b("")},children:Object(d.jsx)(Ot.a,{})})})]}),Object(d.jsxs)(ve.a,{item:!0,xs:12,md:6,children:[Object(d.jsx)(G.a,{variant:"h6",children:"Commons"}),Object(d.jsx)(ye.a,{spacing:1,p:1,sx:{paddingBlockEnd:2,height:"50vh",overflow:"auto"},children:t.map((function(e){return Object(d.jsx)(ae.a,{fullWidth:!0,variant:"contained",sx:{color:"#FFFFFF",background:e.color,"&:hover":{background:e.color,filter:"brightness(90%)"}},onClick:function(){return h(e.content)},children:e.label},e._id.$oid)}))})]}),Object(d.jsxs)(ve.a,{item:!0,xs:12,md:6,children:[Object(d.jsx)(G.a,{variant:"h6",children:"Own"}),Object(d.jsx)(ye.a,{spacing:1,p:1,sx:{paddingBlockEnd:2,height:"50vh",overflow:"auto"},children:a.map((function(e){return Object(d.jsx)(ae.a,{fullWidth:!0,variant:"contained",sx:{color:"#FFFFFF",background:e.color,"&:hover":{background:e.color,filter:"brightness(90%)"}},onClick:function(){return h(e.content)},children:e.label},e._id.$oid)}))})]})]})})})},pt=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)({msg:"",vnt:""}),s=Object(i.a)(c,2),o=s[0],l=s[1],j=Object(n.useState)([]),b=Object(i.a)(j,2),u=b[0],h=b[1],x=Object(n.useState)([]),O=Object(i.a)(x,2),m=O[0],p=O[1],f=Object(n.useState)([]),v=Object(i.a)(f,2),g=v[0],w=v[1],C=Object(n.useState)([]),y=Object(i.a)(C,2),k=y[0],_=y[1],S=Object(n.useState)([]),A=Object(i.a)(S,2),T=A[0],z=A[1];nt("/answers/get-all","answers",(function(e){e.answers.payment_methods&&h(e.answers.payment_methods),e.answers.common_answers&&p(e.answers.common_answers),e.answers.own_answers&&w(e.answers.own_answers),e.answers.sys_regex&&_(e.answers.sys_regex),e.answers.own_regex&&z(e.answers.own_regex)}),(function(e){E(e.wrn,"warning")}),(function(e){E(e.err,"error")}));var E=function(e,t){l({msg:e,vnt:t}),r(!0)};return Object(d.jsxs)(fe.a,{maxWidth:"xl",children:[Object(d.jsxs)(ve.a,{container:!0,spacing:1,margin:0,pt:3,children:[Object(d.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(d.jsx)(xt,{payMeths:u,sysRegex:k,handleMessage:E})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(d.jsx)(mt,{commonAnswers:m,ownAnswers:g,sysRegex:k,ownRegex:T,handleMessage:E})})]}),Object(d.jsx)(ge.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:a,autoHideDuration:3e3,onClose:function(){r(!1)},children:Object(d.jsx)(we.a,{variant:"filled",color:o.vnt,sx:{whiteSpace:"pre-line"},children:o.msg})})]})},ft=function(){return Object(d.jsx)(fe.a,{maxWidth:"xl",children:Object(d.jsx)(ve.a,{container:!0,spacing:1,margin:0,pt:3,children:Object(d.jsx)(O.b,{})})})},vt=a(284),gt=a(285),wt=a(286),Ct=a(287),yt=["children","sx"],kt=function(e){var t=e.children,a=e.sx,n=Object(B.a)(e,yt);return Object(d.jsx)(ct.a,Object(I.a)(Object(I.a)({align:"center",sx:Object(I.a)({borderColor:"#FFFFFF"},a)},n),{},{children:t}))},_t=function(e){var t=e.payMeths,a=e.setPayMeths,r=e.handleMessage,c=Object(n.useMemo)((function(){var e,a="",n=[],r=Object(rt.a)(t);try{for(r.s();!(e=r.n()).done;){var c=e.value;c.card_name!==a&&(a=c.card_name,n.push({id:a,header:a})),n.push({id:c._id.$oid,card_name:c.card_name,installments:c.installments,increase:c.increase,pos_code:c.pos_code,description:c.description})}}catch(s){r.e(s)}finally{r.f()}return n}),[t]),s={id:"",card_name:"",installments:"",increase:"",pos_code:"",description:""},o=Object(n.useState)(""),l=Object(i.a)(o,2),j=l[0],b=l[1],u=Object(n.useState)(s),h=Object(i.a)(u,2),x=h[0],O=h[1],m=Object(n.useState)(s),p=Object(i.a)(m,2),f=p[0],v=p[1],g=function(e){var t=e.target,a=t.name,n=t.value;v(Object(I.a)(Object(I.a)({},f),{},Object(De.a)({},a,n)))},w=at("post","/answers/create-payment-method","payment_methods",(function(e){a(e.payment_methods),r(e.msg,"success"),b(""),O(s)}),(function(e){r(e.wrn,"warning")}),(function(e){r(e.err,"error")})),y=at("post","/answers/create-payment-method","payment_methods",(function(e){a(e.payment_methods),r(e.msg,"success"),b(""),O(s)}),(function(e){r(e.wrn,"warning")}),(function(e){r(e.err,"error")})),k=at("put","/answers/update-credit-card","payment_methods",(function(e){a(e.payment_methods),r(e.msg,"success"),b(""),O(s)}),(function(e){r(e.wrn,"warning")}),(function(e){r(e.err,"error")})),_=at("put","/answers/update-method","payment_methods",(function(e){a(e.payment_methods),r(e.msg,"success"),b(""),O(s)}),(function(e){r(e.wrn,"warning")}),(function(e){r(e.err,"error")})),S=at("delete","/answers/delete-credit-card","payment_methods",(function(e){a(e.payment_methods),r(e.msg,"success"),b(""),O(s)}),(function(e){r(e.wrn,"warning")}),(function(e){r(e.err,"error")})),A=at("delete","/answers/delete-method","payment_methods",(function(e){a(e.payment_methods),r(e.msg,"success"),b(""),O(s)}),(function(e){r(e.wrn,"warning")}),(function(e){r(e.err,"error")}));return Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(C.a,{elevation:3,children:Object(d.jsx)(Ce.a,{sx:{paddingBlockEnd:2,height:"80vh"},border:2,p:2,borderRadius:1,borderColor:"secondary.main",children:Object(d.jsxs)(ve.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"center",children:[Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(G.a,{variant:"body1",color:"secondary.main",children:"Edit Credit Cards Payments Methods"})}),Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsxs)(C.a,{elevation:3,sx:{borderRadius:"15px 15px 0px 0px"},children:[Object(d.jsx)(C.a,{elevation:3,sx:{borderRadius:"15px 15px 0px 0px",backgroundColor:"warning.main",height:40},children:Object(d.jsx)(G.a,{variant:"body1",color:"initial",p:1,children:"Card Name"})}),Object(d.jsx)(st.a,{sx:{height:"60vh"},children:Object(d.jsxs)(it.a,{stickyHeader:!0,size:"small",children:[Object(d.jsx)(ot.a,{children:Object(d.jsxs)(lt.a,{children:[Object(d.jsx)(kt,{width:"25%",children:"Installments"}),Object(d.jsx)(kt,{width:"25%",children:"Description"}),Object(d.jsx)(kt,{width:"25%",children:"Increase"}),Object(d.jsx)(kt,{width:"25%",children:"Code"}),Object(d.jsx)(kt,{width:"5%",children:"Upg"}),Object(d.jsx)(kt,{width:"5%",children:"Drop"}),Object(d.jsx)(kt,{width:"5%",children:"Add"})]})}),Object(d.jsxs)(dt.a,{children:[Object(d.jsxs)(lt.a,{children:[Object(d.jsx)(kt,{width:"90%",colSpan:6,sx:{borderRadius:"50px 0px 0px 50px",backgroundColor:"success.dark"},children:Object(d.jsx)(Pe.a,{fullWidth:!0,label:"Card Name",size:"small",variant:"standard",value:j,color:"secondary",inputProps:{style:{textAlign:"center"}},onChange:function(e){b(e.target.value)}})}),Object(d.jsx)(kt,{sx:{borderRadius:"0px 50px 50px 0px",backgroundColor:"success.dark"},children:Object(d.jsx)(L.a,{size:"small",color:"secondary",disabled:!Boolean(j),onClick:function(){return w({method:{card_name:j,installments:0,increase:0,pos_code:0,description:"FIXME"}})},children:Object(d.jsx)(vt.a,{fontSize:"small"})})})]}),c.map((function(e){return x.id===e.id?e.header?Object(d.jsxs)(lt.a,{children:[Object(d.jsx)(kt,{width:"90%",colSpan:4,sx:{borderRadius:"50px 0px 0px 0px",backgroundColor:"warning.main"},children:Object(d.jsx)(Pe.a,{label:"Card Name",size:"small",variant:"standard",value:f.header,name:"header",onChange:g})}),Object(d.jsx)(kt,{sx:{backgroundColor:"warning.main"},children:Object(d.jsx)(re,{title:"Update",confirmText:"Update",message:"Confirm Update Payment Method?",color:"warning",action:function(){return k({name:e.id,new_name:f.header})},children:Object(d.jsx)(L.a,{size:"small",color:"error",children:Object(d.jsx)(gt.a,{fontSize:"small"})})})}),Object(d.jsx)(kt,{sx:{backgroundColor:"warning.main"},children:Object(d.jsx)(L.a,{size:"small",color:"info",onClick:function(){return O(s)},children:Object(d.jsx)(Ot.a,{fontSize:"small"})})}),Object(d.jsx)(kt,{sx:{borderRadius:"0px 50px 50px 0px",backgroundColor:"warning.main"},children:Object(d.jsx)(L.a,{size:"small",color:"info",onClick:function(){return y({method:{card_name:e.header,installments:0,increase:0,pos_code:0,description:"FIXME"}})},children:Object(d.jsx)(vt.a,{fontSize:"small"})})})]},e.header):Object(d.jsxs)(lt.a,{hover:!0,children:[Object(d.jsx)(kt,{children:Object(d.jsx)(Pe.a,{label:"Installments",size:"small",variant:"standard",name:"installments",value:f.installments,onChange:g})}),Object(d.jsx)(kt,{children:Object(d.jsx)(Pe.a,{label:"Description",size:"small",variant:"standard",name:"description",value:f.description,onChange:g})}),Object(d.jsx)(kt,{children:Object(d.jsx)(Pe.a,{label:"Increase",size:"small",variant:"standard",name:"increase",value:f.increase,onChange:g})}),Object(d.jsx)(kt,{children:Object(d.jsx)(Pe.a,{label:"Pos-Code",size:"small",variant:"standard",name:"pos_code",value:f.pos_code,onChange:g})}),Object(d.jsx)(kt,{children:Object(d.jsx)(re,{title:"Update",confirmText:"Update",message:"Confirm Update Payment Method?",color:"success",action:function(){return _({method:Object(I.a)({},f)})},children:Object(d.jsx)(L.a,{size:"small",color:"success",children:Object(d.jsx)(gt.a,{fontSize:"small"})})})}),Object(d.jsx)(kt,{children:Object(d.jsx)(L.a,{size:"small",color:"info",onClick:function(){return O(s)},children:Object(d.jsx)(Ot.a,{fontSize:"small"})})})]},e.id):e.header?Object(d.jsxs)(lt.a,{children:[Object(d.jsx)(kt,{width:"90%",colSpan:4,sx:{borderRadius:"50px 0px 0px 0px",backgroundColor:"warning.main"},children:e.header}),Object(d.jsx)(kt,{sx:{backgroundColor:"warning.main"},children:Object(d.jsx)(L.a,{size:"small",color:"error",onClick:function(){O(e),v(e)},children:Object(d.jsx)(wt.a,{fontSize:"small"})})}),Object(d.jsx)(kt,{sx:{backgroundColor:"warning.main"},children:Object(d.jsx)(re,{title:"Drop",confirmText:"Drop",message:"Confirm Drop Payment Method?",color:"error",action:function(){return S({card_name:e.header})},children:Object(d.jsx)(L.a,{size:"small",color:"error",children:Object(d.jsx)(Ct.a,{fontSize:"small"})})})}),Object(d.jsx)(kt,{sx:{borderRadius:"0px 50px 50px 0px",backgroundColor:"warning.main"},children:Object(d.jsx)(L.a,{size:"small",color:"info",onClick:function(){return y({method:{card_name:e.header,installments:0,increase:0,pos_code:0,description:"FIXME"}})},children:Object(d.jsx)(vt.a,{fontSize:"small"})})})]},e.header):Object(d.jsxs)(lt.a,{hover:!0,children:[Object(d.jsx)(kt,{children:e.installments}),Object(d.jsx)(kt,{children:e.description}),Object(d.jsx)(kt,{children:e.increase}),Object(d.jsx)(kt,{children:e.pos_code}),Object(d.jsx)(kt,{children:Object(d.jsx)(L.a,{size:"small",color:"warning",onClick:function(){O(e),v(e)},children:Object(d.jsx)(wt.a,{fontSize:"small"})})}),Object(d.jsx)(kt,{children:Object(d.jsx)(re,{title:"Drop",confirmText:"Drop",message:"Confirm Drop Payment Method?",color:"error",action:function(){return A({method:{id:e.id}})},children:Object(d.jsx)(L.a,{size:"small",color:"error",children:Object(d.jsx)(Ct.a,{fontSize:"small"})})})})]},e.id)}))]})]})})]})})]})})})})},St=a(288),At=function(e){var t=e.user,a=e.commonAnswers,r=e.ownAnswers,c=e.setCommonAnswers,s=e.setOwnAnswers,o=e.handleMessage,l={"#1976d2":"BLUE","#0097a7":"CYAN","#388e3c":"GREEN","#fbc02d":"YELLOW","#f57c00":"ORANGE","#d32f2f":"RED","#c2185b":"PINK","#7b1fa2":"PURPLE","#5d4037":"BROWN","#455a64":"GREY"},j={id:"",label:"",color:"",content:"",common:!1,order:0},b=Object(n.useState)(j),u=Object(i.a)(b,2),h=u[0],x=u[1],O=Object(n.useState)(!1),m=Object(i.a)(O,2),p=m[0],f=m[1],v=function(e){var t=e.target,a=t.name,n=t.value,r=t.checked;x(Object(I.a)(Object(I.a)({},h),{},Object(De.a)({},a,"common"!==a?n:r)))},g=function(e){x(e),f(!0)},w=[function(e){e.answers.common_answers&&c(e.answers.common_answers),e.answers.own_answers&&s(e.answers.own_answers),o(e.msg,"success"),x(j),f(!1)},function(e){o(e.wrn,"warning")},function(e){o(e.err,"error")}],y=at.apply(void 0,["post","/answers/create-answer","answers"].concat(w)),k=at.apply(void 0,["put","/answers/update-answer","answers"].concat(w)),_=at.apply(void 0,["delete","/answers/delete-answer","answers"].concat(w));return Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(C.a,{elevation:3,children:Object(d.jsx)(Ce.a,{sx:{paddingBlockEnd:2,minHeight:"80vh"},border:2,p:2,borderRadius:1,borderColor:"secondary.main",children:Object(d.jsxs)(ve.a,{container:!0,spacing:1,align:"center",pr:2,children:[Object(d.jsx)(ve.a,{item:!0,xs:12,md:3,children:Object(d.jsx)(Pe.a,{size:"small",label:"Label",color:"warning",fullWidth:!0,name:"label",value:h.label,onChange:v})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:3,children:Object(d.jsx)(Pe.a,{size:"small",label:"Order",color:"warning",fullWidth:!0,name:"order",type:"number",value:h.order,onChange:v})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:3,children:Object(d.jsx)(Ie.a,{fullWidth:!0,children:Object(d.jsx)(Be.a,{size:"small",name:"color",value:h.color,onChange:v,children:Object.entries(l).map((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(d.jsx)(W.a,{value:a,children:Object(d.jsx)(G.a,{color:a,children:n})},n)}))})})}),(null===t||void 0===t?void 0:t.is_admin)&&!p&&Object(d.jsx)(ve.a,{item:!0,xs:12,md:3,children:Object(d.jsx)(Ne.a,{control:Object(d.jsx)(Le.a,{name:"common",checked:h.common,onChange:v}),label:"Common"})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:11,children:Object(d.jsx)(Pe.a,{label:"Content",color:"warning",fullWidth:!0,multiline:!0,rows:4,name:"content",value:h.content,onChange:v})}),Object(d.jsxs)(ve.a,{item:!0,xs:12,md:1,children:[Object(d.jsx)(re,{title:p?"Update Answer":"Create Answer",confirmText:p?"Update":"Create",message:p?"Confirm Update Answer?":"Confirm Create Answer?",action:p?function(){return k({answer:Object(I.a)(Object(I.a)({},h),{},{id:h._id.$oid,color:l[h.color]})})}:function(){return y({answer:Object(I.a)(Object(I.a)({},h),{},{color:l[h.color]})})},color:p?"warning":"success",children:Object(d.jsx)(L.a,{color:p?"primary":"success",disabled:!Boolean(h.label),children:Object(d.jsx)(St.a,{})})}),Object(d.jsx)(re,{title:"Delete Answer",message:"Confirm Delete Answer?",confirmText:"Delete",action:function(){return _({answer:{id:h._id.$oid}})},children:Object(d.jsx)(L.a,{color:"error",disabled:!Boolean(h.label),children:Object(d.jsx)(Ct.a,{})})}),Object(d.jsx)(L.a,{color:"warning",disabled:!Boolean(h.label),onClick:function(){x(j),f(!1)},children:Object(d.jsx)(Ot.a,{})})]}),(null===t||void 0===t?void 0:t.is_admin)&&Object(d.jsxs)(ve.a,{item:!0,xs:12,md:6,children:[Object(d.jsx)(G.a,{variant:"h6",children:"Commons"}),Object(d.jsx)(ye.a,{spacing:1,p:1,sx:{paddingBlockEnd:2,height:"45vh",overflow:"auto"},children:a.map((function(e){return Object(d.jsx)(ae.a,{fullWidth:!0,variant:"contained",sx:{color:"#FFFFFF",background:e.color,"&:hover":{background:e.color,filter:"brightness(90%)"}},onClick:function(){return g(e)},children:e.label},e._id.$oid)}))})]}),Object(d.jsxs)(ve.a,{item:!0,xs:12,md:6,children:[Object(d.jsx)(G.a,{variant:"h6",children:"Own"}),Object(d.jsx)(ye.a,{spacing:1,p:1,sx:{paddingBlockEnd:2,height:"45vh",overflow:"auto"},children:r.map((function(e){return Object(d.jsx)(ae.a,{fullWidth:!0,variant:"contained",sx:{color:"#FFFFFF",background:e.color,"&:hover":{background:e.color,filter:"brightness(90%)"}},onClick:function(){return g(e)},children:e.label},e._id.$oid)}))})]})]})})})})},Tt=function(){var e=Object(n.useContext)(j).user,t=Object(n.useState)(!1),a=Object(i.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)({msg:"",vnt:""}),o=Object(i.a)(s,2),l=o[0],b=o[1],u=Object(n.useState)([]),h=Object(i.a)(u,2),x=h[0],O=h[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),f=p[0],v=p[1],g=Object(n.useState)([]),w=Object(i.a)(g,2),C=w[0],y=w[1];nt("/answers/get-all","answers",(function(e){e.answers.payment_methods&&O(e.answers.payment_methods),e.answers.common_answers&&v(e.answers.common_answers),e.answers.own_answers&&y(e.answers.own_answers)}),(function(e){k(e.wrn,"warning")}),(function(e){k(e.err,"error")}));var k=function(e,t){b({msg:e,vnt:t}),c(!0)};return Object(d.jsxs)(d.Fragment,{children:[e.is_admin&&Object(d.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(d.jsx)(_t,{payMeths:x,setPayMeths:O,handleMessage:k})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(d.jsx)(At,{user:e,commonAnswers:f,setCommonAnswers:v,ownAnswers:C,setOwnAnswers:y,handleMessage:k})}),Object(d.jsx)(ge.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:r,autoHideDuration:3e3,onClose:function(){c(!1)},children:Object(d.jsx)(we.a,{variant:"filled",color:l.vnt,sx:{whiteSpace:"pre-line"},children:l.msg})})]})},zt=a(306),Et=a(289),Dt=function(e){var t=e.dates,a=e.setDates,r=e.setHasChanged,c=e.handleMessage,s={str_date:"",percent:"",increaseAll:!0},o=Object(n.useState)(s),l=Object(i.a)(o,2),j=l[0],b=l[1],u=Object(n.useState)(""),h=Object(i.a)(u,2),x=h[0],O=h[1],m=function(e){var t=e.target,a=t.name,n=t.value,r=t.checked;b(Object(I.a)(Object(I.a)({},j),{},Object(De.a)({},a,"increaseAll"===a?r:n)))},p=function(e){var a=parseFloat(e);return t.map((function(e){var t=parseFloat(e.percent),n=t+a+t*a/100;return{_id:e._id,percent:n.toFixed(2)}}))};return Object(d.jsx)(ve.a,{item:!0,pb:"1vh",children:Object(d.jsx)(C.a,{elevation:5,sx:{borderRadius:1},children:Object(d.jsx)(Ce.a,{borderRadius:3,p:2,sx:{paddingBlockEnd:2,minHeight:"39vh"},children:Object(d.jsxs)(ve.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"center",sx:{minHeight:"35vh",overflow:"auto"},children:[Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(G.a,{variant:"h6",color:"success.main",children:"Add New Date - Percentage"})}),Object(d.jsx)(ve.a,{item:!0,xs:8,md:4,children:Object(d.jsx)(Pe.a,{fullWidth:!0,size:"small",label:"Date",focused:!0,type:"date",name:"str_date",value:j.str_date,onChange:m})}),Object(d.jsx)(ve.a,{item:!0,xs:4,md:2,children:Object(d.jsx)(Pe.a,{fullWidth:!0,size:"small",label:"Percentage",inputProps:{min:0},type:"number",name:"percent",value:j.percent,onChange:m})}),Object(d.jsx)(ve.a,{item:!0,xs:6,md:3,children:Object(d.jsx)(Ne.a,{label:"Increase All",control:Object(d.jsx)(zt.a,{color:"warning",name:"increaseAll",checked:j.increaseAll,onChange:m})})}),Object(d.jsx)(ve.a,{item:!0,xs:6,md:3,children:Object(d.jsx)(re,{title:"Add New Date-Percentage Pair",message:"Confirm add a new one?",confirmText:"ADD",color:"success",action:function(){var e,n=j.str_date.split("-").join("/"),i=parseFloat(j.percent),o=Object(rt.a)(t);try{for(o.s();!(e=o.n()).done;){var l=e.value;if(l._id===n)return void c("'".concat(l._id,"' is already on the list"),"error")}}catch(u){o.e(u)}finally{o.f()}var d=j.increaseAll?p(i):t;a([{_id:n,percent:i}].concat(Object($e.a)(d))),r(!0),b(s)},children:Object(d.jsx)(ae.a,{fullWidth:!0,variant:"contained",color:"success",disabled:!Boolean(j.str_date)||!Boolean(j.percent),sx:{height:"100%"},startIcon:Object(d.jsx)(vt.a,{}),children:"ADD"})})}),Object(d.jsx)(ve.a,{item:!0,xs:12,py:2,children:Object(d.jsx)(V.a,{})}),Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(G.a,{variant:"h6",color:"warning.main",children:"Increase All Percentages"})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(d.jsx)(Pe.a,{fullWidth:!0,size:"small",label:"Percentage",inputProps:{min:0},type:"number",value:x,onChange:function(e){return O(e.target.value)}})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(d.jsx)(re,{title:"Update Date-Percentage Table",message:"Confirm update table?",confirmText:"UPDATE",action:function(){a(p(x)),r(!0),O("")},children:Object(d.jsx)(ae.a,{fullWidth:!0,variant:"contained",color:"warning",disabled:!Boolean(x),sx:{height:"100%"},startIcon:Object(d.jsx)(Et.a,{}),children:"UPDATE TABLE"})})})]})})})})},Ut=a(290),Pt=function(e){var t=e.lists,a=e.setLists,r=e.setDates,c=e.setHasChanged,s=e.handleMessage,o=Object(n.useContext)(j).user,l=Object(n.useState)(""),b=Object(i.a)(l,2),u=b[0],h=b[1],x=function(){try{Object(xe.a)(he.a.mark((function e(){var t;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.a.get(F+"/calculator/get-lists-data",{headers:{Accept:"*/*",Authorization:"Bearer ".concat(o.token)}});case 2:(t=e.sent).data.dates&&r(t.data.dates),t.data.err&&console.error(t.data.err);case 5:case"end":return e.stop()}}),e)})))()}catch(e){console.error(e)}};return Object(d.jsx)(ve.a,{item:!0,children:Object(d.jsx)(C.a,{elevation:5,sx:{borderRadius:1},children:Object(d.jsx)(Ce.a,{borderRadius:3,p:2,sx:{paddingBlockEnd:2,minHeight:"40vh"},children:Object(d.jsxs)(ve.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"center",alignContent:"flex-start",children:[Object(d.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(d.jsx)(G.a,{variant:"h6",color:"error.main",children:"Load Table"})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:6,pb:2,children:Object(d.jsx)(re,{title:"Load Table",message:"Confirm load table?",confirmText:"LOAD",disabled:!Boolean(u),action:function(){try{Object(xe.a)(he.a.mark((function e(){var t;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.a.post(F+"/calculator/load-list",{list_name:u},{headers:{Accept:"*/*",Authorization:"Bearer ".concat(null===o||void 0===o?void 0:o.token)}});case 2:(t=e.sent).data.msg&&(x(),s(t.data.msg,"success")),t.data.err&&s(t.data.err,"error");case 5:case"end":return e.stop()}}),e)})))(),h(""),c(!1)}catch(e){console.error(e)}},children:Object(d.jsx)(ae.a,{fullWidth:!0,variant:"contained",color:"error",disabled:!Boolean(u),sx:{height:"100%"},startIcon:Object(d.jsx)(Et.a,{}),children:"LOAD TABLE"})})}),Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(ve.a,{container:!0,align:"center",alignItems:"center",alignContent:"flex-start",sx:{height:"25vh",overflow:"auto"},children:Object(d.jsxs)(it.a,{stickyHeader:!0,size:"small",children:[Object(d.jsx)(ot.a,{children:Object(d.jsxs)(lt.a,{children:[Object(d.jsx)(ct.a,{align:"center",width:"80%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Table Name"}),Object(d.jsx)(ct.a,{align:"center",width:"10%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Download"}),Object(d.jsx)(ct.a,{align:"center",width:"10%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Drop"})]})}),Object(d.jsx)(dt.a,{children:t.map((function(e){var n=u===e.list_name;return Object(d.jsxs)(lt.a,{hover:!0,selected:n,children:[Object(d.jsx)(ct.a,{align:"center",onClick:function(){h(n?"":e.list_name)},children:e.list_name}),Object(d.jsx)(ct.a,{align:"center",children:Object(d.jsx)(L.a,{size:"small",color:"info",onClick:function(){return function(e){try{Object(xe.a)(he.a.mark((function t(){var a,n,r;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,me.a.post(F+"/calculator/get-list-file",{file_name:e},{headers:{Accept:"*/*",Authorization:"Bearer ".concat(null===o||void 0===o?void 0:o.token)}});case 2:(a=t.sent).data.err?console.error(a.data.err):(n=window.URL.createObjectURL(new Blob([JSON.stringify(a.data,void 0,2)],{type:"application/json"})),(r=document.createElement("a")).href=n,r.setAttribute("download","".concat(e)),document.body.appendChild(r),r.click(),r.remove());case 4:case"end":return t.stop()}}),t)})))()}catch(t){console.error(t)}}(e.list_name)},children:Object(d.jsx)(Ut.a,{})})}),Object(d.jsx)(ct.a,{align:"center",children:Object(d.jsx)(re,{title:"Drop Data Table?",message:"Confirm drop Table?",confirmText:"DROP",action:function(){!function(e){try{Object(xe.a)(he.a.mark((function n(){var r,c;return he.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,me.a.delete(F+"/calculator/drop-list",{headers:{Accept:"*/*",Authorization:"Bearer ".concat(null===o||void 0===o?void 0:o.token)},data:{file_name:e}});case 2:(r=n.sent).data.msg&&(c=t.filter((function(t){return t.list_name!==e})),a(c),h(""),s(r.data.msg,"info")),r.data.err&&s(r.data.err,"error");case 5:case"end":return n.stop()}}),n)})))()}catch(n){console.error(n)}}(e.list_name)},children:Object(d.jsx)(L.a,{size:"small",color:"error",children:Object(d.jsx)(Ct.a,{})})})})]},e._id.$oid)}))})]})})})]})})})})},Ft=function(e){var t=e.dates,a=e.setDates,r=e.lists,c=e.setLists,s=e.hasChanged,o=e.setHasChanged,l=e.handleMessage,b=Object(n.useContext)(j).user,u=Object(n.useState)({_id:"",percent:""}),h=Object(i.a)(u,2),x=h[0],O=h[1],m=Object(n.useState)({_id:"",percent:""}),p=Object(i.a)(m,2),f=p[0],v=p[1],g=function(e){var t=e.target,a=t.name,n=t.value;v(Object(I.a)(Object(I.a)({},f),{},Object(De.a)({},a,n)))},w=function(){var e=t.map((function(e){return e._id!==x._id?e:{_id:f._id,percent:parseFloat(f.percent)}}));x._id!==f._id&&e.push(Object(I.a)(Object(I.a)({},x),{},{percent:-1})),a(e),O({_id:"",percent:""}),o(!0)};return Object(d.jsx)(C.a,{elevation:5,sx:{borderRadius:1},children:Object(d.jsxs)(Ce.a,{borderRadius:3,p:2,sx:{paddingBlockEnd:2,minHeight:"80vh"},children:[Object(d.jsx)(ve.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"top",alignContent:"flex-start",sx:{height:"65vh",overflow:"auto"},children:Object(d.jsxs)(it.a,{stickyHeader:!0,size:"small",children:[Object(d.jsx)(ot.a,{children:Object(d.jsxs)(lt.a,{children:[Object(d.jsx)(ct.a,{align:"center",width:"50%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Date (y/m/d)"}),Object(d.jsx)(ct.a,{align:"center",width:"30%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Percentage"}),Object(d.jsx)(ct.a,{align:"center",width:"10%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Edit"}),Object(d.jsx)(ct.a,{align:"center",width:"10%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Drop"})]})}),Object(d.jsx)(dt.a,{children:null===t||void 0===t?void 0:t.map((function(e){var n=x._id===f._id&&x.percent.toString()===f.percent.toString();return x._id===e._id?Object(d.jsxs)(lt.a,{hover:!0,selected:!0,children:[Object(d.jsx)(ct.a,{children:Object(d.jsx)(Pe.a,{size:"small",variant:"standard",inputProps:{style:{textAlign:"center"}},name:"_id",value:f._id,onChange:g})}),Object(d.jsx)(ct.a,{children:Object(d.jsx)(Pe.a,{size:"small",variant:"standard",inputProps:{style:{textAlign:"center"},min:0},type:"number",name:"percent",value:f.percent,onChange:g})}),Object(d.jsx)(ct.a,{align:"right",children:Object(d.jsx)(L.a,{size:"small",color:"success",disabled:n,onClick:w,children:Object(d.jsx)(gt.a,{})})}),Object(d.jsx)(ct.a,{align:"right",children:Object(d.jsx)(L.a,{size:"small",color:"info",onClick:function(){return O({_id:"",percent:""})},children:Object(d.jsx)(Ot.a,{})})})]},e._id):Object(d.jsxs)(lt.a,{hover:!0,children:[Object(d.jsx)(ct.a,{align:"center",children:e._id}),Object(d.jsx)(ct.a,{align:"center",children:e.percent}),Object(d.jsx)(ct.a,{align:"right",children:Object(d.jsx)(L.a,{size:"small",color:"warning",onClick:function(){v({_id:e._id,percent:e.percent}),O({_id:e._id,percent:e.percent})},children:Object(d.jsx)(wt.a,{})})}),Object(d.jsx)(ct.a,{align:"right",children:Object(d.jsx)(re,{title:"Delete Data?",message:"Confirm delete Data Percentage?",confirmText:"Delete",action:function(){return function(e){var n=t.filter((function(t){return t._id!==e}));a(n),o(!0)}(e._id)},children:Object(d.jsx)(L.a,{size:"small",color:"error",children:Object(d.jsx)(Ct.a,{})})})})]},e._id)}))})]})}),Object(d.jsxs)(ve.a,{container:!0,spacing:2,py:2,children:[Object(d.jsx)(ve.a,{item:!0,xs:6,md:9}),Object(d.jsx)(ve.a,{item:!0,xs:6,md:3,children:Object(d.jsx)(re,{title:"Update Table",message:"Confirm Update Table?",confirmText:"UPDATE",action:function(){try{Object(xe.a)(he.a.mark((function e(){var n,s,i;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.a.post(F+"/calculator/load-list",{dates:t},{headers:{Accept:"*/*",Authorization:"Bearer ".concat(null===b||void 0===b?void 0:b.token)}});case 2:(n=e.sent).data.msg&&((s=r).unshift({_id:{$oid:(new Date).getTime()},list_name:n.data.new_list}),c(s),i=t.filter((function(e){return-1!==e.percent})).sort((function(e,t){return e._id>t._id?-1:e._id<t._id?1:0})),a(i),l(n.data.msg,"success"),o(!1)),n.data.err&&l(n.data.err,"error");case 5:case"end":return e.stop()}}),e)})))()}catch(e){console.error(e)}},color:"warning",disabled:!s,children:Object(d.jsx)(ae.a,{fullWidth:!0,variant:"contained",color:"error",disabled:!s,children:"Update Table"})})})]})]})})},It=function(){var e=Object(n.useContext)(j).user,t=Object(n.useState)({msg:"",vnt:""}),a=Object(i.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),o=Object(i.a)(s,2),l=o[0],b=o[1],u=Object(n.useState)([]),h=Object(i.a)(u,2),x=h[0],O=h[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),f=p[0],v=p[1],g=Object(n.useState)(!1),w=Object(i.a)(g,2),C=w[0],y=w[1];Object(n.useEffect)((function(){var t=me.a.CancelToken.source();try{Object(xe.a)(he.a.mark((function a(){var n;return he.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,me.a.get(F+"/calculator/get-lists-data",{cancelToken:t.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(e.token)}});case 2:(n=a.sent).data.dates&&(O(n.data.dates),v(n.data.lists)),n.data.err&&console.error(n.data.err);case 5:case"end":return a.stop()}}),a)})))()}catch(a){console.error(a)}return function(){t.cancel()}}),[e]);var k=function(e,t){c({msg:e,vnt:t}),b(!0)};return Object(d.jsxs)(d.Fragment,{children:[(null===e||void 0===e?void 0:e.is_admin)?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(ve.a,{item:!0,xs:12,md:6,children:[Object(d.jsx)(Dt,{dates:x,setDates:O,setHasChanged:y,handleMessage:k}),Object(d.jsx)(Pt,{lists:f,setLists:v,setDates:O,setHasChanged:y,handleMessage:k})]}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(d.jsx)(Ft,{dates:x,setDates:O,lists:f,setLists:v,hasChanged:C,setHasChanged:y,handleMessage:k})})]}):Object(d.jsx)(ve.a,{item:!0,children:Object(d.jsx)(G.a,{variant:"h3",color:"error",children:"\u26d4 This section is for admins only"})}),Object(d.jsx)(ge.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:l,autoHideDuration:3e3,onClose:function(){b(!1)},children:Object(d.jsx)(we.a,{variant:"filled",color:r.vnt,children:r.msg})})]})},Bt=function(){var e=Object(n.useContext)(j).user,t={id:"",is_system:!1,identifier:"",pattern:"",replacement:""},a=Object(n.useState)(!1),r=Object(i.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)({msg:"",vnt:""}),l=Object(i.a)(o,2),b=l[0],u=l[1],h=Object(n.useState)([]),x=Object(i.a)(h,2),O=x[0],m=x[1],p=Object(n.useState)([]),f=Object(i.a)(p,2),v=f[0],g=f[1],w=Object(n.useState)(t),y=Object(i.a)(w,2),k=y[0],_=y[1],S=Object(n.useState)(!1),A=Object(i.a)(S,2),T=A[0],z=A[1],E=function(e,t){u({msg:e,vnt:t}),s(!0)},D=function(e){var t=e.target,a=t.name,n=t.value,r=t.checked;_(Object(I.a)(Object(I.a)({},k),{},Object(De.a)({},a,"is_system"!==a?n:r)))},U=function(e){_(e),z(!0)},P=[function(e){e.answers.sys_regex&&m(e.answers.sys_regex),e.answers.own_regex&&g(e.answers.own_regex),e.msg&&E(e.msg,"success"),_(t),z(!1)},function(e){E(e.wrn,"warning")},function(e){E(e.err,"error")}];nt.apply(void 0,["/answers/get-expressions","answers"].concat(P));var F=at.apply(void 0,["post","/answers/create-expression","answers"].concat(P)),B=at.apply(void 0,["put","/answers/update-expression","answers"].concat(P)),R=at.apply(void 0,["delete","/answers/delete-expression","answers"].concat(P));return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(ve.a,{item:!0,xs:12,md:6,children:Object(d.jsx)(C.a,{elevation:7,children:Object(d.jsx)(Ce.a,{sx:{paddingBlockEnd:2,minHeight:"80vh"},border:2,p:2,borderRadius:1,borderColor:"info.main",children:Object(d.jsxs)(ve.a,{container:!0,spacing:1,align:"center",pr:2,children:[Object(d.jsx)(ve.a,{item:!0,xs:12,md:8,children:Object(d.jsx)(Pe.a,{size:"small",label:"Identifier",color:"warning",fullWidth:!0,name:"identifier",value:k.identifier,onChange:D})}),(null===e||void 0===e?void 0:e.is_admin)&&!T&&Object(d.jsx)(ve.a,{item:!0,xs:12,md:3,children:Object(d.jsx)(Ne.a,{control:Object(d.jsx)(Le.a,{name:"is_system",checked:k.is_system,onChange:D}),label:"System"})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:11,children:Object(d.jsx)(Pe.a,{size:"small",label:"Pattern",color:"warning",fullWidth:!0,name:"pattern",value:k.pattern,onChange:D})}),Object(d.jsx)(ve.a,{item:!0,xs:12,md:11,children:Object(d.jsx)(Pe.a,{label:"Replacement",color:"warning",fullWidth:!0,multiline:!0,rows:4,name:"replacement",value:k.replacement,onChange:D})}),Object(d.jsxs)(ve.a,{item:!0,xs:12,md:1,children:[Object(d.jsx)(re,{title:T?"Update Answer":"Create Answer",confirmText:T?"Update":"Create",message:T?"Confirm Update Answer?":"Confirm Create Answer?",action:T?function(){return B({expression:Object(I.a)(Object(I.a)({},k),{},{id:k._id.$oid})})}:function(){return F({expression:k})},color:T?"warning":"success",children:Object(d.jsx)(L.a,{color:T?"primary":"success",disabled:!Boolean(k.identifier),children:Object(d.jsx)(St.a,{})})}),Object(d.jsx)(re,{title:"Delete Answer",message:"Confirm Delete Answer?",confirmText:"Delete",action:function(){return R({expression:{id:k._id.$oid}})},children:Object(d.jsx)(L.a,{color:"error",disabled:!Boolean(k.identifier),children:Object(d.jsx)(Ct.a,{})})}),Object(d.jsx)(L.a,{color:"warning",disabled:!Boolean(k.identifier),onClick:function(){_(t),z(!1)},children:Object(d.jsx)(Ot.a,{})})]}),(null===e||void 0===e?void 0:e.is_admin)&&Object(d.jsxs)(ve.a,{item:!0,xs:12,md:6,children:[Object(d.jsx)(G.a,{variant:"h6",children:"System"}),Object(d.jsx)(ye.a,{spacing:1,p:1,sx:{paddingBlockEnd:2,height:"38vh",overflow:"auto"},children:O.map((function(e){return Object(d.jsx)(ae.a,{fullWidth:!0,variant:"contained",color:"error",onClick:function(){return U(e)},children:e.identifier},e._id.$oid)}))})]}),Object(d.jsxs)(ve.a,{item:!0,xs:12,md:6,children:[Object(d.jsx)(G.a,{variant:"h6",children:"Own"}),Object(d.jsx)(ye.a,{spacing:1,p:1,sx:{paddingBlockEnd:2,height:"38vh",overflow:"auto"},children:v.map((function(e){return Object(d.jsx)(ae.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){return U(e)},children:e.identifier},e._id.$oid)}))})]})]})})})}),Object(d.jsx)(ge.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:c,autoHideDuration:3e3,onClose:function(){s(!1)},children:Object(d.jsx)(we.a,{variant:"filled",color:b.vnt,sx:{whiteSpace:"pre-line"},children:b.msg})})]})},Rt=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),s=Object(i.a)(c,2),o=s[0],l=s[1],b=Object(n.useState)(""),u=Object(i.a)(b,2),x=u[0],m=u[1],p=Object(n.useContext)(j),f=p.user,v=p.setUser,g=Object(n.useContext)(h).setUserSettings,w=Object(O.h)(),C=Object(O.g)();Object(n.useEffect)((function(){f&&w("/login"===C.pathname?"/news":C.pathname,{replace:!0})}));var y=function(){var e=Object(xe.a)(he.a.mark((function e(t){var n,c;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n="/login"===C.pathname?"/news":C.pathname,e.prev=2,e.next=5,me.a.post(F+"/users/signin",{username:a,password:o});case 5:(c=e.sent).data.user?(v(Object(I.a)(Object(I.a)({},c.data.user),{},{username:a})),g(Object(I.a)({},c.data.settings))):(r(""),l(""),m(c.data.msg),setTimeout((function(){m("")}),2500)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:w(n,{replace:!0});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)(fe.a,{children:Object(d.jsxs)(ve.a,{container:!0,spacing:3,margin:0,children:[Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(G.a,{variant:"h3",color:"primary",children:"User Login"})}),Object(d.jsx)(ve.a,{item:!0,children:Object(d.jsx)(M.a,{in:Boolean(x),timeout:1e3,children:Object(d.jsx)(we.a,{severity:"warning",variant:"outlined",children:x})})}),Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(Pe.a,{id:"uName",label:"Username",value:a,onChange:function(e){r(e.target.value)}})}),Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(Pe.a,{id:"uPass",label:"Password",type:"password",value:o,onChange:function(e){l(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&y(e)}})}),Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(ae.a,{variant:"contained",color:"primary",onClick:y,children:"Login"})})]})})},Mt=["user","setUser"],Wt=function(e){var t=e.user,a=e.setUser,r=Object(B.a)(e,Mt),c=Object(n.useState)({username:"",email:"",password:"",new_password:"",confirm_new_password:"",first_name:"",last_name:"",is_admin:!1}),s=Object(i.a)(c,2),o=s[0],l=s[1];Object(n.useEffect)((function(){var e=me.a.CancelToken.source();return(null===t||void 0===t?void 0:t.token)&&Object(xe.a)(he.a.mark((function a(){var n;return he.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,me.a.get(F+"/users/get-user-data",{cancelToken:e.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:n=a.sent,l(Object(I.a)(Object(I.a)({},n.data),{},{password:"",new_password:"",confirm_new_password:""})),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))(),function(){e.cancel()}}),[t]);var j=function(e){var t=e.target,a=t.name,n=t.value,r=t.checked;l(Object(I.a)(Object(I.a)({},o),{},Object(De.a)({},a,"is_admin"!==a?n:r)))},b=Object(n.useState)(!0),u=Object(i.a)(b,2),h=u[0],x=u[1],O=function(e){var t=e.target,a=t.name,n=t.value;"new_password"===a?(l(Object(I.a)(Object(I.a)({},o),{},Object(De.a)({},a,n))),x(o.confirm_new_password===n)):(l(Object(I.a)(Object(I.a)({},o),{},Object(De.a)({},a,n))),x(o.new_password===n))},m=Object(n.useState)({msg:"",vnt:"info"}),p=Object(i.a)(m,2),f=p[0],v=p[1],g=function(){if(!h)return v({msg:"new password doesn't match",vnt:"error"}),void setTimeout((function(){v({msg:"",vnt:"error"})}),2500);Object(xe.a)(he.a.mark((function e(){var n,r;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.a.post(F+"/users/update-user",o,{headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:(n=e.sent).data.msg?(v({msg:n.data.msg,vnt:"success"}),r=Object(I.a)(Object(I.a)({},t),{},{username:o.username,first_name:o.first_name,last_name:o.last_name,is_admin:o.is_admin}),setTimeout((function(){v({msg:"",vnt:"success"})}),2500),n.data.wrn?(setTimeout((function(){v({msg:n.data.wrn,vnt:"warning"})}),2600),setTimeout((function(){v({msg:"",vnt:"warning"}),a(r)}),5100)):a(r)):(v({msg:n.data.err,vnt:"error"}),setTimeout((function(){v({msg:"",vnt:"error"})}),2500)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))(),setTimeout((function(){x(!0)}),500)};return Object(d.jsx)(n.Fragment,Object(I.a)(Object(I.a)({},r),{},{children:Object(d.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(d.jsx)(C.a,{elevation:3,children:Object(d.jsxs)(ve.a,{container:!0,spacing:2,margin:0,px:{xs:0,md:3},children:[Object(d.jsx)(ve.a,{item:!0,children:Object(d.jsx)(G.a,{variant:"h6",color:"primary",children:"Update My User Account"})}),Object(d.jsx)(ve.a,{item:!0,xs:12,mx:1,children:Object(d.jsx)(G.a,{variant:"h6",color:"GrayText",children:o.email})}),Object(d.jsx)(ve.a,{item:!0,children:Object(d.jsx)(Pe.a,{size:"small",name:"username",label:"Username",value:o.username,onChange:j})}),t.is_admin&&Object(d.jsx)(ve.a,{item:!0,mb:0,children:Object(d.jsx)(Ne.a,{control:Object(d.jsx)(Le.a,{name:"is_admin",checked:o.is_admin,onChange:j}),label:"Is Admin"})}),Object(d.jsx)(ve.a,{item:!0,children:Object(d.jsx)(Pe.a,{size:"small",name:"first_name",label:"First Name",value:o.first_name,onChange:j})}),Object(d.jsx)(ve.a,{item:!0,children:Object(d.jsx)(Pe.a,{size:"small",name:"last_name",label:"Last Name",value:o.last_name,onChange:j})}),Object(d.jsxs)(ve.a,{item:!0,children:[Object(d.jsxs)(C.a,{elevation:1,sx:{background:"darkGray2",display:"inline-block"},children:[Object(d.jsx)(ve.a,{item:!0,pb:2,children:Object(d.jsx)(Pe.a,{size:"small",error:!h,name:"new_password",label:"New Password",type:"password",value:o.new_password,onChange:O})}),Object(d.jsx)(ve.a,{item:!0,children:Object(d.jsx)(Pe.a,{size:"small",error:!h,name:"confirm_new_password",label:"Confirm New Password",type:"password",value:o.confirm_new_password,onChange:O})})]}),Object(d.jsxs)(ve.a,{container:!0,columns:2,pt:2,children:[Object(d.jsx)(ve.a,{item:!0,pb:2,children:Object(d.jsx)(Pe.a,{size:"small",color:"warning",focused:!0,name:"password",label:"Password",type:"password",value:o.password,onChange:j,onKeyPress:function(e){"Enter"===e.key&&g()}})}),Object(d.jsx)(re,{title:"Update User",message:"Confirm user update?",confirmText:"UPDATE",color:"secondary",action:g,children:Object(d.jsx)(ve.a,{item:!0,px:2,pb:2,children:Object(d.jsx)(ae.a,{variant:"contained",color:"warning",children:"UPDATE"})})})]}),Object(d.jsx)(ve.a,{item:!0,pb:2,children:Object(d.jsx)(M.a,{in:Boolean(f.msg),timeout:1e3,children:Object(d.jsx)(we.a,{severity:f.vnt,variant:"outlined",children:f.msg})})})]})]})})})}))},Ht=function(e){var t=Object(n.useContext)(h),a=t.userSettings,r=t.setUserSettings,c=Object(n.useState)(a),s=Object(i.a)(c,2),o=s[0],l=s[1],j=Object(n.useState)({msg:"",vnt:""}),b=Object(i.a)(j,2),u=b[0],x=b[1],O=Object(n.useState)(!1),m=Object(i.a)(O,2),p=m[0],f=m[1],v=function(e,t){x({msg:e,vnt:t}),f(!0)},g=function(e){var t=e.target,a=t.name,n=t.value,r=t.checked;l(Object(I.a)(Object(I.a)({},o),{},Object(De.a)({},a,"calculator"!==a?n:r)))},w=at("put","/users/update-user-settings","settings",(function(e){r(e.settings),v(e.msg,"success")}),(function(e){v(e.wrn,"warning")}),(function(e){v(e.err,"error")}));return Object(d.jsxs)(n.Fragment,Object(I.a)(Object(I.a)({},e),{},{children:[Object(d.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(d.jsx)(C.a,{elevation:3,children:Object(d.jsxs)(ve.a,{container:!0,spacing:2,margin:0,px:{xs:0,md:3},children:[Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(G.a,{variant:"h6",color:"primary",children:"User Settings"})}),Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(Ie.a,{fullWidth:!0,children:Object(d.jsxs)(Be.a,{size:"small",name:"theme_mode",value:o.theme_mode,onChange:g,children:[Object(d.jsx)(W.a,{value:"dark",children:" DARK THEME "}),Object(d.jsx)(W.a,{value:"light",children:" LIGHT THEME"})]})})}),Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(Ne.a,{control:Object(d.jsx)(Le.a,{name:"calculator",checked:o.calculator,onChange:g}),label:"Basic Calculator for Default"})}),Object(d.jsx)(ve.a,{item:!0,xs:12,px:2,pb:2,children:Object(d.jsx)(re,{title:"Save User Settings",confirmText:"UPDATE",message:"Confirm Save user settings?",color:"warning",action:function(){return w({settings:{theme_mode:o.theme_mode,calculator:o.calculator}})},children:Object(d.jsx)(ae.a,{variant:"contained",color:"warning",children:"CONFIGURE"})})})]})})}),Object(d.jsx)(ge.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:p,autoHideDuration:3e3,onClose:function(){f(!1)},children:Object(d.jsx)(we.a,{variant:"filled",color:u.vnt,children:u.msg})})]}))},Nt=a(308),Lt=a(291),$t=a(292),Gt=["user","setEdit","usersSate","setUsersState","initialOtherUser","setOtherUserData"],Vt=function(e){var t=e.user,a=e.setEdit,r=e.usersSate,c=e.setUsersState,s=e.initialOtherUser,o=e.setOtherUserData,l=Object(B.a)(e,Gt),j=Object(n.useState)([]),b=Object(i.a)(j,2),u=b[0],h=b[1];Object(n.useEffect)((function(){var e=me.a.CancelToken.source();return(null===t||void 0===t?void 0:t.token)&&Object(xe.a)(he.a.mark((function a(){var n;return he.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,me.a.get(F+"/users/get-users",{cancelToken:e.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:n=a.sent,h(n.data),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))(),function(){e.cancel()}}),[t,r]);return Object(d.jsx)(n.Fragment,Object(I.a)(Object(I.a)({},l),{},{children:Object(d.jsxs)(ve.a,{item:!0,xs:12,md:4,children:[Object(d.jsx)(C.a,{elevation:3,children:Object(d.jsxs)(ve.a,{container:!0,spacing:2,margin:0,px:{xs:0,md:3},children:[Object(d.jsx)(ve.a,{item:!0,children:Object(d.jsx)(G.a,{variant:"h6",color:"primary",children:"List of Active Users"})}),u.map((function(e){return Object(d.jsx)(Nt.a,{secondaryAction:Object(d.jsx)(re,{title:"Delete",message:"Confirm user Delete?",confirmText:"DELETE",action:function(){return n=e.email,Object(xe.a)(he.a.mark((function e(){var a;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.a.delete(F+"/users/delete-other-user",{headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)},data:{email:n}});case 3:(a=e.sent).data.msg?(c({msg:a.data.msg,vnt:"info"}),setTimeout((function(){c({msg:"",vnt:"info"})}),2500)):(c({msg:a.data.err,vnt:"error"}),setTimeout((function(){c({msg:"",vnt:"error"})}),2500)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))(),a(!1),void o(s);var n},children:Object(d.jsx)(L.a,{edge:"end",children:Object(d.jsx)(Ct.a,{fontSize:"large",color:"error"})})}),children:Object(d.jsx)(Lt.a,{onClick:function(){!function(e){o(Object(I.a)({},e)),a(!0)}(e)},children:Object(d.jsx)($t.a,{primary:["".concat(e.username," -"),e.first_name,e.last_name].join(" "),secondary:e.email})})},e.username)}))]})}),Object(d.jsx)(ve.a,{item:!0,pt:3,children:Object(d.jsx)(M.a,{in:Boolean(r.msg),timeout:1e3,children:Object(d.jsx)(we.a,{severity:r.vnt,variant:"outlined",children:r.msg})})})]})}))},Kt=["user","edit","setEdit","setUsersState","initialOtherUser","otherUserData","setOtherUserData"],Jt=function(e){var t=e.user,a=e.edit,r=e.setEdit,c=e.setUsersState,s=e.initialOtherUser,o=e.otherUserData,l=e.setOtherUserData,j=Object(B.a)(e,Kt),b=function(e){var t=e.target,a=t.name,n=t.value,r=t.checked;l(Object(I.a)(Object(I.a)({},o),{},Object(De.a)({},a,"is_admin"!==a?n:r)))},u=Object(n.useState)(!0),h=Object(i.a)(u,2),x=h[0],O=h[1],m=function(e){var t=e.target,a=t.name,n=t.value;"email"===a?(l(Object(I.a)(Object(I.a)({},o),{},Object(De.a)({},a,n))),O(o.confirm_email===n)):(l(Object(I.a)(Object(I.a)({},o),{},Object(De.a)({},a,n))),O(o.email===n))};return Object(d.jsx)(n.Fragment,Object(I.a)(Object(I.a)({},j),{},{children:Object(d.jsx)(ve.a,{item:!0,xs:12,md:4,children:Object(d.jsx)(C.a,{elevation:3,children:Object(d.jsxs)(ve.a,{container:!0,spacing:2,margin:0,px:{xs:0,md:3},children:[Object(d.jsx)(ve.a,{item:!0,children:Object(d.jsx)(G.a,{variant:"h6",color:"primary",children:"Update/Create User Account"})}),a?Object(d.jsx)(ve.a,{item:!0,xs:12,mx:1,children:Object(d.jsx)(G.a,{variant:"h6",color:"GrayText",children:o.email})}):Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(ve.a,{item:!0,children:Object(d.jsxs)(C.a,{elevation:1,sx:{background:"darkGray2",display:"inline-block"},children:[Object(d.jsx)(ve.a,{item:!0,pb:2,children:Object(d.jsx)(Pe.a,{size:"small",error:!x,name:"email",label:"Email (ID - immutable)",value:o.email,onChange:m})}),Object(d.jsx)(ve.a,{item:!0,children:Object(d.jsx)(Pe.a,{size:"small",error:!x,name:"confirm_email",label:"Confirm Email",value:o.confirm_email,onChange:m})})]})})}),Object(d.jsx)(ve.a,{item:!0,children:Object(d.jsx)(Pe.a,{size:"small",name:"username",label:"Username",value:o.username,onChange:b})}),Object(d.jsx)(ve.a,{item:!0,mb:0,children:Object(d.jsx)(Ne.a,{control:Object(d.jsx)(Le.a,{name:"is_admin",checked:o.is_admin,onChange:b}),label:"Is Admin"})}),Object(d.jsx)(ve.a,{item:!0,children:Object(d.jsx)(Pe.a,{size:"small",name:"first_name",label:"Fisrs Name",value:o.first_name,onChange:b})}),Object(d.jsx)(ve.a,{item:!0,children:Object(d.jsx)(Pe.a,{size:"small",name:"last_name",label:"Last Name",value:o.last_name,onChange:b})}),Object(d.jsx)(ve.a,{item:!0,children:Object(d.jsx)(ve.a,{container:!0,columns:2,sx:{alignItems:"flex-end"},children:a?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(ve.a,{item:!0,pl:2,pb:2,children:Object(d.jsx)(ae.a,{variant:"contained",color:"error",onClick:function(){l(s),r(!1),O(!0)},children:"CANCEL"})}),Object(d.jsx)(re,{title:"Update Other User",message:"Confirm user update?",color:"secondary",confirmText:"UPDATE",action:function(){Object(xe.a)(he.a.mark((function e(){var a;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.a.post(F+"/users/update-other-user",{email:(n=o).email,username:n.username,first_name:n.first_name,last_name:n.last_name,is_admin:n.is_admin},{headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:(a=e.sent).data.msg?(c({msg:a.data.msg,vnt:"success"}),setTimeout((function(){c({msg:"",vnt:"success"})}),2500)):(c({msg:a.data.err,vnt:"error"}),setTimeout((function(){c({msg:"",vnt:"error"})}),2500)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}var n}),e,null,[[0,7]])})))(),l(s),r(!1)},children:Object(d.jsx)(ve.a,{item:!0,pl:2,pb:2,children:Object(d.jsx)(ae.a,{variant:"contained",color:"warning",children:"UPDATE"})})})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(ve.a,{item:!0,pb:2,children:Object(d.jsx)(C.a,{elevation:1,sx:{maxWidth:"230px",background:"darkGray2",display:"inline-block"},children:Object(d.jsx)(ve.a,{item:!0,p:2,children:Object(d.jsx)(G.a,{variant:"body1",color:"warning.main",children:'By default the password will be "abc123" the user must change it later'})})})}),Object(d.jsx)(ve.a,{item:!0,px:2,pb:2,children:Object(d.jsx)(ae.a,{variant:"contained",color:"success",onClick:function(){for(var e=0,a=Object.entries(o);e<a.length;e++){var n=Object(i.a)(a[e],2),r=n[0];if(""===n[1])return c({msg:"Missing Value ".concat(r),vnt:"error"}),void setTimeout((function(){c({msg:"",vnt:"error"})}),2500)}if(!x)return c({msg:"Email doesn't match",vnt:"error"}),void setTimeout((function(){c({msg:"",vnt:"error"})}),2500);Object(xe.a)(he.a.mark((function e(){var a;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.a.post(F+"/users/signup",o,{headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:(a=e.sent).data.msg?(c({msg:a.data.msg,vnt:"success"}),l(s),setTimeout((function(){c({msg:"",vnt:"success"})}),2500)):(c({msg:a.data.err,vnt:"error"}),setTimeout((function(){c({msg:"",vnt:"error"})}),2500)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))(),setTimeout((function(){O(!0)}),500)},children:"CREATE"})})]})})})]})})})}))},Yt=function(){var e=Object(n.useContext)(j),t=e.user,a=e.setUser,r={username:"",email:"",confirm_email:"",first_name:"",last_name:"",is_admin:!1},c=Object(n.useState)(!1),s=Object(i.a)(c,2),o=s[0],l=s[1],b=Object(n.useState)(r),u=Object(i.a)(b,2),h=u[0],x=u[1],O=Object(n.useState)({msg:"",vnt:"success"}),m=Object(i.a)(O,2),p=m[0],f=m[1];return Object(d.jsxs)(fe.a,{maxWidth:"xl",children:[Object(d.jsx)(ve.a,{item:!0,xs:12,children:Object(d.jsx)(G.a,{variant:"h3",color:"secondary",children:"User Account"})}),Object(d.jsxs)(ve.a,{container:!0,spacing:2,children:[Object(d.jsx)(Wt,{user:t,setUser:a}),Object(d.jsx)(Ht,{}),t.is_admin&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(Vt,{user:t,setEdit:l,usersSate:p,setUsersState:f,initialOtherUser:r,setOtherUserData:x}),Object(d.jsx)(Jt,{user:t,edit:o,setEdit:l,setUsersState:f,initialOtherUser:r,otherUserData:h,setOtherUserData:x})]})]})]})},Xt=function(){var e=Object(n.useContext)(j),t=e.user,a=e.setUser,r=Object(n.useContext)(b),c=r.auth,s=r.setAuth,i=Object(n.useContext)(h).userSettings,o=Object(n.useMemo)((function(){return"light"!==i.theme_mode?Object(m.a)({palette:{mode:"dark",primary:f.a,secondary:v.a,info:g.a}}):Object(m.a)({palette:{mode:i.theme_mode,primary:f.a,secondary:v.a,info:g.a,background:{paper:"#eaeaea",default:"#fafafa"}}})}),[i.theme_mode]);return Object(n.useEffect)((function(){(null===t||void 0===t?void 0:t.token)&&s(!0)}),[t,s]),Object(d.jsx)(p.a,{theme:o,children:Object(d.jsx)(w.a,{enableColorScheme:!0,children:Object(d.jsxs)(C.a,{sx:{paddingBlockEnd:2,minHeight:"100vh"},square:!0,children:[Object(d.jsx)(be,{}),c?Object(d.jsx)(pe,{setAuth:s,user:t,setUser:a,children:Object(d.jsxs)(O.e,{children:[Object(d.jsx)(O.c,{path:"/",element:Object(d.jsx)(O.a,{to:U[0]})}),Object(d.jsx)(O.c,{path:U[0],element:Object(d.jsx)(He,{})}),Object(d.jsx)(O.c,{path:U[1],element:Object(d.jsx)(tt,{})}),Object(d.jsx)(O.c,{path:U[2],element:Object(d.jsx)(pt,{})}),Object(d.jsxs)(O.c,{path:U[3],element:Object(d.jsx)(ft,{}),children:[Object(d.jsx)(O.c,{path:P[0],element:Object(d.jsx)(Tt,{})}),Object(d.jsx)(O.c,{path:P[1],element:Object(d.jsx)(It,{})}),Object(d.jsx)(O.c,{path:P[2],element:Object(d.jsx)(Bt,{})})]}),Object(d.jsx)(O.c,{path:"login",element:Object(d.jsx)(Rt,{})}),Object(d.jsx)(O.c,{path:"account",element:Object(d.jsx)(Yt,{})})]})}):Object(d.jsx)(Rt,{})]})})})};c.a.render(Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(s.a,{children:Object(d.jsx)(x,{children:Object(d.jsx)(Xt,{})})})}),document.getElementById("root"))}},[[202,1,2]]]);
//# sourceMappingURL=main.916d6fca.chunk.js.map