(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{123:function(e,t,n){e.exports={mdStyle:"markdownStyle_mdStyle__38Iau"}},203:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(61),c=n.n(r),s=n(42),i=n(7),o=function(){var e=Object(a.useState)(function(){var e=localStorage.getItem("user");return JSON.parse(e)}()),t=Object(i.a)(e,2),n=t[0],r=t[1];return[n,function(e){localStorage.setItem("user",JSON.stringify(e)),r(e)}]},l=n(9),d=function(){var e={theme_mode:"dark",calculator:!0,postsFontFamily:"Helvetica",notifVol:.1},t=Object(a.useState)(function(){var t=localStorage.getItem("settings");return Object(l.a)(Object(l.a)({},e),JSON.parse(t))}()),n=Object(i.a)(t,2),r=n[0],c=n[1];return[r,function(e){localStorage.setItem("settings",JSON.stringify(e)),c(e)}]},j=n(0),b=Object(a.createContext)({user:"",setUser:function(){}}),u=Object(a.createContext)({auth:"",setAuth:function(){}}),h=Object(a.createContext)({fetchedPosts:[],setFetchedPosts:function(){}}),x=Object(a.createContext)({userSettings:"",setUserSettings:function(){}}),O=function(e){var t=e.children,n=o(),r=Object(i.a)(n,2),c=r[0],s=r[1],l=Object(a.useMemo)((function(){return{user:c,setUser:s}}),[c,s]),O=Object(a.useState)(!1),m=Object(i.a)(O,2),p=m[0],f=m[1],v=Object(a.useMemo)((function(){return{auth:p,setAuth:f}}),[p,f]),g=Object(a.useState)([]),w=Object(i.a)(g,2),y=w[0],C=w[1],k=Object(a.useMemo)((function(){return{fetchedPosts:y,setFetchedPosts:C}}),[y,C]),_=d(),S=Object(i.a)(_,2),T=S[0],A=S[1],z=Object(a.useMemo)((function(){return{userSettings:T,setUserSettings:A}}),[T,A]);return Object(j.jsx)(b.Provider,{value:l,children:Object(j.jsx)(u.Provider,{value:v,children:Object(j.jsx)(h.Provider,{value:k,children:Object(j.jsx)(x.Provider,{value:z,children:t})})})})},m=n(22),p=n(148),f=n(317),v=n(294),g=n(295),w=n(296),y=n(297),C=n(319),k=n(326),_=n(327),S=n(300),T=n(318),A=n(308),z=n(271),E=n(272),D=n(273),F=n(274),P=["/news","/calculators","/answers","/settings"],R=["answers","calculator","expressions"],U=window.hostname+"/api-v1",I=n(29),B=n(149),M=n(260),W=n(320),N=["value","items","setTabValue","icon","label","disabled"],H=function(e){var t=e.value,n=e.items,r=e.setTabValue,c=e.icon,s=e.label,o=e.disabled,d=Object(I.a)(e,N),b=Object(m.h)(),u=Object(a.useState)(null),h=Object(i.a)(u,2),x=h[0],O=h[1],p=Boolean(x);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(T.a,Object(l.a)(Object(l.a)({label:s},d),{},{icon:c,iconPosition:"start",id:"id_menu","aria-controls":"aria_menu",onClick:function(e){O(e.currentTarget)},"aria-haspopup":"true","aria-expanded":p?"true":void 0,disabled:o})),Object(j.jsx)(B.a,{id:"aria_menu",anchorEl:x,open:p,onClose:function(){O(null)},TransitionComponent:M.a,children:n.map((function(e){return Object(j.jsx)(W.a,{onClick:function(){var n;n=e.sub_route,O(null),b("".concat(t,"/").concat(n)),r(t)},children:e.label},e.label)}))})]})},L=n(325),$=n(312),V=n(93),G=n(267),K=n(268),Y=n(266),J=n(269),q=n(270),X=n(321),Q=n(265),Z=n(322),ee=n(323),te=n(324),ne=n(311),ae=["title","message","confirmText","color","disabled","action","children"],re=function(e){var t=e.title,n=void 0===t?"add <title> prop":t,r=e.message,c=void 0===r?"add <message> prop":r,s=e.confirmText,o=void 0===s?"add <confirmText> prop":s,d=e.color,b=void 0===d?"error":d,u=e.disabled,h=void 0!==u&&u,x=e.action,O=e.children,m=Object(I.a)(e,ae),p=Object(a.useState)(!1),f=Object(i.a)(p,2),v=f[0],g=f[1],w=function(){g(!1)},y=h?{}:{onClick:function(){g(!0)}};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",Object(l.a)(Object(l.a)({},y),{},{children:O})),Object(j.jsxs)(X.a,Object(l.a)(Object(l.a)({},m),{},{open:v,onClose:w,"aria-labelledby":"title","aria-describedby":"description",children:[Object(j.jsx)(Q.a,{id:"title",children:n}),Object(j.jsx)(Z.a,{children:Object(j.jsx)(ee.a,{id:"description",children:c})}),Object(j.jsxs)(te.a,{children:[Object(j.jsx)(ne.a,{onClick:w,children:"Cancel "}),Object(j.jsxs)(ne.a,{onClick:function(e){g(!1);try{x(e)}catch(t){console.error("add <action> prop, or: ".concat(t))}},color:b,autoFocus:!0,children:[o," "]})]})]}))]})},ce=["setTabValue","disabled"],se=function(e,t){return e&&t?[e.first_name[0],e.last_name[0]].join("").toUpperCase():Object(j.jsx)(Y.a,{})},ie=function(e){var t=Object(a.useContext)(b),n=t.user,r=t.setUser,c=Object(a.useContext)(u),s=c.auth,o=c.setAuth,d=e.setTabValue,h=e.disabled,x=Object(I.a)(e,ce),O=Object(m.g)(),p=Object(m.h)(),f="account"===O.pathname.split("/")[1]?"secondary.main":"primary.main";h&&(f="default");var v=Object(a.useState)(null),g=Object(i.a)(v,2),w=g[0],y=g[1],C=Boolean(w);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(L.a,Object(l.a)(Object(l.a)({variant:"outlined"},x),{},{id:"id_menu","aria-controls":"aria_menu",onClick:function(e){y(e.currentTarget)},"aria-haspopup":"true","aria-expanded":C?"true":void 0,color:"secondary",disabled:h,children:Object(j.jsx)($.a,{sx:{bgcolor:f},children:se(n,s)})})),Object(j.jsxs)(B.a,{id:"aria_menu",anchorEl:w,open:C,onClose:function(){y(null)},TransitionComponent:M.a,children:[Object(j.jsx)(V.a,{variant:"overline",color:"secondary",marginX:2,mb:1,children:[null===n||void 0===n?void 0:n.first_name,null===n||void 0===n?void 0:n.last_name].join(" ")}),Object(j.jsx)(V.a,{variant:"subtitle1",color:"GrayText",marginX:2,mb:1,children:null===n||void 0===n?void 0:n.email}),Object(j.jsx)(G.a,{}),Object(j.jsxs)(W.a,{onClick:function(){y(null),d(!1),p("/account")},children:[Object(j.jsx)(K.a,{children:Object(j.jsx)(J.a,{})}),"Options"]}),Object(j.jsx)(re,{title:"LOGOUT",message:"Confirm logout?",confirmText:"Logout",action:function(){y(null),r(null),o(!1),localStorage.removeItem("user"),localStorage.removeItem("settings")},children:Object(j.jsxs)(W.a,{children:[Object(j.jsx)(K.a,{children:Object(j.jsx)(q.a,{})}),"Logout"]})})]})]})},oe=n(276),le=n(275),de=["setTabValue","disabled","user"],je=function(e){var t=e.setTabValue,n=e.disabled,r=e.user,c=Object(I.a)(e,de),s=[{label:"DIVIDER",icon:z.a,key:0},{label:"News",route:P[0]},{label:"DIVIDER",icon:E.a,key:1},{label:"Calculators",route:"".concat(P[1])},{label:"DIVIDER",icon:D.a,key:2},{label:"Answers",route:P[2]},{label:"DIVIDER",icon:F.a,key:3},{label:"Answers Settings",route:"".concat(P[3],"/").concat(R[0])}];(null===r||void 0===r?void 0:r.is_admin)&&s.push({label:"Calculator Settings",route:"".concat(P[3],"/").concat(R[1])}),s.push({label:"Expressions Settings",route:"".concat(P[3],"/").concat(R[2])});var o=Object(m.h)(),d=Object(a.useState)(null),b=Object(i.a)(d,2),u=b[0],h=b[1],x=Boolean(u);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(L.a,Object(l.a)(Object(l.a)({"aria-label":"Go to...",onClick:function(e){h(e.currentTarget)}},c),{},{sx:{display:{xs:"inline-flex",sm:"none"}},disabled:n,children:Object(j.jsx)(le.a,{})})),Object(j.jsx)(B.a,{id:"aria_menu",anchorEl:u,open:x,onClose:function(){h(null)},TransitionComponent:M.a,children:s.map((function(e){return"DIVIDER"===e.label?Object(j.jsx)(G.a,{textAlign:"right",children:Object(j.jsx)(e.icon,{})},e.key):Object(j.jsxs)(W.a,{onClick:function(){var n;n=e.route,h(null),o(n),t("/".concat(n.split("/")[1]))},children:[Object(j.jsx)(K.a,{children:Object(j.jsx)(oe.a,{})}),e.label]},e.label)}))})]})},be=function(){var e=Object(a.useContext)(u).auth,t=Object(a.useContext)(b).user,n=Object(a.useContext)(h).fetchedPosts,r=!Boolean(e),c=Object(m.g)(),o=Object(a.useState)(!1),l=Object(i.a)(o,2),d=l[0],x=l[1],O=Object(a.useState)(0),p=Object(i.a)(O,2),f=p[0],v=p[1];Object(a.useMemo)((function(){var e="/".concat(c.pathname.split("/")[1]);x(!!P.includes(e)&&e)}),[c]);var g=Object(a.useMemo)((function(){var e=n.length;return d===P[0]&&v(e),0===f?"!":e-f}),[n.length,f,d]),w=[{label:"Answers Settings",sub_route:R[0]}];return(null===t||void 0===t?void 0:t.is_admin)&&w.push({label:"Calculator Settings",sub_route:R[1]}),w.push({label:"Expressions Settings",sub_route:R[2]}),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(k.a,{position:"sticky",color:"default",children:Object(j.jsxs)(_.a,{variant:"dense",sx:{justifyContent:"space-between"},children:[Object(j.jsx)(je,{setTabValue:x,disabled:r,user:t}),Object(j.jsxs)(S.a,{sx:{visibility:{xs:"hidden",sm:"visible"}},indicatorColor:"primary",onChange:function(e,t){switch(t){case P[0]:case P[1]:case P[2]:x(t)}},value:d,children:[Object(j.jsx)(T.a,{value:P[0],label:"News",icon:Object(j.jsx)(A.a,{color:"error",badgeContent:g,anchorOrigin:{vertical:"top",horizontal:"left"},children:Object(j.jsx)(z.a,{})}),iconPosition:"start",component:s.b,to:P[0],disabled:r}),Object(j.jsx)(T.a,{value:P[1],label:"Calculators",icon:Object(j.jsx)(E.a,{}),iconPosition:"start",component:s.b,to:P[1],disabled:r}),Object(j.jsx)(T.a,{value:P[2],label:"Answers",icon:Object(j.jsx)(D.a,{}),iconPosition:"start",component:s.b,to:P[2],disabled:r}),Object(j.jsx)(H,{value:P[3],label:"Settings",icon:Object(j.jsx)(F.a,{}),setTabValue:x,items:w,disabled:r})]}),Object(j.jsx)(ie,{setTabValue:x,disabled:r})]})})})},ue=n(15),he=n.n(ue),xe=n(21),Oe=n(20),me=n.n(Oe),pe=n(143),fe=n.p+"static/media/beep.6fea501e.mp3",ve=function(e){var t=e.children,n=e.setAuth,r=e.user,c=e.setUser,s=Object(a.useContext)(h),o=s.fetchedPosts,l=s.setFetchedPosts,d=Object(a.useContext)(x).userSettings,j=Object(a.useState)(null),b=Object(i.a)(j,2),u=b[0],O=b[1],p=Object(m.h)(),f=Object(a.useMemo)((function(){return{volume:parseFloat(d.notifVol)}}),[d]),v=Object(pe.a)(fe,f),g=Object(i.a)(v,1)[0];return Object(a.useEffect)((function(){var e=me.a.CancelToken.source(),t=function(){var t=Object(xe.a)(he.a.mark((function t(){var a,s,i;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,me.a.post(U+"/news/fetch-posts",{last_post:u},{cancelToken:e.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(null===r||void 0===r?void 0:r.token)}});case 3:(a=t.sent).data.newest_post?(null!==u&&a.data.posts.length>o.length&&g(),O(a.data.newest_post),l(a.data.posts)):a.data.wrn?console.warn(a.data.wrn):a.data.err&&(n(!1),console.error(a.data.err)),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),422!==(i=null===(s=t.t0.response)||void 0===s?void 0:s.status)&&401!==i||(p("/login"),c(null),n(!1),localStorage.removeItem("user"));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();r&&t();var a=setInterval((function(){(null===r||void 0===r?void 0:r.token)&&t()}),3e3);return function(){clearInterval(a),e.cancel("Leaving News page or the data is already loaded")}}),[r,u,o.length]),Object(a.useEffect)((function(){var e=me.a.CancelToken.source(),t=setInterval((function(){(null===r||void 0===r?void 0:r.token)&&Object(xe.a)(he.a.mark((function t(){var n;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,me.a.get(U+"/users/refresh-auth",{cancelToken:e.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(r.token)}});case 3:(n=t.sent).data.user&&c(n.data.user),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}),36e5);return function(){clearInterval(t),e.cancel("Abort refresh token")}}),[r,c]),Object(a.useEffect)((function(){var e=null;return function t(){var n=new Date,a=new Date(n.getFullYear(),n.getMonth(),n.getDate(),10,30)-new Date;a<0&&(a=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,10,30)-new Date),O(""),console.log("what do we have for today?"),e=setTimeout(t,a)}(),function(){clearTimeout(e)}}),[]),t},ge=n(3),we=n(333),ye=n(313),Ce=n(306),ke=n(302),_e=function(e,t,n,r,c,s){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(e){console.error(e)},o=Object(a.useContext)(b),l=o.user,d={Accept:"*/*",Authorization:"Bearer ".concat(null===l||void 0===l?void 0:l.token)};return function(){var a=Object(xe.a)(he.a.mark((function a(o){var l;return he.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.prev=0,a.t0=e,a.next="post"===a.t0?8:"put"===a.t0?12:"delete"===a.t0?16:4;break;case 4:return a.next=6,me.a.get(U+t,{headers:d});case 6:return l=a.sent,a.abrupt("break",20);case 8:return a.next=10,me.a.post(U+t,o,{headers:d});case 10:return l=a.sent,a.abrupt("break",20);case 12:return a.next=14,me.a.put(U+t,o,{headers:d});case 14:return l=a.sent,a.abrupt("break",20);case 16:return a.next=18,me.a.delete(U+t,{headers:d,data:o});case 18:return l=a.sent,a.abrupt("break",20);case 20:l.data[n]&&r(l.data),l.data.wrn&&c(l.data),l.data.err&&s(l.data),a.next=28;break;case 25:a.prev=25,a.t1=a.catch(0),i(a.t1);case 28:case"end":return a.stop()}}),a,null,[[0,25]])})));return function(e){return a.apply(this,arguments)}}()},Se=function(e,t,n,r,c){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(e){console.error(e)},i=Object(a.useContext)(b),o=i.user;Object(a.useEffect)((function(){var a={Accept:"*/*",Authorization:"Bearer ".concat(null===o||void 0===o?void 0:o.token)},i=me.a.CancelToken.source();return Object(xe.a)(he.a.mark((function o(){var l;return he.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,me.a.get(U+e,{cancelToken:i.token,headers:a});case 3:(l=o.sent).data[t]&&n(l.data),l.data.wrn&&r(l.data),l.data.err&&c(l.data),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(0),s(o.t0);case 12:case"end":return o.stop()}}),o,null,[[0,9]])})))(),function(){i.cancel("useAxios: canceled")}}),[o])},Te=n(328),Ae=n(329),ze=n(278),Ee=n(314),De=n(277),Fe=n(298),Pe=n(125),Re=function(e,t){var n,a=((e-t)/864e5).toFixed();switch(a){case"0":case"-0":n="Today";break;case"1":n="Yesterday";break;default:n="".concat(a," days ago")}return n},Ue=n(123),Ie=n.n(Ue),Be=function(e){var t,n=e.newPost,a=e.newSeverity,r=e.to,c=e.userSettings;switch(a){case"Reminder":t={icon:Object(j.jsx)(De.a,{}),severity:"success"};break;case"Normal":t={severity:"warning"};break;case"Urgent":t={severity:"error"};break;default:t={}}return Object(j.jsx)(ye.a,{item:!0,children:Object(j.jsxs)(ke.a,Object(l.a)(Object(l.a)({variant:"outlined"},t),{},{style:{fontFamily:"".concat(c.postsFontFamily,", Helvetica"),fontSize:"1em"},children:[Object(j.jsx)(Te.a,{children:Object(j.jsxs)(V.a,{variant:"h5",children:[n.title," (Preview)"]})}),Object(j.jsx)(Fe.a,{className:Ie.a.mdStyle,remarkPlugins:[Pe.a],children:"".concat(n.content,"\n\n*Own ").concat(r,"* | *").concat(new Date((new Date).setDate((new Date).getDate()+(parseInt(n.days_offset)||0))).toLocaleDateString(),"*")})]}))})},Me=function(e){var t=e.filter,n=t.severity,r=t.owner,c=e.newPost,s=e.setNewPost,o=e.newSeverity,d=e.to,u=e.contentFocus,O=e.handleMessage,m=Object(a.useRef)(null),p=Object(a.useContext)(h).fetchedPosts,f=Object(a.useContext)(b).user,v=Object(a.useContext)(x).userSettings,g=Object(a.useState)(""),w=Object(i.a)(g,2),y=w[0],C=w[1],k=Object(a.useMemo)((function(){if(p.length>0){var e;switch(n){case"Reminder":e="rem";break;case"Normal":e="nor";break;case"Urgent":e="urg";break;default:e=null}var t="from All"===r?null:null===f||void 0===f?void 0:f.email,a=p.filter((function(n){return(!e||n.severity===e)&&(!t||n.owner._id===t)})),c=[],s=(new Date).getTime(),i=s;return a.length>0?a.forEach((function(e){var t=new Date(e._id.$date),n=Re(s,new Date(t.setHours(t.getHours()+t.getTimezoneOffset()/60)));i!==n&&(c.push({divider:n}),i=n),c.push(e)})):c.push({divider:"There are no posts with those conditions"}),c}}),[p,n,r,f]),_=function(){C("")};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(ye.a,{item:!0,xs:12,md:7,children:Object(j.jsx)(Ae.a,{border:2,p:2,borderRadius:1,borderColor:"primary.main",sx:{height:"80vh"},children:Object(j.jsxs)(ze.a,{spacing:1,pr:1,ref:m,sx:{paddingBlockEnd:2,height:"75vh",overflow:"auto"},children:[(c.title||c.content)&&Object(j.jsx)(Be,{newPost:c,newSeverity:o,to:d,userSettings:v}),(null===k||void 0===k?void 0:k.length)>0?null===k||void 0===k?void 0:k.map((function(e){var t;if(e.divider&&(t=Object(j.jsx)(ye.a,{item:!0,children:Object(j.jsx)(G.a,{children:Object(j.jsx)(Ee.a,{color:"primary",label:e.divider})})},e.divider)),e._id){var n;switch(e.severity){case"rem":n={icon:Object(j.jsx)(De.a,{}),severity:"success"};break;case"nor":n={severity:"warning"};break;case"urg":n={severity:"error"};break;default:n={}}var a={};((null===f||void 0===f?void 0:f.is_admin)||e.owner._id===(null===f||void 0===f?void 0:f.email))&&(n=Object(l.a)(Object(l.a)({},n),{},{onClose:function(){C(e._id)}}),a={onClick:function(){s({title:"",content:e.content,days_offset:""}),m.current.scrollTo({top:0,behavior:"smooth"}),u()}});var r=e.content,c="**".concat(e.owner.username,"**"),i=e.is_public?"to **All**":"just for **Me**",o=new Date(e._id.$date).toLocaleDateString();t=Object(j.jsx)(ye.a,{item:!0,children:Object(j.jsxs)(ke.a,Object(l.a)(Object(l.a)({variant:"filled"},n),{},{style:{fontFamily:"".concat(v.postsFontFamily,", Helvetica"),fontSize:"1em"},children:[Object(j.jsx)(Te.a,{children:Object(j.jsx)(V.a,{variant:"h5",children:e.title})}),Object(j.jsx)("div",Object(l.a)(Object(l.a)({},a),{},{children:Object(j.jsx)(Fe.a,{className:Ie.a.mdStyle,remarkPlugins:[Pe.a],children:"".concat(r,"\n\n*").concat(c," ").concat(i,"* | *").concat(o,"*")})}))]}))},e._id.$date)}return t})):Object(j.jsx)(V.a,{variant:"h4",color:"secondary",children:"Loading..."})]})})}),Object(j.jsxs)(X.a,{open:Boolean(y),onClose:_,"aria-labelledby":"title","aria-describedby":"description",children:[Object(j.jsx)(Q.a,{id:"title",children:"Delete"}),Object(j.jsx)(Z.a,{children:Object(j.jsx)(ee.a,{id:"description",children:"Confirm delete post?"})}),Object(j.jsxs)(te.a,{children:[Object(j.jsx)(ne.a,{onClick:_,children:"Cancel "}),Object(j.jsx)(ne.a,{onClick:function(){return e=y,Object(xe.a)(he.a.mark((function t(){var n;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,me.a.delete(U+"/news/delete-post",{headers:{Accept:"*/*",Authorization:"Bearer ".concat(null===f||void 0===f?void 0:f.token)},data:e});case 2:(n=t.sent).data.msg&&O(n.data.msg,"info"),n.data.wrn&&O(n.data.wrn,"warning"),n.data.err&&O(n.data.err,"error");case 6:case"end":return t.stop()}}),t)})))(),void C("");var e},color:"error",autoFocus:!0,children:"DELETE "})]})]})]})},We=n(301),Ne=n(279),He=n(330),Le=n(304),$e=["options","option","setOption"],Ve=function(e){var t=e.options,n=e.option,a=e.setOption,r=Object(I.a)(e,$e);return Object(j.jsx)(He.a,Object(l.a)(Object(l.a)({fullWidth:!0},r),{},{children:Object(j.jsx)(Le.a,{size:"small",value:n,onChange:function(e){a(e.target.value)},children:t.map((function(e){return Object(j.jsx)(W.a,{value:e,children:e},e)}))})}))},Ge=function(e){var t=e.filter,n=t.severity,a=t.setSeverity,r=t.owner,c=t.setOwner,s=e.newPost,i=e.newSeverity,o=e.setNewSeverity,d=e.to,b=e.setTo,u=e.contentRef,h=e.handleChange,x=e.handleSend,O=e.send_props;return Object(j.jsx)(ye.a,{item:!0,xs:12,md:5,children:Object(j.jsx)(C.a,{elevation:3,children:Object(j.jsx)(Ae.a,{sx:{paddingBlockEnd:2,height:"80vh"},border:2,p:2,borderRadius:1,borderColor:"secondary.main",children:Object(j.jsxs)(ye.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"center",sx:{height:"75vh",overflow:"auto"},children:[Object(j.jsx)(ye.a,{item:!0,xs:6,children:Object(j.jsx)(Ve,{options:["All","Urgent","Normal","Reminder"],option:n,setOption:a})}),Object(j.jsx)(ye.a,{item:!0,xs:6,children:Object(j.jsx)(Ve,{options:["from All","Mine only"],option:r,setOption:c})}),Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(G.a,{children:Object(j.jsx)(V.a,{color:"secondary",children:"CREATE NEW POST"})})}),Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(We.a,{fullWidth:!0,size:"small",label:"TITLE",name:"title",value:s.title,onChange:h})}),Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(We.a,{inputRef:u,fullWidth:!0,rows:12,multiline:!0,size:"small",label:"CONTENT (Markdown Supported)",name:"content",value:s.content,onChange:h})}),Object(j.jsx)(ye.a,{item:!0,xs:7,md:3,children:Object(j.jsx)(Ve,{options:["Urgent","Normal","Reminder"],option:i,setOption:o})}),Object(j.jsx)(ye.a,{item:!0,xs:5,md:3,children:Object(j.jsx)(Ve,{options:["to Me","to All"],option:d,setOption:b})}),Object(j.jsx)(ye.a,{item:!0,xs:7,md:3,children:Object(j.jsx)(We.a,{fullWidth:!0,label:"within days",size:"small",name:"days_offset",type:"number",inputProps:{min:"0",max:"7",step:"1"},value:s.days_offset,onChange:h})}),Object(j.jsx)(ye.a,{item:!0,xs:5,md:3,children:Object(j.jsx)(ne.a,Object(l.a)(Object(l.a)({variant:"contained",fullWidth:!0,size:"small",onClick:x},O),{},{endIcon:Object(j.jsx)(Ne.a,{}),children:Object(j.jsx)(V.a,{variant:"h6",children:"Send"})}))})]})})})})},Ke=function(e){var t=e.filter,n=t.severity,a=t.setSeverity,r=t.owner,c=t.setOwner;return Object(j.jsx)(ye.a,{item:!0,xs:12,md:5,children:Object(j.jsx)(C.a,{elevation:3,children:Object(j.jsx)(Ae.a,{sx:{paddingBlockEnd:2},border:2,p:2,borderRadius:1,borderColor:"secondary.main",children:Object(j.jsxs)(ye.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"center",children:[Object(j.jsx)(ye.a,{item:!0,xs:6,children:Object(j.jsx)(Ve,{options:["All","Urgent","Normal","Reminder"],option:n,setOption:a})}),Object(j.jsx)(ye.a,{item:!0,xs:6,children:Object(j.jsx)(Ve,{options:["from All","Mine only"],option:r,setOption:c})})]})})})})},Ye=function(e){var t=e.newPost,n=e.newSeverity,a=e.setNewSeverity,r=e.to,c=e.setTo,s=e.handleChange,i=e.handleSend,o=e.send_props;return Object(j.jsx)(ye.a,{item:!0,xs:12,md:5,children:Object(j.jsx)(C.a,{elevation:3,children:Object(j.jsx)(Ae.a,{sx:{paddingBlockEnd:2,height:"60vh"},border:2,p:2,borderRadius:1,borderColor:"secondary.main",children:Object(j.jsxs)(ye.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"center",sx:{height:"55vh",overflow:"auto"},children:[Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(G.a,{children:Object(j.jsx)(V.a,{color:"secondary",children:"CREATE NEW POST"})})}),Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(We.a,{fullWidth:!0,size:"small",label:"TITLE",name:"title",value:t.title,onChange:s})}),Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(We.a,{fullWidth:!0,rows:8,multiline:!0,size:"small",label:"CONTENT (Markdown Supported)",name:"content",value:t.content,onChange:s})}),Object(j.jsx)(ye.a,{item:!0,xs:7,md:3,children:Object(j.jsx)(Ve,{options:["Urgent","Normal","Reminder"],option:n,setOption:a})}),Object(j.jsx)(ye.a,{item:!0,xs:5,md:3,children:Object(j.jsx)(Ve,{options:["to Me","to All"],option:r,setOption:c})}),Object(j.jsx)(ye.a,{item:!0,xs:7,md:3,children:Object(j.jsx)(We.a,{fullWidth:!0,label:"within days",size:"small",name:"days_offset",type:"number",inputProps:{min:"0",max:"7",step:"1"},value:t.days_offset,onChange:s})}),Object(j.jsx)(ye.a,{item:!0,xs:5,md:3,children:Object(j.jsx)(ne.a,Object(l.a)(Object(l.a)({variant:"contained",fullWidth:!0,size:"small",onClick:i},o),{},{endIcon:Object(j.jsx)(Ne.a,{}),children:Object(j.jsx)(V.a,{variant:"h6",children:"Send"})}))})]})})})})},Je=function(){var e,t=Object(a.useRef)(null),n=Object(a.useState)("All"),r=Object(i.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)("from All"),d=Object(i.a)(o,2),b=d[0],u=d[1],h=Object(a.useState)({msg:"",vnt:""}),x=Object(i.a)(h,2),O=x[0],m=x[1],p=Object(a.useState)(!1),f=Object(i.a)(p,2),v=f[0],g=f[1],w=Object(a.useState)({title:"",content:"",days_offset:""}),y=Object(i.a)(w,2),C=y[0],k=y[1],_=Object(a.useState)("Normal"),S=Object(i.a)(_,2),T=S[0],A=S[1],z=Object(a.useState)("to Me"),E=Object(i.a)(z,2),D=E[0],F=E[1],P=function(){t.current.focus()},R=function(){switch(T){case"Reminder":return"rem";default:case"Normal":return"nor";case"Urgent":return"urg"}},U=function(){switch(D){default:case"to Me":return!1;case"to All":return!0}},I=function(e,t){m({msg:e,vnt:t}),g(!0)},B=_e("post","/news/create-post","msg",(function(e){I(e.msg,"success"),k({title:"",content:"",days_offset:""}),A("Normal"),F("to Me")}),(function(e){I(e.wrn,"warning")}),(function(e){I(e.err,"error")}));switch(T){case"Reminder":e={color:"success"};break;case"Normal":e={color:"warning"};break;case"Urgent":e={color:"error"};break;default:e={}}var M={severity:c,setSeverity:s,owner:b,setOwner:u},W={newPost:C,newSeverity:T,setNewSeverity:A,to:D,setTo:F,handleChange:function(e){var t=e.target,n=t.name,a=t.value;k(Object(l.a)(Object(l.a)({},C),{},Object(ge.a)({},n,a)))},handleSend:function(){if(C.title)if(C.content){var e=parseInt(C.days_offset||0);0>e||7<e?I('"within days" must be between 0 and 7',"error"):B({title:C.title,content:C.content,severity:R(),days_offset:e,is_public:U(),localeTimeOffset:(new Date).getTimezoneOffset()/60})}else I("You must provide a Content","error");else I("You must provide a Title","error")},send_props:e};return Object(j.jsxs)(we.a,{maxWidth:"xl",children:[Object(j.jsxs)(ye.a,{container:!0,spacing:1,margin:0,pt:3,sx:{display:{xs:"none",md:"flex"}},children:[Object(j.jsx)(Ge,Object(l.a)({filter:M,contentRef:t},W)),Object(j.jsx)(Me,{filter:{severity:c,owner:b},newPost:C,setNewPost:k,newSeverity:T,to:D,contentFocus:P,handleMessage:I})]}),Object(j.jsxs)(ye.a,{container:!0,spacing:1,margin:0,pt:1,sx:{display:{xs:"flex",md:"none"}},children:[Object(j.jsx)(Ke,{filter:M}),Object(j.jsx)(Me,{filter:{severity:c,owner:b},newPost:C,setNewPost:k,newSeverity:T,to:D,contentFocus:P,handleMessage:I}),Object(j.jsx)(Ye,Object(l.a)({},W))]}),Object(j.jsx)(Ce.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:v,autoHideDuration:3e3,onClose:function(){g(!1)},children:Object(j.jsx)(ke.a,{variant:"filled",color:O.vnt,children:O.msg})})]})},qe=n(334),Xe=n(336),Qe=n(17),Ze=n(316),et=n(303),tt=n(335),nt=n(280),at=n(281),rt=n(282),ct=function(e){var t=e.handleMessage,n=e.history,r=e.setHistory,c=Object(a.useContext)(b).user,s=Object(a.useState)({first:"",second:"",third:""}),o=Object(i.a)(s,2),d=o[0],u=o[1],h=Object(a.useState)("pri"),x=Object(i.a)(h,2),O=x[0],m=x[1],p=Object(a.useState)("add"),f=Object(i.a)(p,2),v=f[0],g=f[1],w=Object(a.useState)(""),y=Object(i.a)(w,2),k=y[0],_=y[1],S=Object(a.useRef)(null),T=Object(a.useRef)(null),A=Object(a.useRef)(null),z=function(e){var t=e.target,n=t.name,a=t.value;u(Object(l.a)(Object(l.a)({},d),{},Object(ge.a)({},n,a)))},D=function(e,a,s){for(var o=0,j=Object.entries(a);o<j.length;o++){var b=Object(i.a)(j[o],2),h=b[0];if(!b[1])return void t("The ".concat(h," field is required"),"error")}a=Object(l.a)(Object(l.a)({},a),{},{sign:O,operation:v}),Object(xe.a)(he.a.mark((function i(){var o;return he.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,me.a.post(U+e,a,{headers:{Accept:"*/*",Authorization:"Bearer ".concat(c.token)}});case 3:void 0!==(o=i.sent).data.result&&(r([{_id:{$date:(new Date).getTime()},calculation:o.data.calculation,footnote:o.data.footnote}].concat(Object(Qe.a)(n))),u(Object(l.a)(Object(l.a)({},d),{},Object(ge.a)({},s,o.data.result))),a.expression?(Object(xe.a)(he.a.mark((function e(){return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.clipboard.writeText(o.data.result);case 1:case"end":return e.stop()}}),e)})))(),t("".concat(o.data.result," Copied"),"success")):(_(o.data.result),Object(xe.a)(he.a.mark((function e(){return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.clipboard.writeText("$".concat(o.data.result));case 1:case"end":return e.stop()}}),e)})))(),t("$".concat(o.data.result," Copied"),"success"))),o.data.err&&t(o.data.err,"error"),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(0),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[0,8]])})))()},F=function(){var e={second:d.second,third:d.third};D("/calculator/get-first-term",e,"first"),A.current.focus()},P=function(){var e={first:d.first,third:d.third};D("/calculator/get-second-term",e,"second"),A.current.focus()},R=function(){var e={first:d.first,second:d.second};D("/calculator/get-result",e,"third"),A.current.focus()},I=function(){D("/calculator/resolve-expression",{expression:k})},B=function(){""===d.first&&""!==d.second&&""!==d.third?F():""!==d.first&&""===d.second&&""!==d.third?P():""!==d.first&&""!==d.second&&""===d.third?R():""!==d.first&&""!==d.second&&""!==d.third?t("impossible to know which operation to perform!","warning"):t("You must provide 2 fields at least!","warning")};return Object(j.jsx)(ye.a,{item:!0,xs:12,md:7,children:Object(j.jsx)(C.a,{elevation:5,sx:{borderRadius:3},children:Object(j.jsx)(Ae.a,{sx:{paddingBlockEnd:2,minHeight:"65vh"},p:2,onKeyPress:function(e){"q"===e.key&&A.current.focus()},children:Object(j.jsxs)(ye.a,{container:!0,spacing:3,align:"center",pr:2,sx:{minHeight:"60vh",overflow:"auto"},children:[Object(j.jsx)(ye.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(He.a,{sx:{width:"100%"},component:"fieldset",children:Object(j.jsx)(Ze.a,{name:"sign",value:O,onChange:function(e){var t=e.target.value;m(t),u(Object(l.a)(Object(l.a)({},d),{},{first:"",third:""})),S.current.focus()},children:Object(j.jsx)(C.a,{children:Object(j.jsxs)(ye.a,{item:!0,px:3,children:[Object(j.jsx)(qe.a,{value:"pri",control:Object(j.jsx)(et.a,{}),label:Object(j.jsx)(V.a,{variant:"h5",color:"primary",children:"$"})}),Object(j.jsx)(qe.a,{value:"per",control:Object(j.jsx)(et.a,{color:"secondary"}),label:Object(j.jsx)(V.a,{variant:"h5",color:"secondary",children:"%"})})]})})})})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(He.a,{sx:{width:"100%"},component:"fieldset",children:Object(j.jsx)(Ze.a,{name:"operation",value:v,onChange:function(e){var t=e.target.value;g(t),u(Object(l.a)(Object(l.a)({},d),{},{second:""})),T.current.focus()},children:Object(j.jsx)(C.a,{children:Object(j.jsxs)(ye.a,{px:3,children:[Object(j.jsx)(qe.a,{value:"add",control:Object(j.jsx)(et.a,{}),label:Object(j.jsx)(V.a,{variant:"h4",color:"primary",children:"+"})}),Object(j.jsx)(qe.a,{value:"sub",control:Object(j.jsx)(et.a,{color:"secondary"}),label:Object(j.jsx)(V.a,{variant:"h4",color:"secondary",children:"-"})})]})})})})}),Object(j.jsx)(ye.a,{item:!0,xs:4,children:Object(j.jsx)(V.a,{variant:"h5",color:"initial",sx:{display:{xs:"none",md:"flex"}},children:"complete calculator"})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(We.a,{fullWidth:!0,size:"small",type:"number",autoFocus:!0,label:"pri"===O?"Price":"Percentage",InputProps:{inputProps:{min:"0",step:"10"},startAdornment:Object(j.jsx)(tt.a,{position:"start",children:Object(j.jsx)(V.a,{variant:"h5",color:"pri"===O?"primary":"secondary",children:"pri"===O?"$":""})}),endAdornment:Object(j.jsx)(tt.a,{position:"start",children:Object(j.jsx)(V.a,{variant:"h5",color:"secondary",children:"pri"===O?"":"%"})})},inputRef:S,name:"first",value:d.first,onChange:z,onKeyPress:function(e){"Enter"===e.key&&B()}})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(We.a,{fullWidth:!0,label:"day/month/year | Percentage",size:"small",InputProps:{startAdornment:Object(j.jsx)(tt.a,{position:"start",children:Object(j.jsx)(V.a,{variant:"h4",color:"add"===v?"primary":"secondary",children:"add"===v?"+":"-"})}),endAdornment:Object(j.jsx)(tt.a,{position:"start",children:Object(j.jsx)(V.a,{variant:"h5",color:"inherit",children:"%"})})},inputRef:T,name:"second",value:d.second,onChange:z,onKeyPress:function(e){"Enter"===e.key&&B()}})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(We.a,{fullWidth:!0,label:"Result",type:"number",size:"small",InputProps:{inputProps:{min:"0",step:"10"},startAdornment:Object(j.jsx)(tt.a,{position:"start",children:Object(j.jsx)(V.a,{variant:"h5",color:"inherit",children:"pri"===O?"= $":"="})}),endAdornment:Object(j.jsx)(tt.a,{position:"start",children:Object(j.jsx)(V.a,{variant:"h5",color:"inherit",children:"pri"===O?"":"%"})})},name:"third",value:d.third,onChange:z,onKeyPress:function(e){"Enter"===e.key&&B()}})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(ne.a,{fullWidth:!0,onClick:F,size:"large",sx:{minHeight:"100%"},variant:"contained",color:"success",endIcon:Object(j.jsx)(nt.a,{}),children:Object(j.jsx)(V.a,{variant:"body1",children:"GET"})})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(ne.a,{fullWidth:!0,onClick:P,size:"large",sx:{minHeight:"100%"},variant:"contained",color:"success",endIcon:Object(j.jsx)(at.a,{}),children:Object(j.jsx)(V.a,{variant:"body1",children:"GET"})})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(ne.a,{fullWidth:!0,onClick:R,size:"large",sx:{minHeight:"100%"},variant:"contained",color:"success",endIcon:Object(j.jsx)(rt.a,{}),children:Object(j.jsx)(V.a,{variant:"body1",children:"GET"})})}),Object(j.jsx)(ye.a,{item:!0,xs:12,py:2,children:Object(j.jsx)(G.a,{})}),Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(We.a,{fullWidth:!0,label:"Evaluate Expression",size:"small",inputRef:A,name:"expression",InputProps:{style:{fontFamily:"monospace",fontSize:20},startAdornment:Object(j.jsx)(tt.a,{position:"start",children:Object(j.jsx)(V.a,{variant:"h4",color:"primary",children:">>>"})})},InputLabelProps:{style:{fontFamily:"monospace",fontSize:20}},value:k,onChange:function(e){var t=e.target.value;_(t)},onKeyPress:function(e){"Enter"===e.key&&I()}})}),Object(j.jsx)(ye.a,{item:!0,xs:4}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(ne.a,{fullWidth:!0,onClick:function(){u({first:"",second:"",third:""}),_("")},size:"large",sx:{minHeight:"100%"},variant:"contained",color:"error",endIcon:Object(j.jsx)(E.a,{}),children:Object(j.jsx)(V.a,{variant:"body1",children:"Clear"})})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(ne.a,{fullWidth:!0,onClick:I,size:"large",sx:{minHeight:"100%"},variant:"contained",color:"primary",endIcon:Object(j.jsx)(E.a,{}),children:Object(j.jsx)(V.a,{variant:"body1",children:"Evaluate"})})})]})})})})},st=function(e){var t=e.handleMessage,n=e.history,r=e.setHistory,c=Object(a.useContext)(b).user,s=Object(a.useState)({price:"",str_date:""}),o=Object(i.a)(s,2),d=o[0],u=o[1],h=function(e){var t=e.target,n=t.name,a=t.value;u(Object(l.a)(Object(l.a)({},d),{},Object(ge.a)({},n,a)))},x=function(){for(var e=0,a=Object.entries(d);e<a.length;e++){var s=Object(i.a)(a[e],2),o=s[0];if(!s[1])return void t("The ".concat(o," field is required"),"error")}Object(xe.a)(he.a.mark((function e(){var a;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.a.post(U+"/calculator/price-add-percent",Object(l.a)(Object(l.a)({},d),{},{str_date:d.str_date.split("-").reverse().join("/")}),{headers:{Accept:"*/*",Authorization:"Bearer ".concat(c.token)}});case 3:void 0!==(a=e.sent).data.result&&(r([{_id:{$date:(new Date).getTime()},calculation:a.data.calculation,footnote:a.data.footnote}].concat(Object(Qe.a)(n))),Object(xe.a)(he.a.mark((function e(){return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.clipboard.writeText("$".concat(a.data.result));case 1:case"end":return e.stop()}}),e)})))(),t("$".concat(a.data.result," Copied"),"success")),a.data.err&&t(a.data.err,"error"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()};return Object(j.jsx)(ye.a,{item:!0,xs:12,md:7,children:Object(j.jsx)(C.a,{elevation:5,sx:{borderRadius:3},children:Object(j.jsx)(Ae.a,{sx:{paddingBlockEnd:2,minHeight:"30vh"},p:2,children:Object(j.jsxs)(ye.a,{container:!0,spacing:3,align:"center",pr:2,sx:{minHeight:"25vh",overflow:"auto"},children:[Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(V.a,{variant:"h5",color:"initial",children:"basic calculator"})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(We.a,{fullWidth:!0,label:"Price",autoFocus:!0,type:"number",name:"price",InputProps:{inputProps:{min:"0",step:"10"},startAdornment:Object(j.jsx)(tt.a,{position:"start",children:Object(j.jsx)(V.a,{variant:"h5",color:"primary",children:"$"})})},value:d.price,onChange:h,onKeyPress:function(e){"Enter"===e.key&&x()}})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(We.a,{fullWidth:!0,label:"Date",type:"date",InputProps:{startAdornment:Object(j.jsx)(tt.a,{position:"start",children:Object(j.jsx)(V.a,{variant:"body1",color:"primary",children:"from"})})},name:"str_date",value:d.str_date,onChange:h,onKeyPress:function(e){"Enter"===e.key&&x()}})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(ne.a,{fullWidth:!0,onClick:x,size:"large",sx:{minHeight:"75%"},variant:"contained",color:"success",endIcon:Object(j.jsx)(E.a,{}),children:Object(j.jsx)(V.a,{variant:"body1",children:"GET PRICE"})})})]})})})})},it=n(299),ot=function(e){var t=e.history,n=Object(a.useMemo)((function(){var e=[],n=(new Date).getTime(),a=n;return t.length>0?t.forEach((function(t){var r=new Date(t._id.$date),c=Re(n,new Date(r.setHours(r.getHours()+r.getTimezoneOffset()/60)));a!==c&&(e.push({divider:c}),a=c),e.push(t)})):e.push({divider:"There are no previous calculations"}),e}),[t]);return Object(j.jsx)(ye.a,{item:!0,xs:12,md:5,children:Object(j.jsx)(Ae.a,{sx:{paddingBlockEnd:2,height:"75vh",backgroundColor:"info.main"},borderRadius:3,p:2,children:Object(j.jsxs)(ye.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"top",alignContent:"flex-start",sx:{height:"70vh",overflow:"auto"},children:[Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(V.a,{variant:"h5",color:"initial",children:"Result / History"})}),n.map((function(e,t){var n,a;(e.divider&&(n=Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(G.a,{children:Object(j.jsx)(Ee.a,{color:"warning",size:"small",label:e.divider})})},e.divider)),e._id)&&(1!==t&&(a={color:"info.light"}),n=Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(C.a,{elevation:7,children:Object(j.jsx)(it.a,{title:e.footnote,placement:"right",disableInteractive:!0,arrow:!0,followCursor:!0,children:Object(j.jsx)(V.a,Object(l.a)(Object(l.a)({variant:"h6"},a),{},{sx:{whiteSpace:"pre-line"},children:e.calculation}))})})},e._id.$date));return n}))]})})})},lt=function(){var e=Object(a.useContext)(b).user,t=Object(a.useContext)(x).userSettings,n=Object(a.useState)({msg:"",vnt:""}),r=Object(i.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)([]),l=Object(i.a)(o,2),d=l[0],u=l[1],h=Object(a.useState)(!1),O=Object(i.a)(h,2),m=O[0],p=O[1],f=Object(a.useState)(Boolean(null===t||void 0===t?void 0:t.calculator)),v=Object(i.a)(f,2),g=v[0],w=v[1];Object(a.useEffect)((function(){var t=me.a.CancelToken.source();return Object(xe.a)(he.a.mark((function n(){var a;return he.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,me.a.get(U+"/calculator/get-history",{cancelToken:t.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(e.token)}});case 2:(a=n.sent).data.hist&&u(a.data.hist),a.data.msg,a.data.err&&console.error(a.data.err);case 6:case"end":return n.stop()}}),n)})))(),function(){t.cancel()}}),[e,u]);var y=function(e,t){s({msg:e,vnt:t}),p(!0)};return Object(j.jsxs)(we.a,{maxWidth:"xl",children:[Object(j.jsxs)(ye.a,{container:!0,spacing:1,margin:0,pt:3,children:[Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(qe.a,{labelPlacement:"start",label:Object(j.jsx)(V.a,{px:1,children:"Calculator"}),control:Object(j.jsx)(qe.a,{control:Object(j.jsx)(Xe.a,{checked:g,onChange:function(e){var t=e.target.checked;w(t)}}),label:"Basic"})})}),g?Object(j.jsx)(st,{history:d,setHistory:u,handleMessage:y}):Object(j.jsx)(ct,{history:d,setHistory:u,handleMessage:y}),Object(j.jsx)(ot,{history:d,setHistory:u})]}),Object(j.jsx)(Ce.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:m,autoHideDuration:3e3,onClose:function(){p(!1)},children:Object(j.jsx)(ke.a,{variant:"filled",color:c.vnt,children:c.msg})})]})},dt=n(55),jt=n(337),bt=n(338),ut=n(339),ht=n(340),xt=n(341),Ot=n(342),mt=n(283),pt=function(e,t,n){var a=e;return void 0!==t&&t.forEach((function(e){var t=e.pattern,n=e.replacement;a=a.replace(RegExp(t,"ig"),n)})),a.replace(/{([\w\s]+)}/g,(function(e,t){return"undefined"===typeof n[t]?e:n[t]}))},ft=["children","sx"],vt=function(e){var t=e.children,n=e.sx,a=Object(I.a)(e,ft);return Object(j.jsx)(jt.a,Object(l.a)(Object(l.a)({align:"center",sx:Object(l.a)({borderColor:"#FFFFFF"},n)},a),{},{children:t}))},gt=function(e){var t=e.payMeths,n=e.sysRegex,r=e.handleMessage,c=e.priceRef,s=Object(a.useState)(""),o=Object(i.a)(s,2),l=o[0],d=o[1],b=Object(a.useMemo)((function(){var e,n="",a=[],r=Object(dt.a)(t);try{for(r.s();!(e=r.n()).done;){var c=e.value;c.card_name!==n&&(n=c.card_name,a.push({id:n,header:n}));var s=0|(parseFloat(l)*(1+c.increase/100)).toFixed(),i=(s/c.installments).toFixed();a.push({id:c._id.$oid,card_name:c.card_name,installments:c.installments,total:s,monthly:i,increase:c.increase,pos_code:c.pos_code,description:c.description})}}catch(o){r.e(o)}finally{r.f()}return a}),[t,l]);return Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(Ae.a,{sx:{paddingBlockEnd:2,height:"80vh"},border:2,p:2,borderRadius:1,borderColor:"primary.main",children:Object(j.jsxs)(ye.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"center",children:[Object(j.jsx)(ye.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(V.a,{variant:"h6",color:"primary.main",children:"Credit Cards Payments"})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(We.a,{label:"Price",size:"small",autoFocus:!0,inputProps:{min:0,step:10},InputProps:{startAdornment:Object(j.jsx)(tt.a,{position:"start",children:Object(j.jsx)(V.a,{variant:"h6",color:"primary",children:"$"})})},inputRef:c,type:"number",value:l,onChange:function(e){d(e.target.value)}})}),Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsxs)(C.a,{elevation:3,sx:{borderRadius:"15px 15px 0px 0px"},children:[Object(j.jsx)(C.a,{elevation:3,sx:{borderRadius:"15px 15px 0px 0px",backgroundColor:"warning.dark",height:40},children:Object(j.jsx)(V.a,{variant:"body1",color:"initial",p:1,children:"Card Name"})}),Object(j.jsx)(bt.a,{sx:{height:{xs:"57vh",md:"60vh"}},children:Object(j.jsxs)(ut.a,{stickyHeader:!0,size:"small",children:[Object(j.jsx)(ht.a,{children:Object(j.jsxs)(xt.a,{children:[Object(j.jsx)(vt,{width:"20%",children:"Installments"}),Object(j.jsx)(vt,{width:"20%",sx:{backgroundColor:"error.dark"},children:"Total"}),Object(j.jsx)(vt,{width:"20%",sx:{backgroundColor:"success.dark"},children:"Monthly"}),Object(j.jsx)(vt,{width:"20%",children:"Increase"}),Object(j.jsx)(vt,{width:"20%",children:"PosCode"}),Object(j.jsx)(vt,{width:"20%",children:"Copy"})]})}),Object(j.jsx)(Ot.a,{children:b.length>0?b.map((function(e){return e.header?Object(j.jsx)(xt.a,{children:Object(j.jsx)(vt,{width:"100%",colSpan:6,sx:{borderRadius:"20px 20px 0px 0px",backgroundColor:"warning.dark"},children:e.header})},e.header):Object(j.jsx)(it.a,{title:e.description,disableInteractive:!0,placement:"right",arrow:!0,followCursor:!0,children:Object(j.jsxs)(xt.a,{hover:!0,children:[Object(j.jsx)(vt,{children:e.installments}),Object(j.jsxs)(vt,{sx:{backgroundColor:"error.dark"},children:["$",e.total]}),Object(j.jsxs)(vt,{sx:{backgroundColor:"success.dark"},children:["$",e.monthly]}),Object(j.jsxs)(vt,{children:[e.increase,"%"]}),Object(j.jsxs)(vt,{children:["*",e.pos_code,"*"]}),Object(j.jsx)(vt,{children:Object(j.jsx)(L.a,{size:"small",color:"primary",onClick:function(){return function(e){Object(xe.a)(he.a.mark((function t(){return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:navigator.clipboard.writeText(pt("".concat(e.installments," ").concat(e.monthly),n));case 1:case"end":return t.stop()}}),t)})))(),r("Text Copied to Clipboard","success")}(e)},children:Object(j.jsx)(mt.a,{fontSize:"small"})})})]})},e.id)})):Object(j.jsx)(xt.a,{children:Object(j.jsx)(jt.a,{colSpan:6,align:"center",children:Object(j.jsx)(V.a,{variant:"h4",color:"primary",children:"Loading..."})})})})]})})]})})]})})})},wt=n(284),yt=function(e){var t=e.commonAnswers,n=e.ownAnswers,r=e.sysRegex,c=e.ownRegex,s=e.handleMessage,o=e.commonStackRef,d=e.ownStackRef,b=Object(a.useState)(""),u=Object(i.a)(b,2),h=u[0],x=u[1],O=Object(a.useMemo)((function(){if(t.length>0&&n.length>0)return[].concat(Object(Qe.a)(t),Object(Qe.a)(n)).map((function(e){var t=e.label,n=e.content;return Object(ge.a)({},t,n)})).reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),t)}))}),[t,n]),m=function(e){Object(xe.a)(he.a.mark((function t(){return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:navigator.clipboard.writeText(pt(e,[].concat(Object(Qe.a)(r),Object(Qe.a)(c)),O));case 1:case"end":return t.stop()}}),t)})))(),x(e),s("Formatted Text Copied to Clipboard","success")};return Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(Ae.a,{sx:{paddingBlockEnd:2,minHeight:"80vh"},border:2,p:2,borderRadius:1,borderColor:"primary.main",children:Object(j.jsxs)(ye.a,{container:!0,spacing:1,align:"center",pr:2,children:[Object(j.jsx)(ye.a,{item:!0,xs:12,md:11,children:Object(j.jsx)(We.a,{label:"Content",focused:!0,color:"warning",fullWidth:!0,multiline:!0,rows:4,InputProps:{readOnly:!0},value:h})}),Object(j.jsxs)(ye.a,{item:!0,xs:12,md:1,children:[Object(j.jsx)(it.a,{title:"Copy Formated Text",placement:"left",children:Object(j.jsx)(L.a,{color:"primary",onClick:function(){Object(xe.a)(he.a.mark((function e(){return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.clipboard.writeText(pt(h,[].concat(Object(Qe.a)(r),Object(Qe.a)(c)),O));case 1:case"end":return e.stop()}}),e)})))(),s("Formatted Text Copied to Clipboard","success")},children:Object(j.jsx)(mt.a,{})})}),Object(j.jsx)(it.a,{title:"Copy Raw Text",placement:"left",children:Object(j.jsx)(L.a,{color:"info",onClick:function(){Object(xe.a)(he.a.mark((function e(){return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.clipboard.writeText(h);case 1:case"end":return e.stop()}}),e)})))(),s("Raw Text Copied to Clipboard","success")},children:Object(j.jsx)(mt.a,{})})}),Object(j.jsx)(it.a,{title:"Unselect Answer",placement:"left",children:Object(j.jsx)(L.a,{color:"warning",onClick:function(){return x("")},children:Object(j.jsx)(wt.a,{})})})]}),Object(j.jsxs)(ye.a,{item:!0,xs:12,md:6,children:[Object(j.jsx)(V.a,{variant:"h6",children:"Commons"}),Object(j.jsx)(ze.a,{spacing:1,p:1,sx:{paddingBlockEnd:2,height:"49vh",overflow:"auto"},children:t.length>0?t.map((function(e,t){var n=0===t?{ref:o}:{};return Object(j.jsx)(it.a,{title:"Select and Copy Formatted Text",followCursor:!0,enterDelay:1e3,children:Object(j.jsx)(ne.a,Object(l.a)(Object(l.a)({fullWidth:!0,variant:"contained"},n),{},{sx:{color:"#FFFFFF",background:e.color,"&:hover":{background:e.color,filter:"brightness(90%)"}},onClick:function(){return m(e.content)},children:e.label}))},e._id.$oid)})):Object(j.jsx)(V.a,{variant:"h5",color:"primary",children:"Loading..."})})]}),Object(j.jsxs)(ye.a,{item:!0,xs:12,md:6,children:[Object(j.jsx)(V.a,{variant:"h6",children:"Own"}),Object(j.jsx)(ze.a,{spacing:1,p:1,sx:{paddingBlockEnd:2,height:"49vh",overflow:"auto"},children:n.length>0?n.map((function(e,t){var n=0===t?{ref:d}:{};return Object(j.jsx)(it.a,{title:"Select and Copy Formatted Text",followCursor:!0,enterDelay:1e3,children:Object(j.jsx)(ne.a,Object(l.a)(Object(l.a)({fullWidth:!0,variant:"contained",sx:{color:"#FFFFFF",background:e.color,"&:hover":{background:e.color,filter:"brightness(90%)"}}},n),{},{onClick:function(){return m(e.content)},children:e.label}))},e._id.$oid)})):Object(j.jsx)(V.a,{variant:"h5",color:"primary",children:"Loading..."})})]})]})})})},Ct=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)({msg:"",vnt:""}),s=Object(i.a)(c,2),o=s[0],l=s[1],d=Object(a.useState)([]),b=Object(i.a)(d,2),u=b[0],h=b[1],x=Object(a.useState)([]),O=Object(i.a)(x,2),m=O[0],p=O[1],f=Object(a.useState)([]),v=Object(i.a)(f,2),g=v[0],w=v[1],y=Object(a.useState)([]),C=Object(i.a)(y,2),k=C[0],_=C[1],S=Object(a.useState)([]),T=Object(i.a)(S,2),A=T[0],z=T[1],E=Object(a.useRef)(null),D=Object(a.useRef)(null),F=Object(a.useRef)(null);Se("/answers/get-all","answers",(function(e){e.answers.payment_methods&&h(e.answers.payment_methods),e.answers.common_answers&&p(e.answers.common_answers),e.answers.own_answers&&w(e.answers.own_answers),e.answers.sys_regex&&_(e.answers.sys_regex),e.answers.own_regex&&z(e.answers.own_regex)}),(function(e){P(e.wrn,"warning")}),(function(e){P(e.err,"error")}));var P=function(e,t){l({msg:e,vnt:t}),r(!0)};return Object(j.jsxs)(we.a,{maxWidth:"xl",onKeyPress:function(e){"q"===e.key&&E.current.focus(),"w"===e.key&&m.length>0&&D.current.focus(),"e"===e.key&&g.length>0&&F.current.focus()},children:[Object(j.jsxs)(ye.a,{container:!0,spacing:1,margin:0,pt:3,children:[Object(j.jsx)(ye.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(gt,{payMeths:u,sysRegex:k,handleMessage:P,priceRef:E})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(yt,{commonAnswers:m,ownAnswers:g,sysRegex:k,ownRegex:A,handleMessage:P,commonStackRef:D,ownStackRef:F})})]}),Object(j.jsx)(Ce.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n,autoHideDuration:3e3,onClose:function(){r(!1)},children:Object(j.jsx)(ke.a,{variant:"filled",color:o.vnt,sx:{whiteSpace:"pre-line"},children:o.msg})})]})},kt=function(){return Object(j.jsx)(we.a,{maxWidth:"xl",children:Object(j.jsx)(ye.a,{container:!0,spacing:1,margin:0,pt:3,children:Object(j.jsx)(m.b,{})})})},_t=n(285),St=n(286),Tt=n(287),At=n(288),zt=["children","sx"],Et=function(e){var t=e.children,n=e.sx,a=Object(I.a)(e,zt);return Object(j.jsx)(jt.a,Object(l.a)(Object(l.a)({align:"center",sx:Object(l.a)({borderColor:"#FFFFFF"},n)},a),{},{children:t}))},Dt=function(e){var t=e.payMeths,n=e.setPayMeths,r=e.handleMessage,c=Object(a.useMemo)((function(){var e,n="",a=[],r=Object(dt.a)(t);try{for(r.s();!(e=r.n()).done;){var c=e.value;c.card_name!==n&&(n=c.card_name,a.push({id:n,header:n})),a.push({id:c._id.$oid,card_name:c.card_name,installments:c.installments,increase:c.increase,pos_code:c.pos_code,description:c.description})}}catch(s){r.e(s)}finally{r.f()}return a}),[t]),s={id:"",card_name:"",installments:"",increase:"",pos_code:"",description:""},o=Object(a.useState)(""),d=Object(i.a)(o,2),b=d[0],u=d[1],h=Object(a.useState)(s),x=Object(i.a)(h,2),O=x[0],m=x[1],p=Object(a.useState)(s),f=Object(i.a)(p,2),v=f[0],g=f[1],w=function(e){var t=e.target,n=t.name,a=t.value;g(Object(l.a)(Object(l.a)({},v),{},Object(ge.a)({},n,a)))},y=_e("post","/answers/create-payment-method","payment_methods",(function(e){n(e.payment_methods),r(e.msg,"success"),u(""),m(s)}),(function(e){r(e.wrn,"warning")}),(function(e){r(e.err,"error")})),k=_e("post","/answers/create-payment-method","payment_methods",(function(e){n(e.payment_methods),r(e.msg,"success"),u(""),m(s)}),(function(e){r(e.wrn,"warning")}),(function(e){r(e.err,"error")})),_=_e("put","/answers/update-credit-card","payment_methods",(function(e){n(e.payment_methods),r(e.msg,"success"),u(""),m(s)}),(function(e){r(e.wrn,"warning")}),(function(e){r(e.err,"error")})),S=_e("put","/answers/update-method","payment_methods",(function(e){n(e.payment_methods),r(e.msg,"success"),u(""),m(s)}),(function(e){r(e.wrn,"warning")}),(function(e){r(e.err,"error")})),T=_e("delete","/answers/delete-credit-card","payment_methods",(function(e){n(e.payment_methods),r(e.msg,"success"),u(""),m(s)}),(function(e){r(e.wrn,"warning")}),(function(e){r(e.err,"error")})),A=_e("delete","/answers/delete-method","payment_methods",(function(e){n(e.payment_methods),r(e.msg,"success"),u(""),m(s)}),(function(e){r(e.wrn,"warning")}),(function(e){r(e.err,"error")}));return Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(C.a,{elevation:3,children:Object(j.jsx)(Ae.a,{sx:{paddingBlockEnd:2,height:"80vh"},border:2,p:2,borderRadius:1,borderColor:"secondary.main",children:Object(j.jsxs)(ye.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"center",children:[Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(V.a,{variant:"body1",color:"secondary.main",children:"Edit Credit Cards Payments Methods"})}),Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsxs)(C.a,{elevation:3,sx:{borderRadius:"15px 15px 0px 0px"},children:[Object(j.jsx)(C.a,{elevation:3,sx:{borderRadius:"15px 15px 0px 0px",backgroundColor:"warning.main",height:40},children:Object(j.jsx)(V.a,{variant:"body1",color:"initial",p:1,children:"Card Name"})}),Object(j.jsx)(bt.a,{sx:{height:"60vh"},children:Object(j.jsxs)(ut.a,{stickyHeader:!0,size:"small",children:[Object(j.jsx)(ht.a,{children:Object(j.jsxs)(xt.a,{children:[Object(j.jsx)(Et,{width:"25%",children:"Installments"}),Object(j.jsx)(Et,{width:"25%",children:"Description"}),Object(j.jsx)(Et,{width:"25%",children:"Increase"}),Object(j.jsx)(Et,{width:"25%",children:"Code"}),Object(j.jsx)(Et,{width:"5%",children:"Upg"}),Object(j.jsx)(Et,{width:"5%",children:"Drop"}),Object(j.jsx)(Et,{width:"5%",children:"Add"})]})}),Object(j.jsxs)(Ot.a,{children:[Object(j.jsxs)(xt.a,{children:[Object(j.jsx)(Et,{width:"90%",colSpan:6,sx:{borderRadius:"50px 0px 0px 50px",backgroundColor:"success.dark"},children:Object(j.jsx)(We.a,{fullWidth:!0,label:"Card Name",size:"small",variant:"standard",value:b,color:"secondary",inputProps:{style:{textAlign:"center"}},onChange:function(e){u(e.target.value)}})}),Object(j.jsx)(Et,{sx:{borderRadius:"0px 50px 50px 0px",backgroundColor:"success.dark"},children:Object(j.jsx)(L.a,{size:"small",color:"secondary",disabled:!Boolean(b),onClick:function(){return y({method:{card_name:b,installments:0,increase:0,pos_code:0,description:"FIXME"}})},children:Object(j.jsx)(_t.a,{fontSize:"small"})})})]}),c.length>0?c.map((function(e){return O.id===e.id?e.header?Object(j.jsxs)(xt.a,{children:[Object(j.jsx)(Et,{width:"90%",colSpan:4,sx:{borderRadius:"50px 0px 0px 0px",backgroundColor:"warning.main"},children:Object(j.jsx)(We.a,{label:"Card Name",size:"small",variant:"standard",value:v.header,name:"header",onChange:w})}),Object(j.jsx)(Et,{sx:{backgroundColor:"warning.main"},children:Object(j.jsx)(re,{title:"Update",confirmText:"Update",message:"Confirm Update Payment Method?",color:"warning",action:function(){return _({name:e.id,new_name:v.header})},children:Object(j.jsx)(L.a,{size:"small",color:"error",children:Object(j.jsx)(St.a,{fontSize:"small"})})})}),Object(j.jsx)(Et,{sx:{backgroundColor:"warning.main"},children:Object(j.jsx)(L.a,{size:"small",color:"info",onClick:function(){return m(s)},children:Object(j.jsx)(wt.a,{fontSize:"small"})})}),Object(j.jsx)(Et,{sx:{borderRadius:"0px 50px 50px 0px",backgroundColor:"warning.main"},children:Object(j.jsx)(L.a,{size:"small",color:"info",onClick:function(){return k({method:{card_name:e.header,installments:0,increase:0,pos_code:0,description:"FIXME"}})},children:Object(j.jsx)(_t.a,{fontSize:"small"})})})]},e.header):Object(j.jsxs)(xt.a,{hover:!0,children:[Object(j.jsx)(Et,{children:Object(j.jsx)(We.a,{label:"Installments",size:"small",variant:"standard",name:"installments",value:v.installments,onChange:w})}),Object(j.jsx)(Et,{children:Object(j.jsx)(We.a,{label:"Description",size:"small",variant:"standard",name:"description",value:v.description,onChange:w})}),Object(j.jsx)(Et,{children:Object(j.jsx)(We.a,{label:"Increase",size:"small",variant:"standard",name:"increase",value:v.increase,onChange:w})}),Object(j.jsx)(Et,{children:Object(j.jsx)(We.a,{label:"Pos-Code",size:"small",variant:"standard",name:"pos_code",value:v.pos_code,onChange:w})}),Object(j.jsx)(Et,{children:Object(j.jsx)(re,{title:"Update",confirmText:"Update",message:"Confirm Update Payment Method?",color:"success",action:function(){return S({method:Object(l.a)({},v)})},children:Object(j.jsx)(L.a,{size:"small",color:"success",children:Object(j.jsx)(St.a,{fontSize:"small"})})})}),Object(j.jsx)(Et,{children:Object(j.jsx)(L.a,{size:"small",color:"info",onClick:function(){return m(s)},children:Object(j.jsx)(wt.a,{fontSize:"small"})})})]},e.id):e.header?Object(j.jsxs)(xt.a,{children:[Object(j.jsx)(Et,{width:"90%",colSpan:4,sx:{borderRadius:"50px 0px 0px 0px",backgroundColor:"warning.main"},children:e.header}),Object(j.jsx)(Et,{sx:{backgroundColor:"warning.main"},children:Object(j.jsx)(L.a,{size:"small",color:"error",onClick:function(){m(e),g(e)},children:Object(j.jsx)(Tt.a,{fontSize:"small"})})}),Object(j.jsx)(Et,{sx:{backgroundColor:"warning.main"},children:Object(j.jsx)(re,{title:"Drop",confirmText:"Drop",message:"Confirm Drop Payment Method?",color:"error",action:function(){return T({card_name:e.header})},children:Object(j.jsx)(L.a,{size:"small",color:"error",children:Object(j.jsx)(At.a,{fontSize:"small"})})})}),Object(j.jsx)(Et,{sx:{borderRadius:"0px 50px 50px 0px",backgroundColor:"warning.main"},children:Object(j.jsx)(L.a,{size:"small",color:"info",onClick:function(){return k({method:{card_name:e.header,installments:0,increase:0,pos_code:0,description:"FIXME"}})},children:Object(j.jsx)(_t.a,{fontSize:"small"})})})]},e.header):Object(j.jsxs)(xt.a,{hover:!0,children:[Object(j.jsx)(Et,{children:e.installments}),Object(j.jsx)(Et,{children:e.description}),Object(j.jsx)(Et,{children:e.increase}),Object(j.jsx)(Et,{children:e.pos_code}),Object(j.jsx)(Et,{children:Object(j.jsx)(L.a,{size:"small",color:"warning",onClick:function(){m(e),g(e)},children:Object(j.jsx)(Tt.a,{fontSize:"small"})})}),Object(j.jsx)(Et,{children:Object(j.jsx)(re,{title:"Drop",confirmText:"Drop",message:"Confirm Drop Payment Method?",color:"error",action:function(){return A({method:{id:e.id}})},children:Object(j.jsx)(L.a,{size:"small",color:"error",children:Object(j.jsx)(At.a,{fontSize:"small"})})})})]},e.id)})):Object(j.jsx)(xt.a,{children:Object(j.jsx)(jt.a,{colSpan:7,align:"center",children:Object(j.jsx)(V.a,{variant:"h4",color:"primary",children:"Loading..."})})})]})]})})]})})]})})})})},Ft=n(289),Pt=function(e){var t=e.user,n=e.commonAnswers,r=e.ownAnswers,c=e.setCommonAnswers,s=e.setOwnAnswers,o=e.handleMessage,d={"#1976d2":"BLUE","#0097a7":"CYAN","#388e3c":"GREEN","#fbc02d":"YELLOW","#f57c00":"ORANGE","#d32f2f":"RED","#c2185b":"PINK","#7b1fa2":"PURPLE","#5d4037":"BROWN","#455a64":"GREY"},b={id:"",label:"",color:"",content:"",common:!1,order:0},u=Object(a.useState)(b),h=Object(i.a)(u,2),x=h[0],O=h[1],m=Object(a.useState)(!1),p=Object(i.a)(m,2),f=p[0],v=p[1],g=function(e){var t=e.target,n=t.name,a=t.value,r=t.checked;O(Object(l.a)(Object(l.a)({},x),{},Object(ge.a)({},n,"common"!==n?a:r)))},w=function(e){O(e),v(!0)},y=[function(e){e.answers.common_answers&&c(e.answers.common_answers),e.answers.own_answers&&s(e.answers.own_answers),o(e.msg,"success"),O(b),v(!1)},function(e){o(e.wrn,"warning")},function(e){o(e.err,"error")}],k=_e.apply(void 0,["post","/answers/create-answer","answers"].concat(y)),_=_e.apply(void 0,["put","/answers/update-answer","answers"].concat(y)),S=_e.apply(void 0,["delete","/answers/delete-answer","answers"].concat(y));return Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(C.a,{elevation:3,children:Object(j.jsx)(Ae.a,{sx:{paddingBlockEnd:2,minHeight:"80vh"},border:2,p:2,borderRadius:1,borderColor:"secondary.main",children:Object(j.jsxs)(ye.a,{container:!0,spacing:1,align:"center",pr:2,children:[Object(j.jsx)(ye.a,{item:!0,xs:12,md:3,children:Object(j.jsx)(We.a,{size:"small",label:"Label",color:"warning",fullWidth:!0,name:"label",value:x.label,onChange:g})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:3,children:Object(j.jsx)(We.a,{size:"small",label:"Order",color:"warning",fullWidth:!0,name:"order",type:"number",value:x.order,onChange:g})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:3,children:Object(j.jsx)(He.a,{fullWidth:!0,children:Object(j.jsx)(Le.a,{size:"small",name:"color",value:x.color,onChange:g,children:Object.entries(d).map((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(j.jsx)(W.a,{value:n,children:Object(j.jsx)(V.a,{color:n,children:a})},a)}))})})}),(null===t||void 0===t?void 0:t.is_admin)&&!f&&Object(j.jsx)(ye.a,{item:!0,xs:12,md:3,children:Object(j.jsx)(qe.a,{control:Object(j.jsx)(Xe.a,{name:"common",checked:x.common,onChange:g}),label:"Common"})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:11,children:Object(j.jsx)(We.a,{label:"Content",color:"warning",fullWidth:!0,multiline:!0,rows:4,name:"content",value:x.content,onChange:g})}),Object(j.jsxs)(ye.a,{item:!0,xs:12,md:1,children:[Object(j.jsx)(re,{title:f?"Update Answer":"Create Answer",confirmText:f?"Update":"Create",message:f?"Confirm Update Answer?":"Confirm Create Answer?",action:f?function(){return _({answer:Object(l.a)(Object(l.a)({},x),{},{id:x._id.$oid,color:d[x.color]})})}:function(){return k({answer:Object(l.a)(Object(l.a)({},x),{},{color:d[x.color]})})},color:f?"warning":"success",children:Object(j.jsx)(L.a,{color:f?"primary":"success",disabled:!Boolean(x.label),children:Object(j.jsx)(Ft.a,{})})}),Object(j.jsx)(re,{title:"Delete Answer",message:"Confirm Delete Answer?",confirmText:"Delete",action:function(){return S({answer:{id:x._id.$oid}})},children:Object(j.jsx)(L.a,{color:"error",disabled:!Boolean(x.label),children:Object(j.jsx)(At.a,{})})}),Object(j.jsx)(L.a,{color:"warning",disabled:!Boolean(x.label),onClick:function(){O(b),v(!1)},children:Object(j.jsx)(wt.a,{})})]}),(null===t||void 0===t?void 0:t.is_admin)&&Object(j.jsxs)(ye.a,{item:!0,xs:12,md:6,children:[Object(j.jsx)(V.a,{variant:"h6",children:"Commons"}),Object(j.jsx)(ze.a,{spacing:1,p:1,sx:{paddingBlockEnd:2,height:"40vh",overflow:"auto"},children:n.length>0?n.map((function(e){return Object(j.jsx)(ne.a,{fullWidth:!0,variant:"contained",sx:{color:"#FFFFFF",background:e.color,"&:hover":{background:e.color,filter:"brightness(90%)"}},onClick:function(){return w(e)},children:e.label},e._id.$oid)})):Object(j.jsx)(V.a,{variant:"h5",color:"primary",children:"Loading..."})})]}),Object(j.jsxs)(ye.a,{item:!0,xs:12,md:6,children:[Object(j.jsx)(V.a,{variant:"h6",children:"Own"}),Object(j.jsx)(ze.a,{spacing:1,p:1,sx:{paddingBlockEnd:2,height:"40vh",overflow:"auto"},children:r.length>0?r.map((function(e){return Object(j.jsx)(ne.a,{fullWidth:!0,variant:"contained",sx:{color:"#FFFFFF",background:e.color,"&:hover":{background:e.color,filter:"brightness(90%)"}},onClick:function(){return w(e)},children:e.label},e._id.$oid)})):Object(j.jsx)(V.a,{variant:"h5",color:"primary",children:"Loading..."})})]})]})})})})},Rt=function(){var e=Object(a.useContext)(b).user,t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)({msg:"",vnt:""}),o=Object(i.a)(s,2),l=o[0],d=o[1],u=Object(a.useState)([]),h=Object(i.a)(u,2),x=h[0],O=h[1],m=Object(a.useState)([]),p=Object(i.a)(m,2),f=p[0],v=p[1],g=Object(a.useState)([]),w=Object(i.a)(g,2),y=w[0],C=w[1];Se("/answers/get-all","answers",(function(e){e.answers.payment_methods&&O(e.answers.payment_methods),e.answers.common_answers&&v(e.answers.common_answers),e.answers.own_answers&&C(e.answers.own_answers)}),(function(e){k(e.wrn,"warning")}),(function(e){k(e.err,"error")}));var k=function(e,t){d({msg:e,vnt:t}),c(!0)};return Object(j.jsxs)(j.Fragment,{children:[e.is_admin&&Object(j.jsx)(ye.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(Dt,{payMeths:x,setPayMeths:O,handleMessage:k})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(Pt,{user:e,commonAnswers:f,setCommonAnswers:v,ownAnswers:y,setOwnAnswers:C,handleMessage:k})}),Object(j.jsx)(Ce.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:r,autoHideDuration:3e3,onClose:function(){c(!1)},children:Object(j.jsx)(ke.a,{variant:"filled",color:l.vnt,sx:{whiteSpace:"pre-line"},children:l.msg})})]})},Ut=n(307),It=n(290),Bt=function(e){var t=e.dates,n=e.setDates,r=e.setHasChanged,c=e.handleMessage,s={str_date:"",percent:"",increaseAll:!0},o=Object(a.useState)(s),d=Object(i.a)(o,2),b=d[0],u=d[1],h=Object(a.useState)(""),x=Object(i.a)(h,2),O=x[0],m=x[1],p=function(e){var t=e.target,n=t.name,a=t.value,r=t.checked;u(Object(l.a)(Object(l.a)({},b),{},Object(ge.a)({},n,"increaseAll"===n?r:a)))},f=function(e){var n=parseFloat(e);return t.map((function(e){var t=parseFloat(e.percent),a=t+n+t*n/100;return{_id:e._id,percent:a.toFixed(2)}}))};return Object(j.jsx)(ye.a,{item:!0,pb:"1vh",children:Object(j.jsx)(C.a,{elevation:5,sx:{borderRadius:1},children:Object(j.jsx)(Ae.a,{borderRadius:3,p:2,sx:{paddingBlockEnd:2,minHeight:"39vh"},children:Object(j.jsxs)(ye.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"center",sx:{minHeight:"35vh",overflow:"auto"},children:[Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(V.a,{variant:"h6",color:"success.main",children:"Add New Date - Percentage"})}),Object(j.jsx)(ye.a,{item:!0,xs:8,md:4,children:Object(j.jsx)(We.a,{fullWidth:!0,size:"small",label:"Date",focused:!0,type:"date",name:"str_date",value:b.str_date,onChange:p})}),Object(j.jsx)(ye.a,{item:!0,xs:4,md:2,children:Object(j.jsx)(We.a,{fullWidth:!0,size:"small",label:"Percentage",inputProps:{min:0},type:"number",name:"percent",value:b.percent,onChange:p})}),Object(j.jsx)(ye.a,{item:!0,xs:6,md:3,children:Object(j.jsx)(qe.a,{label:"Increase All",control:Object(j.jsx)(Ut.a,{color:"warning",name:"increaseAll",checked:b.increaseAll,onChange:p})})}),Object(j.jsx)(ye.a,{item:!0,xs:6,md:3,children:Object(j.jsx)(re,{title:"Add New Date-Percentage Pair",message:"Confirm add a new one?",confirmText:"ADD",color:"success",action:function(){var e,a=b.str_date.split("-").join("/"),i=parseFloat(b.percent),o=Object(dt.a)(t);try{for(o.s();!(e=o.n()).done;){var l=e.value;if(l._id===a)return void c("'".concat(l._id,"' is already on the list"),"error")}}catch(j){o.e(j)}finally{o.f()}var d=b.increaseAll?f(i):t;n([{_id:a,percent:i}].concat(Object(Qe.a)(d))),r(!0),u(s)},children:Object(j.jsx)(ne.a,{fullWidth:!0,variant:"contained",color:"success",disabled:!Boolean(b.str_date)||!Boolean(b.percent),sx:{height:"100%"},startIcon:Object(j.jsx)(_t.a,{}),children:"ADD"})})}),Object(j.jsx)(ye.a,{item:!0,xs:12,py:2,children:Object(j.jsx)(G.a,{})}),Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(V.a,{variant:"h6",color:"warning.main",children:"Increase All Percentages"})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(We.a,{fullWidth:!0,size:"small",label:"Percentage",inputProps:{min:0},type:"number",value:O,onChange:function(e){return m(e.target.value)}})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(re,{title:"Update Date-Percentage Table",message:"Confirm update table?",confirmText:"UPDATE",action:function(){n(f(O)),r(!0),m("")},children:Object(j.jsx)(ne.a,{fullWidth:!0,variant:"contained",color:"warning",disabled:!Boolean(O),sx:{height:"100%"},startIcon:Object(j.jsx)(It.a,{}),children:"UPDATE TABLE"})})})]})})})})},Mt=n(291),Wt=function(e){var t=e.lists,n=e.setLists,r=e.setDates,c=e.setHasChanged,s=e.handleMessage,o=Object(a.useContext)(b).user,l=Object(a.useState)(""),d=Object(i.a)(l,2),u=d[0],h=d[1],x=function(){try{Object(xe.a)(he.a.mark((function e(){var t;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.a.get(U+"/calculator/get-lists-data",{headers:{Accept:"*/*",Authorization:"Bearer ".concat(o.token)}});case 2:(t=e.sent).data.dates&&r(t.data.dates),t.data.err&&console.error(t.data.err);case 5:case"end":return e.stop()}}),e)})))()}catch(e){console.error(e)}};return Object(j.jsx)(ye.a,{item:!0,children:Object(j.jsx)(C.a,{elevation:5,sx:{borderRadius:1},children:Object(j.jsx)(Ae.a,{borderRadius:3,p:2,sx:{paddingBlockEnd:2,minHeight:"40vh"},children:Object(j.jsxs)(ye.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"center",alignContent:"flex-start",children:[Object(j.jsx)(ye.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(V.a,{variant:"h6",color:"error.main",children:"Load Table"})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:6,pb:2,children:Object(j.jsx)(re,{title:"Load Table",message:"Confirm load table?",confirmText:"LOAD",disabled:!Boolean(u),action:function(){try{Object(xe.a)(he.a.mark((function e(){var t;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.a.post(U+"/calculator/load-list",{list_name:u},{headers:{Accept:"*/*",Authorization:"Bearer ".concat(null===o||void 0===o?void 0:o.token)}});case 2:(t=e.sent).data.msg&&(x(),s(t.data.msg,"success")),t.data.err&&s(t.data.err,"error");case 5:case"end":return e.stop()}}),e)})))(),h(""),c(!1)}catch(e){console.error(e)}},children:Object(j.jsx)(ne.a,{fullWidth:!0,variant:"contained",color:"error",disabled:!Boolean(u),sx:{height:"100%"},startIcon:Object(j.jsx)(It.a,{}),children:"LOAD TABLE"})})}),Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(ye.a,{container:!0,align:"center",alignItems:"center",alignContent:"flex-start",sx:{height:"25vh",overflow:"auto"},children:Object(j.jsxs)(ut.a,{stickyHeader:!0,size:"small",children:[Object(j.jsx)(ht.a,{children:Object(j.jsxs)(xt.a,{children:[Object(j.jsx)(jt.a,{align:"center",width:"80%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Table Name"}),Object(j.jsx)(jt.a,{align:"center",width:"10%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Download"}),Object(j.jsx)(jt.a,{align:"center",width:"10%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Drop"})]})}),Object(j.jsx)(Ot.a,{children:t.length>0?t.map((function(e){var a=u===e.list_name;return Object(j.jsxs)(xt.a,{hover:!0,selected:a,children:[Object(j.jsx)(jt.a,{align:"center",onClick:function(){h(a?"":e.list_name)},children:e.list_name}),Object(j.jsx)(jt.a,{align:"center",children:Object(j.jsx)(L.a,{size:"small",color:"info",onClick:function(){return function(e){try{Object(xe.a)(he.a.mark((function t(){var n,a,r;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,me.a.post(U+"/calculator/get-list-file",{file_name:e},{headers:{Accept:"*/*",Authorization:"Bearer ".concat(null===o||void 0===o?void 0:o.token)}});case 2:(n=t.sent).data.err?console.error(n.data.err):(a=window.URL.createObjectURL(new Blob([JSON.stringify(n.data,void 0,2)],{type:"application/json"})),(r=document.createElement("a")).href=a,r.setAttribute("download","".concat(e)),document.body.appendChild(r),r.click(),r.remove());case 4:case"end":return t.stop()}}),t)})))()}catch(t){console.error(t)}}(e.list_name)},children:Object(j.jsx)(Mt.a,{})})}),Object(j.jsx)(jt.a,{align:"center",children:Object(j.jsx)(re,{title:"Drop Data Table?",message:"Confirm drop Table?",confirmText:"DROP",action:function(){!function(e){try{Object(xe.a)(he.a.mark((function a(){var r,c;return he.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,me.a.delete(U+"/calculator/drop-list",{headers:{Accept:"*/*",Authorization:"Bearer ".concat(null===o||void 0===o?void 0:o.token)},data:{file_name:e}});case 2:(r=a.sent).data.msg&&(c=t.filter((function(t){return t.list_name!==e})),n(c),h(""),s(r.data.msg,"info")),r.data.err&&s(r.data.err,"error");case 5:case"end":return a.stop()}}),a)})))()}catch(a){console.error(a)}}(e.list_name)},children:Object(j.jsx)(L.a,{size:"small",color:"error",children:Object(j.jsx)(At.a,{})})})})]},e._id.$oid)})):Object(j.jsx)(xt.a,{children:Object(j.jsx)(jt.a,{colSpan:3,align:"center",children:Object(j.jsx)(V.a,{variant:"h4",color:"primary",children:"Loading..."})})})})]})})})]})})})})},Nt=function(e){var t=e.dates,n=e.setDates,r=e.lists,c=e.setLists,s=e.hasChanged,o=e.setHasChanged,d=e.handleMessage,u=Object(a.useContext)(b).user,h=Object(a.useState)({_id:"",percent:""}),x=Object(i.a)(h,2),O=x[0],m=x[1],p=Object(a.useState)({_id:"",percent:""}),f=Object(i.a)(p,2),v=f[0],g=f[1],w=function(e){var t=e.target,n=t.name,a=t.value;g(Object(l.a)(Object(l.a)({},v),{},Object(ge.a)({},n,a)))},y=function(){var e=t.map((function(e){return e._id!==O._id?e:{_id:v._id,percent:parseFloat(v.percent)}}));O._id!==v._id&&e.push(Object(l.a)(Object(l.a)({},O),{},{percent:-1})),n(e),m({_id:"",percent:""}),o(!0)};return Object(j.jsx)(C.a,{elevation:5,sx:{borderRadius:1},children:Object(j.jsxs)(Ae.a,{borderRadius:3,p:2,sx:{paddingBlockEnd:2,minHeight:"80vh"},children:[Object(j.jsx)(ye.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"top",alignContent:"flex-start",sx:{height:"65vh",overflow:"auto"},children:Object(j.jsxs)(ut.a,{stickyHeader:!0,size:"small",children:[Object(j.jsx)(ht.a,{children:Object(j.jsxs)(xt.a,{children:[Object(j.jsx)(jt.a,{align:"center",width:"50%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Date (y/m/d)"}),Object(j.jsx)(jt.a,{align:"center",width:"30%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Percentage"}),Object(j.jsx)(jt.a,{align:"center",width:"10%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Edit"}),Object(j.jsx)(jt.a,{align:"center",width:"10%",sx:{borderRadius:"5px 5px 0px 0px"},children:"Drop"})]})}),Object(j.jsx)(Ot.a,{children:(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t.map((function(e){var a=O._id===v._id&&O.percent.toString()===v.percent.toString();return O._id===e._id?Object(j.jsxs)(xt.a,{hover:!0,selected:!0,children:[Object(j.jsx)(jt.a,{children:Object(j.jsx)(We.a,{size:"small",variant:"standard",inputProps:{style:{textAlign:"center"}},name:"_id",value:v._id,onChange:w})}),Object(j.jsx)(jt.a,{children:Object(j.jsx)(We.a,{size:"small",variant:"standard",inputProps:{style:{textAlign:"center"},min:0},type:"number",name:"percent",value:v.percent,onChange:w})}),Object(j.jsx)(jt.a,{align:"right",children:Object(j.jsx)(L.a,{size:"small",color:"success",disabled:a,onClick:y,children:Object(j.jsx)(St.a,{})})}),Object(j.jsx)(jt.a,{align:"right",children:Object(j.jsx)(L.a,{size:"small",color:"info",onClick:function(){return m({_id:"",percent:""})},children:Object(j.jsx)(wt.a,{})})})]},e._id):Object(j.jsxs)(xt.a,{hover:!0,children:[Object(j.jsx)(jt.a,{align:"center",children:e._id}),Object(j.jsx)(jt.a,{align:"center",children:e.percent}),Object(j.jsx)(jt.a,{align:"right",children:Object(j.jsx)(L.a,{size:"small",color:"warning",onClick:function(){g({_id:e._id,percent:e.percent}),m({_id:e._id,percent:e.percent})},children:Object(j.jsx)(Tt.a,{})})}),Object(j.jsx)(jt.a,{align:"right",children:Object(j.jsx)(re,{title:"Delete Data?",message:"Confirm delete Data Percentage?",confirmText:"Delete",action:function(){return function(e){var a=t.filter((function(t){return t._id!==e}));n(a),o(!0)}(e._id)},children:Object(j.jsx)(L.a,{size:"small",color:"error",children:Object(j.jsx)(At.a,{})})})})]},e._id)})):Object(j.jsx)(xt.a,{children:Object(j.jsx)(jt.a,{colSpan:4,align:"center",children:Object(j.jsx)(V.a,{variant:"h4",color:"primary",children:"Loading..."})})})})]})}),Object(j.jsxs)(ye.a,{container:!0,spacing:2,py:2,children:[Object(j.jsx)(ye.a,{item:!0,xs:6,md:9}),Object(j.jsx)(ye.a,{item:!0,xs:6,md:3,children:Object(j.jsx)(re,{title:"Update Table",message:"Confirm Update Table?",confirmText:"UPDATE",action:function(){try{Object(xe.a)(he.a.mark((function e(){var a,s,i;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.a.post(U+"/calculator/load-list",{dates:t},{headers:{Accept:"*/*",Authorization:"Bearer ".concat(null===u||void 0===u?void 0:u.token)}});case 2:(a=e.sent).data.msg&&((s=r).unshift({_id:{$oid:(new Date).getTime()},list_name:a.data.new_list}),c(s),i=t.filter((function(e){return-1!==e.percent})).sort((function(e,t){return e._id>t._id?-1:e._id<t._id?1:0})),n(i),d(a.data.msg,"success"),o(!1)),a.data.err&&d(a.data.err,"error");case 5:case"end":return e.stop()}}),e)})))()}catch(e){console.error(e)}},color:"warning",disabled:!s,children:Object(j.jsx)(ne.a,{fullWidth:!0,variant:"contained",color:"error",disabled:!s,children:"Update Table"})})})]})]})})},Ht=function(){var e=Object(a.useContext)(b).user,t=Object(a.useState)({msg:"",vnt:""}),n=Object(i.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(!1),o=Object(i.a)(s,2),l=o[0],d=o[1],u=Object(a.useState)([]),h=Object(i.a)(u,2),x=h[0],O=h[1],m=Object(a.useState)([]),p=Object(i.a)(m,2),f=p[0],v=p[1],g=Object(a.useState)(!1),w=Object(i.a)(g,2),y=w[0],C=w[1];Object(a.useEffect)((function(){var t=me.a.CancelToken.source();try{Object(xe.a)(he.a.mark((function n(){var a;return he.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,me.a.get(U+"/calculator/get-lists-data",{cancelToken:t.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(e.token)}});case 2:(a=n.sent).data.dates&&(O(a.data.dates),v(a.data.lists)),a.data.err&&console.error(a.data.err);case 5:case"end":return n.stop()}}),n)})))()}catch(n){console.error(n)}return function(){t.cancel()}}),[e]);var k=function(e,t){c({msg:e,vnt:t}),d(!0)};return Object(j.jsxs)(j.Fragment,{children:[(null===e||void 0===e?void 0:e.is_admin)?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(ye.a,{item:!0,xs:12,md:6,children:[Object(j.jsx)(Bt,{dates:x,setDates:O,setHasChanged:C,handleMessage:k}),Object(j.jsx)(Wt,{lists:f,setLists:v,setDates:O,setHasChanged:C,handleMessage:k})]}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(Nt,{dates:x,setDates:O,lists:f,setLists:v,hasChanged:y,setHasChanged:C,handleMessage:k})})]}):Object(j.jsx)(ye.a,{item:!0,children:Object(j.jsx)(V.a,{variant:"h3",color:"error",children:"\u26d4 This section is for admins only"})}),Object(j.jsx)(Ce.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:l,autoHideDuration:3e3,onClose:function(){d(!1)},children:Object(j.jsx)(ke.a,{variant:"filled",color:r.vnt,children:r.msg})})]})},Lt=function(){var e=Object(a.useContext)(b).user,t={id:"",is_system:!1,identifier:"",pattern:"",replacement:""},n=Object(a.useState)(!1),r=Object(i.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)({msg:"",vnt:""}),d=Object(i.a)(o,2),u=d[0],h=d[1],x=Object(a.useState)([]),O=Object(i.a)(x,2),m=O[0],p=O[1],f=Object(a.useState)([]),v=Object(i.a)(f,2),g=v[0],w=v[1],y=Object(a.useState)(t),k=Object(i.a)(y,2),_=k[0],S=k[1],T=Object(a.useState)(!1),A=Object(i.a)(T,2),z=A[0],E=A[1],D=function(e,t){h({msg:e,vnt:t}),s(!0)},F=function(e){var t=e.target,n=t.name,a=t.value,r=t.checked;S(Object(l.a)(Object(l.a)({},_),{},Object(ge.a)({},n,"is_system"!==n?a:r)))},P=function(e){S(e),E(!0)},R=[function(e){e.answers.sys_regex&&p(e.answers.sys_regex),e.answers.own_regex&&w(e.answers.own_regex),e.msg&&D(e.msg,"success"),S(t),E(!1)},function(e){D(e.wrn,"warning")},function(e){D(e.err,"error")}];Se.apply(void 0,["/answers/get-expressions","answers"].concat(R));var U=_e.apply(void 0,["post","/answers/create-expression","answers"].concat(R)),I=_e.apply(void 0,["put","/answers/update-expression","answers"].concat(R)),B=_e.apply(void 0,["delete","/answers/delete-expression","answers"].concat(R));return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(ye.a,{item:!0,xs:12,md:6,children:Object(j.jsx)(C.a,{elevation:7,children:Object(j.jsx)(Ae.a,{sx:{paddingBlockEnd:2,minHeight:"80vh"},border:2,p:2,borderRadius:1,borderColor:"info.main",children:Object(j.jsxs)(ye.a,{container:!0,spacing:1,align:"center",pr:2,children:[Object(j.jsx)(ye.a,{item:!0,xs:12,md:8,children:Object(j.jsx)(We.a,{size:"small",label:"Identifier",color:"warning",fullWidth:!0,name:"identifier",value:_.identifier,onChange:F})}),(null===e||void 0===e?void 0:e.is_admin)&&!z&&Object(j.jsx)(ye.a,{item:!0,xs:12,md:3,children:Object(j.jsx)(qe.a,{control:Object(j.jsx)(Xe.a,{name:"is_system",checked:_.is_system,onChange:F}),label:"System"})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:11,children:Object(j.jsx)(We.a,{size:"small",label:"Pattern",color:"warning",fullWidth:!0,name:"pattern",value:_.pattern,onChange:F})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:11,children:Object(j.jsx)(We.a,{label:"Replacement",color:"warning",fullWidth:!0,multiline:!0,rows:4,name:"replacement",value:_.replacement,onChange:F})}),Object(j.jsxs)(ye.a,{item:!0,xs:12,md:1,children:[Object(j.jsx)(re,{title:z?"Update Answer":"Create Answer",confirmText:z?"Update":"Create",message:z?"Confirm Update Answer?":"Confirm Create Answer?",action:z?function(){return I({expression:Object(l.a)(Object(l.a)({},_),{},{id:_._id.$oid})})}:function(){return U({expression:_})},color:z?"warning":"success",children:Object(j.jsx)(L.a,{color:z?"primary":"success",disabled:!Boolean(_.identifier),children:Object(j.jsx)(Ft.a,{})})}),Object(j.jsx)(re,{title:"Delete Answer",message:"Confirm Delete Answer?",confirmText:"Delete",action:function(){return B({expression:{id:_._id.$oid}})},children:Object(j.jsx)(L.a,{color:"error",disabled:!Boolean(_.identifier),children:Object(j.jsx)(At.a,{})})}),Object(j.jsx)(L.a,{color:"warning",disabled:!Boolean(_.identifier),onClick:function(){S(t),E(!1)},children:Object(j.jsx)(wt.a,{})})]}),(null===e||void 0===e?void 0:e.is_admin)&&Object(j.jsxs)(ye.a,{item:!0,xs:12,md:6,children:[Object(j.jsx)(V.a,{variant:"h6",children:"System"}),Object(j.jsx)(ze.a,{spacing:1,p:1,sx:{paddingBlockEnd:2,height:"38vh",overflow:"auto"},children:m.length>0?m.map((function(e){return Object(j.jsx)(ne.a,{fullWidth:!0,variant:"contained",color:"error",onClick:function(){return P(e)},children:e.identifier},e._id.$oid)})):Object(j.jsx)(V.a,{variant:"h4",color:"error",children:"Loading..."})})]}),Object(j.jsxs)(ye.a,{item:!0,xs:12,md:6,children:[Object(j.jsx)(V.a,{variant:"h6",children:"Own"}),Object(j.jsx)(ze.a,{spacing:1,p:1,sx:{paddingBlockEnd:2,height:"38vh",overflow:"auto"},children:g.length>0?g.map((function(e){return Object(j.jsx)(ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){return P(e)},children:e.identifier},e._id.$oid)})):Object(j.jsx)(V.a,{variant:"h4",color:"primary",children:"Loading..."})})]})]})})})}),Object(j.jsx)(Ce.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:c,autoHideDuration:3e3,onClose:function(){s(!1)},children:Object(j.jsx)(ke.a,{variant:"filled",color:u.vnt,sx:{whiteSpace:"pre-line"},children:u.msg})})]})},$t=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(i.a)(c,2),o=s[0],d=s[1],u=Object(a.useState)(""),h=Object(i.a)(u,2),O=h[0],p=h[1],f=Object(a.useContext)(b),v=f.user,g=f.setUser,w=Object(a.useContext)(x).setUserSettings,y=Object(m.h)(),C=Object(m.g)();Object(a.useEffect)((function(){v&&y("/login"===C.pathname?"/news":C.pathname,{replace:!0})}));var k=function(){var e=Object(xe.a)(he.a.mark((function e(t){var a,c;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a="/login"===C.pathname?"/news":C.pathname,e.prev=2,e.next=5,me.a.post(U+"/users/signin",{username:n,password:o});case 5:(c=e.sent).data.user?(g(Object(l.a)(Object(l.a)({},c.data.user),{},{username:n})),w(Object(l.a)({},c.data.settings))):(r(""),d(""),p(c.data.msg),setTimeout((function(){p("")}),2500)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:y(a,{replace:!0});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)(we.a,{children:Object(j.jsxs)(ye.a,{container:!0,spacing:3,margin:0,children:[Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(V.a,{variant:"h3",color:"primary",children:"User Login"})}),Object(j.jsx)(ye.a,{item:!0,children:Object(j.jsx)(M.a,{in:Boolean(O),timeout:1e3,children:Object(j.jsx)(ke.a,{severity:"warning",variant:"outlined",children:O})})}),Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(We.a,{id:"uName",label:"Username",value:n,onChange:function(e){r(e.target.value)}})}),Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(We.a,{id:"uPass",label:"Password",type:"password",value:o,onChange:function(e){d(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&k(e)}})}),Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(ne.a,{variant:"contained",color:"primary",onClick:k,children:"Login"})})]})})},Vt=["user","setUser"],Gt=function(e){var t=e.user,n=e.setUser,r=Object(I.a)(e,Vt),c=Object(a.useState)({username:"",email:"",password:"",new_password:"",confirm_new_password:"",first_name:"",last_name:"",is_admin:!1}),s=Object(i.a)(c,2),o=s[0],d=s[1];Object(a.useEffect)((function(){var e=me.a.CancelToken.source();return(null===t||void 0===t?void 0:t.token)&&Object(xe.a)(he.a.mark((function n(){var a;return he.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,me.a.get(U+"/users/get-user-data",{cancelToken:e.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:a=n.sent,d(Object(l.a)(Object(l.a)({},a.data),{},{password:"",new_password:"",confirm_new_password:""})),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))(),function(){e.cancel()}}),[t]);var b=function(e){var t=e.target,n=t.name,a=t.value,r=t.checked;d(Object(l.a)(Object(l.a)({},o),{},Object(ge.a)({},n,"is_admin"!==n?a:r)))},u=Object(a.useState)(!0),h=Object(i.a)(u,2),x=h[0],O=h[1],m=function(e){var t=e.target,n=t.name,a=t.value;"new_password"===n?(d(Object(l.a)(Object(l.a)({},o),{},Object(ge.a)({},n,a))),O(o.confirm_new_password===a)):(d(Object(l.a)(Object(l.a)({},o),{},Object(ge.a)({},n,a))),O(o.new_password===a))},p=Object(a.useState)({msg:"",vnt:"info"}),f=Object(i.a)(p,2),v=f[0],g=f[1],w=function(){if(!x)return g({msg:"new password doesn't match",vnt:"error"}),void setTimeout((function(){g({msg:"",vnt:"error"})}),2500);Object(xe.a)(he.a.mark((function e(){var a,r;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.a.post(U+"/users/update-user",o,{headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:(a=e.sent).data.msg?(g({msg:a.data.msg,vnt:"success"}),r=Object(l.a)(Object(l.a)({},t),{},{username:o.username,first_name:o.first_name,last_name:o.last_name,is_admin:o.is_admin}),setTimeout((function(){g({msg:"",vnt:"success"})}),2500),a.data.wrn?(setTimeout((function(){g({msg:a.data.wrn,vnt:"warning"})}),2600),setTimeout((function(){g({msg:"",vnt:"warning"}),n(r)}),5100)):n(r)):(g({msg:a.data.err,vnt:"error"}),setTimeout((function(){g({msg:"",vnt:"error"})}),2500)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))(),setTimeout((function(){O(!0)}),500)};return Object(j.jsx)(a.Fragment,Object(l.a)(Object(l.a)({},r),{},{children:Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(C.a,{elevation:3,children:Object(j.jsxs)(ye.a,{container:!0,spacing:2,margin:0,px:{xs:0,md:3},children:[Object(j.jsx)(ye.a,{item:!0,children:Object(j.jsx)(V.a,{variant:"h6",color:"primary",children:"Update My User Account"})}),Object(j.jsx)(ye.a,{item:!0,xs:12,mx:1,children:Object(j.jsx)(V.a,{variant:"h6",color:"GrayText",children:o.email})}),Object(j.jsx)(ye.a,{item:!0,children:Object(j.jsx)(We.a,{size:"small",name:"username",label:"Username",value:o.username,onChange:b})}),t.is_admin&&Object(j.jsx)(ye.a,{item:!0,mb:0,children:Object(j.jsx)(qe.a,{control:Object(j.jsx)(Xe.a,{name:"is_admin",checked:o.is_admin,onChange:b}),label:"Is Admin"})}),Object(j.jsx)(ye.a,{item:!0,children:Object(j.jsx)(We.a,{size:"small",name:"first_name",label:"First Name",value:o.first_name,onChange:b})}),Object(j.jsx)(ye.a,{item:!0,children:Object(j.jsx)(We.a,{size:"small",name:"last_name",label:"Last Name",value:o.last_name,onChange:b})}),Object(j.jsxs)(ye.a,{item:!0,children:[Object(j.jsxs)(C.a,{elevation:1,sx:{background:"darkGray2",display:"inline-block"},children:[Object(j.jsx)(ye.a,{item:!0,pb:2,children:Object(j.jsx)(We.a,{size:"small",error:!x,name:"new_password",label:"New Password",type:"password",value:o.new_password,onChange:m})}),Object(j.jsx)(ye.a,{item:!0,children:Object(j.jsx)(We.a,{size:"small",error:!x,name:"confirm_new_password",label:"Confirm New Password",type:"password",value:o.confirm_new_password,onChange:m})})]}),Object(j.jsxs)(ye.a,{container:!0,columns:2,pt:2,children:[Object(j.jsx)(ye.a,{item:!0,pb:2,children:Object(j.jsx)(We.a,{size:"small",color:"warning",focused:!0,name:"password",label:"Password",type:"password",value:o.password,onChange:b,onKeyPress:function(e){"Enter"===e.key&&w()}})}),Object(j.jsx)(re,{title:"Update User",message:"Confirm user update?",confirmText:"UPDATE",color:"secondary",action:w,children:Object(j.jsx)(ye.a,{item:!0,px:2,pb:2,children:Object(j.jsx)(ne.a,{variant:"contained",color:"warning",children:"UPDATE"})})})]}),Object(j.jsx)(ye.a,{item:!0,pb:2,children:Object(j.jsx)(M.a,{in:Boolean(v.msg),timeout:1e3,children:Object(j.jsx)(ke.a,{severity:v.vnt,variant:"outlined",children:v.msg})})})]})]})})})}))},Kt=function(e){var t=Object(a.useContext)(x),n=t.userSettings,r=t.setUserSettings,c=Object(a.useState)(n),s=Object(i.a)(c,2),o=s[0],d=s[1],b=Object(a.useState)({msg:"",vnt:""}),u=Object(i.a)(b,2),h=u[0],O=u[1],m=Object(a.useState)(!1),p=Object(i.a)(m,2),f=p[0],v=p[1],g=function(e,t){O({msg:e,vnt:t}),v(!0)},w=function(e){var t=e.target,n=t.name,a=t.value,r=t.checked;d(Object(l.a)(Object(l.a)({},o),{},Object(ge.a)({},n,"calculator"!==n?a:r)))},y=_e("put","/users/update-user-settings","settings",(function(e){r(e.settings),g(e.msg,"success")}),(function(e){g(e.wrn,"warning")}),(function(e){g(e.err,"error")}));return Object(j.jsxs)(a.Fragment,Object(l.a)(Object(l.a)({},e),{},{children:[Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(C.a,{elevation:3,children:Object(j.jsxs)(ye.a,{container:!0,spacing:2,margin:0,px:{xs:0,md:3},children:[Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(V.a,{variant:"h6",color:"primary",children:"User Settings"})}),Object(j.jsx)(ye.a,{item:!0,xs:11,children:Object(j.jsx)(He.a,{fullWidth:!0,children:Object(j.jsxs)(Le.a,{size:"small",name:"theme_mode",value:o.theme_mode,onChange:w,children:[Object(j.jsx)(W.a,{value:"dark",children:" DARK THEME "}),Object(j.jsx)(W.a,{value:"light",children:" LIGHT THEME"})]})})}),Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(qe.a,{control:Object(j.jsx)(Xe.a,{name:"calculator",checked:o.calculator,onChange:w}),label:"Basic Calculator for Default"})}),Object(j.jsx)(ye.a,{item:!0,xs:11,children:Object(j.jsx)(We.a,{fullWidth:!0,size:"small",label:"Posts Font Family",name:"postsFontFamily",value:o.postsFontFamily,onChange:w})}),Object(j.jsx)(ye.a,{item:!0,xs:11,children:Object(j.jsx)(We.a,{fullWidth:!0,size:"small",label:"Notification Volume",type:"range",inputProps:{min:0,max:1,step:.1},name:"notifVol",value:o.notifVol,onChange:w})}),Object(j.jsx)(ye.a,{item:!0,xs:12,px:2,pb:2,children:Object(j.jsx)(re,{title:"Save User Settings",confirmText:"UPDATE",message:"Confirm Save user settings?",color:"warning",action:function(){return y({settings:{theme_mode:o.theme_mode,calculator:o.calculator,postsFontFamily:o.postsFontFamily,notifVol:parseFloat(o.notifVol)}})},children:Object(j.jsx)(ne.a,{variant:"contained",color:"warning",children:"CONFIGURE"})})})]})})}),Object(j.jsx)(Ce.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:f,autoHideDuration:3e3,onClose:function(){v(!1)},children:Object(j.jsx)(ke.a,{variant:"filled",color:h.vnt,children:h.msg})})]}))},Yt=n(309),Jt=n(292),qt=n(293),Xt=["user","setEdit","usersSate","setUsersState","initialOtherUser","setOtherUserData"],Qt=function(e){var t=e.user,n=e.setEdit,r=e.usersSate,c=e.setUsersState,s=e.initialOtherUser,o=e.setOtherUserData,d=Object(I.a)(e,Xt),b=Object(a.useState)([]),u=Object(i.a)(b,2),h=u[0],x=u[1];Object(a.useEffect)((function(){var e=me.a.CancelToken.source();return(null===t||void 0===t?void 0:t.token)&&Object(xe.a)(he.a.mark((function n(){var a;return he.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,me.a.get(U+"/users/get-users",{cancelToken:e.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:a=n.sent,x(a.data),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))(),function(){e.cancel()}}),[t,r]);return Object(j.jsx)(a.Fragment,Object(l.a)(Object(l.a)({},d),{},{children:Object(j.jsxs)(ye.a,{item:!0,xs:12,md:4,children:[Object(j.jsx)(C.a,{elevation:3,children:Object(j.jsxs)(ye.a,{container:!0,spacing:2,margin:0,px:{xs:0,md:3},children:[Object(j.jsx)(ye.a,{item:!0,children:Object(j.jsx)(V.a,{variant:"h6",color:"primary",children:"List of Active Users"})}),h.length>0?h.map((function(e){return Object(j.jsx)(Yt.a,{secondaryAction:Object(j.jsx)(re,{title:"Delete",message:"Confirm user Delete?",confirmText:"DELETE",action:function(){return a=e.email,Object(xe.a)(he.a.mark((function e(){var n;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.a.delete(U+"/users/delete-other-user",{headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)},data:{email:a}});case 3:(n=e.sent).data.msg?(c({msg:n.data.msg,vnt:"info"}),setTimeout((function(){c({msg:"",vnt:"info"})}),2500)):(c({msg:n.data.err,vnt:"error"}),setTimeout((function(){c({msg:"",vnt:"error"})}),2500)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))(),n(!1),void o(s);var a},children:Object(j.jsx)(L.a,{edge:"end",children:Object(j.jsx)(At.a,{fontSize:"large",color:"error"})})}),children:Object(j.jsx)(Jt.a,{onClick:function(){!function(e){o(Object(l.a)({},e)),n(!0)}(e)},children:Object(j.jsx)(qt.a,{primary:["".concat(e.username," -"),e.first_name,e.last_name].join(" "),secondary:e.email})})},e.username)})):Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(V.a,{variant:"h4",color:"secondary",children:"Loading..."})})]})}),Object(j.jsx)(ye.a,{item:!0,pt:3,children:Object(j.jsx)(M.a,{in:Boolean(r.msg),timeout:1e3,children:Object(j.jsx)(ke.a,{severity:r.vnt,variant:"outlined",children:r.msg})})})]})}))},Zt=["user","edit","setEdit","setUsersState","initialOtherUser","otherUserData","setOtherUserData"],en=function(e){var t=e.user,n=e.edit,r=e.setEdit,c=e.setUsersState,s=e.initialOtherUser,o=e.otherUserData,d=e.setOtherUserData,b=Object(I.a)(e,Zt),u=function(e){var t=e.target,n=t.name,a=t.value,r=t.checked;d(Object(l.a)(Object(l.a)({},o),{},Object(ge.a)({},n,"is_admin"!==n?a:r)))},h=Object(a.useState)(!0),x=Object(i.a)(h,2),O=x[0],m=x[1],p=function(e){var t=e.target,n=t.name,a=t.value;"email"===n?(d(Object(l.a)(Object(l.a)({},o),{},Object(ge.a)({},n,a))),m(o.confirm_email===a)):(d(Object(l.a)(Object(l.a)({},o),{},Object(ge.a)({},n,a))),m(o.email===a))};return Object(j.jsx)(a.Fragment,Object(l.a)(Object(l.a)({},b),{},{children:Object(j.jsx)(ye.a,{item:!0,xs:12,md:4,children:Object(j.jsx)(C.a,{elevation:3,children:Object(j.jsxs)(ye.a,{container:!0,spacing:2,margin:0,px:{xs:0,md:3},children:[Object(j.jsx)(ye.a,{item:!0,children:Object(j.jsx)(V.a,{variant:"h6",color:"primary",children:"Update/Create User Account"})}),n?Object(j.jsx)(ye.a,{item:!0,xs:12,mx:1,children:Object(j.jsx)(V.a,{variant:"h6",color:"GrayText",children:o.email})}):Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(ye.a,{item:!0,children:Object(j.jsxs)(C.a,{elevation:1,sx:{background:"darkGray2",display:"inline-block"},children:[Object(j.jsx)(ye.a,{item:!0,pb:2,children:Object(j.jsx)(We.a,{size:"small",error:!O,name:"email",label:"Email (ID - immutable)",value:o.email,onChange:p})}),Object(j.jsx)(ye.a,{item:!0,children:Object(j.jsx)(We.a,{size:"small",error:!O,name:"confirm_email",label:"Confirm Email",value:o.confirm_email,onChange:p})})]})})}),Object(j.jsx)(ye.a,{item:!0,children:Object(j.jsx)(We.a,{size:"small",name:"username",label:"Username",value:o.username,onChange:u})}),Object(j.jsx)(ye.a,{item:!0,mb:0,children:Object(j.jsx)(qe.a,{control:Object(j.jsx)(Xe.a,{name:"is_admin",checked:o.is_admin,onChange:u}),label:"Is Admin"})}),Object(j.jsx)(ye.a,{item:!0,children:Object(j.jsx)(We.a,{size:"small",name:"first_name",label:"Fisrs Name",value:o.first_name,onChange:u})}),Object(j.jsx)(ye.a,{item:!0,children:Object(j.jsx)(We.a,{size:"small",name:"last_name",label:"Last Name",value:o.last_name,onChange:u})}),Object(j.jsx)(ye.a,{item:!0,children:Object(j.jsx)(ye.a,{container:!0,columns:2,sx:{alignItems:"flex-end"},children:n?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(ye.a,{item:!0,pl:2,pb:2,children:Object(j.jsx)(ne.a,{variant:"contained",color:"error",onClick:function(){d(s),r(!1),m(!0)},children:"CANCEL"})}),Object(j.jsx)(re,{title:"Update Other User",message:"Confirm user update?",color:"secondary",confirmText:"UPDATE",action:function(){Object(xe.a)(he.a.mark((function e(){var n;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.a.post(U+"/users/update-other-user",{email:(a=o).email,username:a.username,first_name:a.first_name,last_name:a.last_name,is_admin:a.is_admin},{headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:(n=e.sent).data.msg?(c({msg:n.data.msg,vnt:"success"}),setTimeout((function(){c({msg:"",vnt:"success"})}),2500)):(c({msg:n.data.err,vnt:"error"}),setTimeout((function(){c({msg:"",vnt:"error"})}),2500)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}var a}),e,null,[[0,7]])})))(),d(s),r(!1)},children:Object(j.jsx)(ye.a,{item:!0,pl:2,pb:2,children:Object(j.jsx)(ne.a,{variant:"contained",color:"warning",children:"UPDATE"})})})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(ye.a,{item:!0,pb:2,children:Object(j.jsx)(C.a,{elevation:1,sx:{maxWidth:"230px",background:"darkGray2",display:"inline-block"},children:Object(j.jsx)(ye.a,{item:!0,p:2,children:Object(j.jsx)(V.a,{variant:"body1",color:"warning.main",children:'By default the password will be "abc123" the user must change it later'})})})}),Object(j.jsx)(ye.a,{item:!0,px:2,pb:2,children:Object(j.jsx)(ne.a,{variant:"contained",color:"success",onClick:function(){for(var e=0,n=Object.entries(o);e<n.length;e++){var a=Object(i.a)(n[e],2),r=a[0];if(""===a[1])return c({msg:"Missing Value ".concat(r),vnt:"error"}),void setTimeout((function(){c({msg:"",vnt:"error"})}),2500)}if(!O)return c({msg:"Email doesn't match",vnt:"error"}),void setTimeout((function(){c({msg:"",vnt:"error"})}),2500);Object(xe.a)(he.a.mark((function e(){var n;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.a.post(U+"/users/signup",o,{headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:(n=e.sent).data.msg?(c({msg:n.data.msg,vnt:"success"}),d(s),setTimeout((function(){c({msg:"",vnt:"success"})}),2500)):(c({msg:n.data.err,vnt:"error"}),setTimeout((function(){c({msg:"",vnt:"error"})}),2500)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))(),setTimeout((function(){m(!0)}),500)},children:"CREATE"})})]})})})]})})})}))},tn=function(){var e=Object(a.useContext)(b),t=e.user,n=e.setUser,r={username:"",email:"",confirm_email:"",first_name:"",last_name:"",is_admin:!1},c=Object(a.useState)(!1),s=Object(i.a)(c,2),o=s[0],l=s[1],d=Object(a.useState)(r),u=Object(i.a)(d,2),h=u[0],x=u[1],O=Object(a.useState)({msg:"",vnt:"success"}),m=Object(i.a)(O,2),p=m[0],f=m[1],v=t.is_admin?"block":"none",g=t.is_admin?"none":"block";return Object(j.jsxs)(we.a,{maxWidth:"xl",children:[Object(j.jsx)(ye.a,{item:!0,xs:12,children:Object(j.jsx)(V.a,{variant:"h3",color:"secondary",children:"User Account"})}),Object(j.jsxs)(ye.a,{container:!0,spacing:2,children:[Object(j.jsxs)(ye.a,{item:!0,xs:12,md:4,sx:{display:v},children:[Object(j.jsx)(Gt,{user:t,setUser:n}),Object(j.jsx)(ye.a,{item:!0,mt:2,children:" "}),Object(j.jsx)(Kt,{})]}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:4,sx:{display:g},children:Object(j.jsx)(Gt,{user:t,setUser:n})}),Object(j.jsx)(ye.a,{item:!0,xs:12,md:4,sx:{display:g},children:Object(j.jsx)(Kt,{})}),t.is_admin&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Qt,{user:t,setEdit:l,usersSate:p,setUsersState:f,initialOtherUser:r,setOtherUserData:x}),Object(j.jsx)(en,{user:t,edit:o,setEdit:l,setUsersState:f,initialOtherUser:r,otherUserData:h,setOtherUserData:x})]})]})]})},nn=function(){var e=Object(a.useContext)(b),t=e.user,n=e.setUser,r=Object(a.useContext)(u),c=r.auth,s=r.setAuth,i=Object(a.useContext)(x).userSettings,o=Object(a.useMemo)((function(){var e="light"===i.theme_mode?{background:Object(l.a)({},window.lightBG)}:{};return Object(p.a)({palette:Object(l.a)({mode:i.theme_mode,primary:v.a,secondary:g.a,info:w.a},e),typography:{fontSize:window.globalFontSize}})}),[i.theme_mode]);return Object(a.useEffect)((function(){(null===t||void 0===t?void 0:t.token)&&s(!0)}),[t,s]),Object(j.jsx)(f.a,{theme:o,children:Object(j.jsx)(y.a,{enableColorScheme:!0,children:Object(j.jsxs)(C.a,{sx:{paddingBlockEnd:2,minHeight:"100vh"},square:!0,children:[Object(j.jsx)(be,{}),c?Object(j.jsx)(ve,{setAuth:s,user:t,setUser:n,children:Object(j.jsxs)(m.e,{children:[Object(j.jsx)(m.c,{path:"/",element:Object(j.jsx)(m.a,{to:P[0]})}),Object(j.jsx)(m.c,{path:P[0],element:Object(j.jsx)(Je,{})}),Object(j.jsx)(m.c,{path:P[1],element:Object(j.jsx)(lt,{})}),Object(j.jsx)(m.c,{path:P[2],element:Object(j.jsx)(Ct,{})}),Object(j.jsxs)(m.c,{path:P[3],element:Object(j.jsx)(kt,{}),children:[Object(j.jsx)(m.c,{path:R[0],element:Object(j.jsx)(Rt,{})}),Object(j.jsx)(m.c,{path:R[1],element:Object(j.jsx)(Ht,{})}),Object(j.jsx)(m.c,{path:R[2],element:Object(j.jsx)(Lt,{})})]}),Object(j.jsx)(m.c,{path:"login",element:Object(j.jsx)($t,{})}),Object(j.jsx)(m.c,{path:"account",element:Object(j.jsx)(tn,{})})]})}):Object(j.jsx)($t,{})]})})})};c.a.render(Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(s.a,{children:Object(j.jsx)(O,{children:Object(j.jsx)(nn,{})})})}),document.getElementById("root"))}},[[203,1,2]]]);
//# sourceMappingURL=main.c486f8cd.chunk.js.map