(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{171:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(50),c=a.n(r),s=a(37),i=a(7),o=function(){var e=Object(n.useState)(function(){var e=localStorage.getItem("user");return JSON.parse(e)}()),t=Object(i.a)(e,2),a=t[0],r=t[1];return[a,function(e){localStorage.setItem("user",JSON.stringify(e)),r(e)}]},l=a(0),j=Object(n.createContext)({user:"",setUser:function(){}}),d=Object(n.createContext)({auth:"",setAuth:function(){}}),b=Object(n.createContext)({fetchedPosts:"",setFetchedPosts:function(){}}),u=function(e){var t=e.children,a=o(),r=Object(i.a)(a,2),c=r[0],s=r[1],u=Object(n.useMemo)((function(){return{user:c,setUser:s}}),[c,s]),O=Object(n.useState)(!1),h=Object(i.a)(O,2),m=h[0],x=h[1],p=Object(n.useMemo)((function(){return{auth:m,setAuth:x}}),[m,x]),v=Object(n.useState)([]),f=Object(i.a)(v,2),g=f[0],y=f[1],w=Object(n.useMemo)((function(){return{fetchedPosts:g,setFetchedPosts:y}}),[g,y]);return Object(l.jsx)(j.Provider,{value:u,children:Object(l.jsx)(d.Provider,{value:p,children:Object(l.jsx)(b.Provider,{value:w,children:t})})})},O=a(15),h=a(118),m=a(261),x=a(243),p=a(62),v=a(244),f=a(263),g=a(270),y=a(271),w=a(246),k=a(262),C=a(227),_=a(228),T=a(229),S=a(230),A=["/news","/calculators","/answers","/settings"],E=["answers","calculator","regexs"],U="http://localhost:5000/api-v1",z=a(12),P=a(28),I=a(119),D=a(216),B=a(264),F=["value","items","setTabValue","icon","label","disabled"],R=function(e){var t=e.value,a=e.items,r=e.setTabValue,c=e.icon,s=e.label,o=e.disabled,j=Object(P.a)(e,F),d=Object(O.h)(),b=Object(n.useState)(null),u=Object(i.a)(b,2),h=u[0],m=u[1],x=Boolean(h);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(k.a,Object(z.a)(Object(z.a)({label:s},j),{},{icon:c,iconPosition:"start",id:"id_menu","aria-controls":"aria_menu",onClick:function(e){m(e.currentTarget)},"aria-haspopup":"true","aria-expanded":x?"true":void 0,disabled:o})),Object(l.jsx)(I.a,{id:"aria_menu",anchorEl:h,open:x,onClose:function(){m(null)},TransitionComponent:D.a,children:a.map((function(e){return Object(l.jsx)(B.a,{onClick:function(){var a;a=e.sub_route,m(null),d("".concat(t,"/").concat(a)),r(t)},children:e.label},e.label)}))})]})},W=a(269),M=a(256),N=a(75),H=a(223),V=a(224),L=a(222),G=a(225),$=a(226),K=a(265),J=a(221),q=a(266),Y=a(267),X=a(268),Q=a(255),Z=["title","message","confirmText","action","children"],ee=function(e){var t=e.title,a=e.message,r=e.confirmText,c=e.action,s=e.children,o=Object(P.a)(e,Z),j=Object(n.useState)(!1),d=Object(i.a)(j,2),b=d[0],u=d[1],O=function(){u(!1)};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{onClick:function(){u(!0)},children:s}),Object(l.jsxs)(K.a,Object(z.a)(Object(z.a)({},o),{},{open:b,onClose:O,"aria-labelledby":"title","aria-describedby":"description",children:[Object(l.jsx)(J.a,{id:"title",children:t||"add <title> prop"}),Object(l.jsx)(q.a,{children:Object(l.jsx)(Y.a,{id:"description",children:a||"add <message> prop"})}),Object(l.jsxs)(X.a,{children:[Object(l.jsx)(Q.a,{onClick:O,children:"Cancel "}),Object(l.jsxs)(Q.a,{onClick:function(e){u(!1);try{c(e)}catch(t){console.error("add <action> prop, or: ".concat(t))}},color:"error",autoFocus:!0,children:[r||"add <confirmText> prop"," "]})]})]}))]})},te=["setTabValue","disabled"],ae=function(e,t){return e&&t?[e.first_name[0],e.last_name[0]].join("").toUpperCase():Object(l.jsx)(L.a,{})},ne=function(e){var t=Object(n.useContext)(j),a=t.user,r=t.setUser,c=Object(n.useContext)(d),s=c.auth,o=c.setAuth,b=e.setTabValue,u=e.disabled,h=Object(P.a)(e,te),m=Object(O.g)(),x=Object(O.h)(),p="account"===m.pathname.split("/")[1]?"secondary.main":"primary.main";u&&(p="default");var v=Object(n.useState)(null),f=Object(i.a)(v,2),g=f[0],y=f[1],w=Boolean(g);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(W.a,Object(z.a)(Object(z.a)({variant:"outlined"},h),{},{id:"id_menu","aria-controls":"aria_menu",onClick:function(e){y(e.currentTarget)},"aria-haspopup":"true","aria-expanded":w?"true":void 0,color:"secondary",disabled:u,children:Object(l.jsx)(M.a,{sx:{bgcolor:p},children:ae(a,s)})})),Object(l.jsxs)(I.a,{id:"aria_menu",anchorEl:g,open:w,onClose:function(){y(null)},TransitionComponent:D.a,children:[Object(l.jsx)(N.a,{variant:"overline",color:"secondary",marginX:2,mb:1,children:[null===a||void 0===a?void 0:a.first_name,null===a||void 0===a?void 0:a.last_name].join(" ")}),Object(l.jsx)(N.a,{variant:"subtitle1",color:"GrayText",marginX:2,mb:1,children:null===a||void 0===a?void 0:a.email}),Object(l.jsx)(H.a,{}),Object(l.jsxs)(B.a,{onClick:function(){y(null),b(!1),x("/account")},children:[Object(l.jsx)(V.a,{children:Object(l.jsx)(G.a,{})}),"Options"]}),Object(l.jsx)(ee,{title:"LOGOUT",message:"Confirm logout?",confirmText:"Logout",action:function(){y(null),x("/login"),r(null),o(!1),localStorage.removeItem("user")},children:Object(l.jsxs)(B.a,{children:[Object(l.jsx)(V.a,{children:Object(l.jsx)($.a,{})}),"Logout"]})})]})]})},re=a(232),ce=a(231),se=["setTabValue","disabled"],ie=function(e){var t=e.setTabValue,a=e.disabled,r=Object(P.a)(e,se),c=[{label:"DIVIDER",icon:C.a,key:0},{label:"News",route:A[0]},{label:"DIVIDER",icon:_.a,key:1},{label:"Calculators",route:"".concat(A[1])},{label:"DIVIDER",icon:T.a,key:2},{label:"Answers",route:A[2]},{label:"DIVIDER",icon:S.a,key:3},{label:"Answers Settings",route:"".concat(A[3],"/").concat(E[0])},{label:"Calculator Settings",route:"".concat(A[3],"/").concat(E[1])},{label:"Regexs Settings",route:"".concat(A[3],"/").concat(E[2])}],s=Object(O.h)(),o=Object(n.useState)(null),j=Object(i.a)(o,2),d=j[0],b=j[1],u=Boolean(d);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(W.a,Object(z.a)(Object(z.a)({"aria-label":"Go to...",onClick:function(e){b(e.currentTarget)}},r),{},{sx:{display:{xs:"inline-flex",sm:"none"}},disabled:a,children:Object(l.jsx)(ce.a,{})})),Object(l.jsx)(I.a,{id:"aria_menu",anchorEl:d,open:u,onClose:function(){b(null)},TransitionComponent:D.a,children:c.map((function(e){return"DIVIDER"===e.label?Object(l.jsx)(H.a,{textAlign:"right",children:Object(l.jsx)(e.icon,{})},e.key):Object(l.jsxs)(B.a,{onClick:function(){var a;a=e.route,b(null),s(a),t("/".concat(a.split("/")[1]))},children:[Object(l.jsx)(V.a,{children:Object(l.jsx)(re.a,{})}),e.label]},e.label)}))})]})},oe=function(){var e,t=Object(n.useContext)(d).auth,a=!Boolean(t),r=Object(O.g)();switch("/".concat(r.pathname.split("/")[1])){case A[0]:e=A[0];break;case A[1]:e=A[1];break;case A[2]:e=A[2];break;case A[3]:e=A[3];break;default:e=!1}var c=Object(n.useState)(e),o=Object(i.a)(c,2),j=o[0],b=o[1];return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(g.a,{position:"sticky",children:Object(l.jsxs)(y.a,{sx:{justifyContent:"space-between"},children:[Object(l.jsx)(ie,{setTabValue:b,disabled:a}),Object(l.jsxs)(w.a,{sx:{visibility:{xs:"hidden",sm:"visible"}},indicatorColor:"primary",onChange:function(e,t){switch(t){case A[0]:case A[1]:case A[2]:b(t)}},value:j,children:[Object(l.jsx)(k.a,{value:A[0],label:"News",icon:Object(l.jsx)(C.a,{}),iconPosition:"start",component:s.b,to:A[0],disabled:a}),Object(l.jsx)(k.a,{value:A[1],label:"Calculators",icon:Object(l.jsx)(_.a,{}),iconPosition:"start",component:s.b,to:A[1],disabled:a}),Object(l.jsx)(k.a,{value:A[2],label:"Answers",icon:Object(l.jsx)(T.a,{}),iconPosition:"start",component:s.b,to:A[2],disabled:a}),Object(l.jsx)(R,{value:A[3],label:"Settings",icon:Object(l.jsx)(S.a,{}),setTabValue:b,items:[{label:"Answers Settings",sub_route:E[0]},{label:"Calculator Settings",sub_route:E[1]},{label:"Regexs Settings",sub_route:E[2]}],disabled:a})]}),Object(l.jsx)(ne,{setTabValue:b,disabled:a})]})})})},le=a(17),je=a.n(le),de=a(22),be=a(20),ue=a.n(be),Oe=function(e){var t=e.children,a=e.setAuth,r=e.user,c=e.setUser,s=Object(n.useContext)(b).setFetchedPosts,o=Object(n.useState)(null),l=Object(i.a)(o,2),j=l[0],d=l[1],u=Object(O.h)();return Object(n.useEffect)((function(){var e=ue.a.CancelToken.source(),t=function(){var t=Object(de.a)(je.a.mark((function t(){var n,i,o;return je.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ue.a.post(U+"/news/fetch-posts",{last_post:j},{cancelToken:e.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(null===r||void 0===r?void 0:r.token)}});case 3:(n=t.sent).data.newest_post?(d(n.data.newest_post),s(n.data.posts)):n.data.wrn?console.warn(n.data.wrn):n.data.err&&(a(!1),console.error(n.data.err)),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),422!==(o=null===(i=t.t0.response)||void 0===i?void 0:i.status)&&401!==o||(u("/login"),c(null),a(!1),localStorage.removeItem("user"));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();r&&t();var n=setInterval((function(){(null===r||void 0===r?void 0:r.token)&&t()}),3e3);return function(){clearInterval(n),e.cancel("Leaving News page or the data is already loaded")}}),[r,c,a,u,j,s]),Object(n.useEffect)((function(){var e=ue.a.CancelToken.source(),t=setInterval((function(){(null===r||void 0===r?void 0:r.token)&&Object(de.a)(je.a.mark((function t(){var a;return je.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ue.a.get(U+"/users/refresh-auth",{cancelToken:e.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(r.token)}});case 3:(a=t.sent).data.user&&c(a.data.user),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}),828e5);return function(){clearInterval(t)}}),[r,c]),t},he=a(277),me=a(257),xe=a(252),pe=a(249),ve=a(272),fe=a(233),ge=a(258),ye=a(273),we=a(234),ke=function(e,t){var a,n=((e-t)/864e5).toFixed();switch(n){case"0":a="Today";break;case"1":a="Yesterday";break;default:a="".concat(n," days ago")}return a},Ce=function(e){var t=e.filter,a=t.severity,r=t.owner,c=e.handleMessage,s=Object(n.useContext)(b).fetchedPosts,o=Object(n.useContext)(j).user,d=Object(n.useState)(""),u=Object(i.a)(d,2),O=u[0],h=u[1],m=Object(n.useMemo)((function(){if(s.length>0){var e;switch(a){case"Reminder":e="rem";break;case"Normal":e="nor";break;case"Urgent":e="urg";break;default:e=null}var t="from All"===r?null:o.email,n=s.filter((function(a){return(!e||a.severity===e)&&(!t||a.owner._id===t)})),c=[],i=(new Date).getTime(),l=i;return n.length>0?n.forEach((function(e){var t=ke(i,e._id.$date);l!==t&&(c.push({divider:t}),l=t),c.push(e)})):c.push({divider:"There are no posts with those conditions"}),c}}),[s,a,r,o]),x=function(){h("")};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(me.a,{item:!0,xs:12,md:7,children:Object(l.jsx)(ve.a,{border:2,p:2,borderRadius:1,borderColor:"primary.main",sx:{height:"80vh"},children:Object(l.jsx)(fe.a,{spacing:1,pr:1,sx:{paddingBlockEnd:2,height:"75vh",overflow:"auto"},children:null===m||void 0===m?void 0:m.map((function(e){var t;if(e.divider&&(t=Object(l.jsx)(me.a,{item:!0,children:Object(l.jsx)(H.a,{children:Object(l.jsx)(ge.a,{color:"primary",label:e.divider})})},e.divider)),e._id){var a;switch(e.severity){case"rem":a={icon:Object(l.jsx)(we.a,{}),severity:"success"};break;case"nor":a={severity:"warning"};break;case"urg":a={severity:"error"};break;default:a={}}(o.is_admin||e.owner._id===o.email)&&(a=Object(z.a)(Object(z.a)({},a),{},{onClose:function(){h(e._id)}})),t=Object(l.jsx)(me.a,{item:!0,children:Object(l.jsxs)(pe.a,Object(z.a)(Object(z.a)({variant:"filled"},a),{},{children:[Object(l.jsx)(ye.a,{children:Object(l.jsxs)(N.a,{variant:"h5",children:[e.owner.username," - ",e.title]})}),Object(l.jsx)(N.a,{variant:"body1",sx:{whiteSpace:"pre-line"},children:e.content})]}))},e._id.$date)}return t}))})})}),Object(l.jsxs)(K.a,{open:Boolean(O),onClose:x,"aria-labelledby":"title","aria-describedby":"description",children:[Object(l.jsx)(J.a,{id:"title",children:"Delete"}),Object(l.jsx)(q.a,{children:Object(l.jsx)(Y.a,{id:"description",children:"Confirm delete post?"})}),Object(l.jsxs)(X.a,{children:[Object(l.jsx)(Q.a,{onClick:x,children:"Cancel "}),Object(l.jsx)(Q.a,{onClick:function(){return e=O,Object(de.a)(je.a.mark((function t(){var a;return je.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ue.a.delete(U+"/news/delete-post",{headers:{Accept:"*/*",Authorization:"Bearer ".concat(o.token)},data:e});case 2:(a=t.sent).data.msg&&c(a.data.msg,"info"),a.data.wrn&&c(a.data.wrn,"warning"),a.data.err&&c(a.data.err,"error");case 6:case"end":return t.stop()}}),t)})))(),void h("");var e},color:"error",autoFocus:!0,children:"DELETE "})]})]})]})},_e=a(3),Te=a(235),Se=a(247),Ae=a(236),Ee=a(274),Ue=a(251),ze=["options","option","setOption"],Pe=function(e){var t=e.options,a=e.option,n=e.setOption,r=Object(P.a)(e,ze);return Object(l.jsx)(Ee.a,Object(z.a)(Object(z.a)({fullWidth:!0},r),{},{children:Object(l.jsx)(Ue.a,{size:"small",value:a,onChange:function(e){n(e.target.value)},children:t.map((function(e){return Object(l.jsx)(B.a,{value:e,children:e},e)}))})}))},Ie=function(e){var t,a=e.filter,r=a.severity,c=a.setSeverity,s=a.owner,o=a.setOwner,d=e.handleMessage,b=Object(n.useContext)(j).user,u=Object(n.useState)({title:"",content:"",days_offset:""}),O=Object(i.a)(u,2),h=O[0],m=O[1],x=Object(n.useState)("Normal"),p=Object(i.a)(x,2),v=p[0],f=p[1],g=Object(n.useState)("to Me"),y=Object(i.a)(g,2),w=y[0],k=y[1],C=function(e){var t=e.target,a=t.name,n=t.value;m(Object(z.a)(Object(z.a)({},h),{},Object(_e.a)({},a,n)))},_=function(){switch(v){case"Reminder":return"rem";default:case"Normal":return"nor";case"Urgent":return"urg"}},T=function(){switch(w){default:case"to Me":return!1;case"to All":return!0}},S=Object(Te.a)((function(e){return e.breakpoints.down("md")})),A={rows:S?8:12};switch(v){case"Reminder":t={color:"success"};break;case"Normal":t={color:"warning"};break;case"Urgent":t={color:"error"};break;default:t={}}return Object(l.jsx)(me.a,{item:!0,xs:12,md:5,children:Object(l.jsx)(ve.a,{sx:{paddingBlockEnd:2,height:"80vh"},border:2,p:2,borderRadius:1,borderColor:"secondary.main",children:Object(l.jsxs)(me.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"center",sx:{height:"75vh",overflow:"auto"},children:[Object(l.jsx)(me.a,{item:!0,xs:6,children:Object(l.jsx)(Pe,{options:["All","Urgent","Normal","Reminder"],option:r,setOption:c})}),Object(l.jsx)(me.a,{item:!0,xs:6,children:Object(l.jsx)(Pe,{options:["from All","Mine only"],option:s,setOption:o})}),Object(l.jsx)(me.a,{item:!0,xs:12,children:Object(l.jsx)(H.a,{children:Object(l.jsx)(N.a,{color:"secondary",children:"CREATE NEW POST"})})}),Object(l.jsx)(me.a,{item:!0,xs:12,children:Object(l.jsx)(Se.a,{fullWidth:!0,size:"small",label:"Title",name:"title",value:h.title,onChange:C})}),Object(l.jsx)(me.a,{item:!0,xs:12,children:Object(l.jsx)(Se.a,Object(z.a)(Object(z.a)({fullWidth:!0},A),{},{multiline:!0,size:"small",label:"Content",name:"content",value:h.content,onChange:C}))}),Object(l.jsx)(me.a,{item:!0,xs:7,md:3,children:Object(l.jsx)(Pe,{options:["Urgent","Normal","Reminder"],option:v,setOption:f})}),Object(l.jsx)(me.a,{item:!0,xs:5,md:3,children:Object(l.jsx)(Pe,{options:["to Me","to All"],option:w,setOption:k})}),Object(l.jsx)(me.a,{item:!0,xs:7,md:3,children:Object(l.jsx)(Se.a,{fullWidth:!0,label:"within days",size:"small",name:"days_offset",type:"number",inputProps:{min:"0",max:"7",step:"1"},value:h.days_offset,onChange:C})}),Object(l.jsx)(me.a,{item:!0,xs:5,md:3,children:Object(l.jsx)(Q.a,Object(z.a)(Object(z.a)({variant:"contained",fullWidth:!0,size:"small",onClick:function(){if(h.title)if(h.content){var e=parseInt(h.days_offset||0);0>e||7<e?d('"within days" must be between 0 and 7',"error"):Object(de.a)(je.a.mark((function t(){var a;return je.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ue.a.post(U+"/news/create-post",{title:h.title,content:h.content,severity:_(),days_offset:e,is_public:T()},{headers:{Accept:"*/*",Authorization:"Bearer ".concat(b.token)}});case 3:(a=t.sent).data.msg&&(d(a.data.msg,"success"),m({title:"",content:"",days_offset:""}),f("Normal"),k("to Me")),a.data.err&&d(a.data.err,"error"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}else d("You must provide a Content","error");else d("You must provide a Title","error")}},t),{},{endIcon:Object(l.jsx)(Ae.a,{}),children:Object(l.jsx)(N.a,{variant:"h6",children:"Send"})}))})]})})})},De=function(){var e=Object(n.useState)("All"),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)("from All"),s=Object(i.a)(c,2),o=s[0],j=s[1],d=Object(n.useState)({msg:"",vnt:""}),b=Object(i.a)(d,2),u=b[0],O=b[1],h=Object(n.useState)(!1),m=Object(i.a)(h,2),x=m[0],p=m[1],v={severity:a,setSeverity:r,owner:o,setOwner:j},f=function(e,t){O({msg:e,vnt:t}),p(!0)};return Object(l.jsxs)(he.a,{maxWidth:"xl",children:[Object(l.jsxs)(me.a,{container:!0,spacing:1,margin:0,pt:3,children:[Object(l.jsx)(Ie,{filter:v,handleMessage:f}),Object(l.jsx)(Ce,{filter:{severity:a,owner:o},handleMessage:f})]}),Object(l.jsx)(xe.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:x,autoHideDuration:3e3,onClose:function(){p(!1)},children:Object(l.jsx)(pe.a,{variant:"filled",color:u.vnt,children:u.msg})})]})},Be=a(278),Fe=a(280),Re=a(19),We=a(260),Me=a(250),Ne=a(279),He=a(237),Ve=a(238),Le=a(239),Ge=function(e){var t=e.handleMessage,a=e.history,r=e.setHistory,c=Object(n.useContext)(j).user,s=Object(n.useState)({first:"",second:"",third:""}),o=Object(i.a)(s,2),d=o[0],b=o[1],u=Object(n.useState)("pri"),O=Object(i.a)(u,2),h=O[0],m=O[1],x=Object(n.useState)("add"),p=Object(i.a)(x,2),v=p[0],g=p[1],y=Object(n.useState)(""),w=Object(i.a)(y,2),k=w[0],C=w[1],T=function(e){var t=e.target,a=t.name,n=t.value;b(Object(z.a)(Object(z.a)({},d),{},Object(_e.a)({},a,n)))},S=function(e,n,s){for(var o=0,l=Object.entries(n);o<l.length;o++){var j=Object(i.a)(l[o],2),u=j[0];if(!j[1])return void t("The ".concat(u," field is required"),"error")}n=Object(z.a)(Object(z.a)({},n),{},{sign:h,operation:v}),Object(de.a)(je.a.mark((function i(){var o;return je.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,ue.a.post(U+e,n,{headers:{Accept:"*/*",Authorization:"Bearer ".concat(c.token)}});case 3:void 0!==(o=i.sent).data.result&&(t("$".concat(o.data.result),"success"),r([{_id:{$date:(new Date).getTime()},calculation:o.data.calculation,footnote:o.data.footnote}].concat(Object(Re.a)(a))),b(Object(z.a)(Object(z.a)({},d),{},Object(_e.a)({},s,o.data.result))),n.expression||C(o.data.result)),o.data.err&&t(o.data.err,"error"),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(0),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[0,8]])})))()},A=function(){S("/calculator/resolve-expression",{expression:k})};return Object(l.jsx)(me.a,{item:!0,xs:12,md:7,children:Object(l.jsx)(f.a,{elevation:5,sx:{borderRadius:3},children:Object(l.jsx)(ve.a,{sx:{paddingBlockEnd:2,minHeight:"65vh"},p:2,children:Object(l.jsxs)(me.a,{container:!0,spacing:3,align:"center",pr:2,sx:{minHeight:"60vh",overflow:"auto"},children:[Object(l.jsx)(me.a,{item:!0,xs:12,md:4,children:Object(l.jsx)(Ee.a,{sx:{width:"100%"},component:"fieldset",children:Object(l.jsx)(We.a,{name:"sign",value:h,onChange:function(e){var t=e.target.value;m(t),b(Object(z.a)(Object(z.a)({},d),{},{first:"",third:""}))},children:Object(l.jsx)(f.a,{children:Object(l.jsxs)(me.a,{item:!0,px:3,children:[Object(l.jsx)(Be.a,{value:"pri",control:Object(l.jsx)(Me.a,{}),label:Object(l.jsx)(N.a,{variant:"h5",color:"primary",children:"$"})}),Object(l.jsx)(Be.a,{value:"per",control:Object(l.jsx)(Me.a,{color:"secondary"}),label:Object(l.jsx)(N.a,{variant:"h5",color:"secondary",children:"%"})})]})})})})}),Object(l.jsx)(me.a,{item:!0,xs:12,md:4,children:Object(l.jsx)(Ee.a,{sx:{width:"100%"},component:"fieldset",children:Object(l.jsx)(We.a,{name:"operation",value:v,onChange:function(e){var t=e.target.value;g(t),b(Object(z.a)(Object(z.a)({},d),{},{second:""}))},children:Object(l.jsx)(f.a,{children:Object(l.jsxs)(me.a,{px:3,children:[Object(l.jsx)(Be.a,{value:"add",control:Object(l.jsx)(Me.a,{}),label:Object(l.jsx)(N.a,{variant:"h4",color:"primary",children:"+"})}),Object(l.jsx)(Be.a,{value:"sub",control:Object(l.jsx)(Me.a,{color:"secondary"}),label:Object(l.jsx)(N.a,{variant:"h4",color:"secondary",children:"-"})})]})})})})}),Object(l.jsx)(me.a,{item:!0,xs:12,md:4}),Object(l.jsx)(me.a,{item:!0,xs:12,md:4,children:Object(l.jsx)(Se.a,{fullWidth:!0,size:"small",type:"number",label:"pri"===h?"Price":"Percentage",InputProps:{inputProps:{min:"0",step:"10"},startAdornment:Object(l.jsx)(Ne.a,{position:"start",children:Object(l.jsx)(N.a,{variant:"h5",color:"pri"===h?"primary":"secondary",children:"pri"===h?"$":""})}),endAdornment:Object(l.jsx)(Ne.a,{position:"start",children:Object(l.jsx)(N.a,{variant:"h5",color:"secondary",children:"pri"===h?"":"%"})})},name:"first",value:d.first,onChange:T})}),Object(l.jsx)(me.a,{item:!0,xs:12,md:4,children:Object(l.jsx)(Se.a,{fullWidth:!0,label:"day/month/year | Percentage",size:"small",InputProps:{startAdornment:Object(l.jsx)(Ne.a,{position:"start",children:Object(l.jsx)(N.a,{variant:"h4",color:"add"===v?"primary":"secondary",children:"add"===v?"+":"-"})}),endAdornment:Object(l.jsx)(Ne.a,{position:"start",children:Object(l.jsx)(N.a,{variant:"h5",color:"inherit",children:"%"})})},name:"second",value:d.second,onChange:T})}),Object(l.jsx)(me.a,{item:!0,xs:12,md:4,children:Object(l.jsx)(Se.a,{fullWidth:!0,label:"Result",type:"number",size:"small",InputProps:{inputProps:{min:"0",step:"10"},startAdornment:Object(l.jsx)(Ne.a,{position:"start",children:Object(l.jsx)(N.a,{variant:"h5",color:"inherit",children:"pri"===h?"= $":"="})}),endAdornment:Object(l.jsx)(Ne.a,{position:"start",children:Object(l.jsx)(N.a,{variant:"h5",color:"inherit",children:"pri"===h?"":"%"})})},name:"third",value:d.third,onChange:T})}),Object(l.jsx)(me.a,{item:!0,xs:12,md:4,children:Object(l.jsx)(Q.a,{fullWidth:!0,onClick:function(){var e={second:d.second,third:d.third};S("/calculator/get-first-term",e,"first")},size:"large",sx:{minHeight:"100%"},variant:"contained",color:"success",endIcon:Object(l.jsx)(He.a,{}),children:Object(l.jsx)(N.a,{variant:"body1",children:"GET"})})}),Object(l.jsx)(me.a,{item:!0,xs:12,md:4,children:Object(l.jsx)(Q.a,{fullWidth:!0,onClick:function(){var e={first:d.first,third:d.third};S("/calculator/get-second-term",e,"second")},size:"large",sx:{minHeight:"100%"},variant:"contained",color:"success",endIcon:Object(l.jsx)(Ve.a,{}),children:Object(l.jsx)(N.a,{variant:"body1",children:"GET"})})}),Object(l.jsx)(me.a,{item:!0,xs:12,md:4,children:Object(l.jsx)(Q.a,{fullWidth:!0,onClick:function(){var e={first:d.first,second:d.second};S("/calculator/get-result",e,"third")},size:"large",sx:{minHeight:"100%"},variant:"contained",color:"success",endIcon:Object(l.jsx)(Le.a,{}),children:Object(l.jsx)(N.a,{variant:"body1",children:"GET"})})}),Object(l.jsx)(me.a,{item:!0,xs:12,py:2,children:Object(l.jsx)(H.a,{})}),Object(l.jsx)(me.a,{item:!0,xs:12,children:Object(l.jsx)(Se.a,{fullWidth:!0,label:"Evaluate Expression",size:"small",name:"expression",InputProps:{style:{fontFamily:"monospace",fontSize:20},startAdornment:Object(l.jsx)(Ne.a,{position:"start",children:Object(l.jsx)(N.a,{variant:"h4",color:"primary",children:">>>"})})},InputLabelProps:{style:{fontFamily:"monospace",fontSize:20}},value:k,onChange:function(e){var t=e.target.value;C(t)},onKeyPress:function(e){"Enter"===e.key&&A()}})}),Object(l.jsx)(me.a,{item:!0,xs:4}),Object(l.jsx)(me.a,{item:!0,xs:12,md:4,children:Object(l.jsx)(Q.a,{fullWidth:!0,onClick:function(){b({first:"",second:"",third:""}),C("")},size:"large",sx:{minHeight:"100%"},variant:"contained",color:"error",endIcon:Object(l.jsx)(_.a,{}),children:Object(l.jsx)(N.a,{variant:"body1",children:"Clear"})})}),Object(l.jsx)(me.a,{item:!0,xs:12,md:4,children:Object(l.jsx)(Q.a,{fullWidth:!0,onClick:A,size:"large",sx:{minHeight:"100%"},variant:"contained",color:"primary",endIcon:Object(l.jsx)(_.a,{}),children:Object(l.jsx)(N.a,{variant:"body1",children:"Evaluate"})})})]})})})})},$e=function(e){var t=e.handleMessage,a=e.history,r=e.setHistory,c=Object(n.useContext)(j).user,s=Object(n.useState)({price:"",str_date:""}),o=Object(i.a)(s,2),d=o[0],b=o[1],u=function(e){var t=e.target,a=t.name,n=t.value;b(Object(z.a)(Object(z.a)({},d),{},Object(_e.a)({},a,n)))},O=function(){for(var e=0,n=Object.entries(d);e<n.length;e++){var s=Object(i.a)(n[e],2),o=s[0];if(!s[1])return void t("The ".concat(o," field is required"),"error")}Object(de.a)(je.a.mark((function e(){var n;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.a.post(U+"/calculator/price-add-percent",Object(z.a)(Object(z.a)({},d),{},{str_date:d.str_date.split("-").reverse().join("/")}),{headers:{Accept:"*/*",Authorization:"Bearer ".concat(c.token)}});case 3:void 0!==(n=e.sent).data.result&&(t("$".concat(n.data.result),"success"),r([{_id:{$date:(new Date).getTime()},calculation:n.data.calculation,footnote:n.data.footnote}].concat(Object(Re.a)(a)))),n.data.err&&t(n.data.err,"error"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()};return Object(l.jsx)(me.a,{item:!0,xs:12,md:7,children:Object(l.jsx)(f.a,{elevation:5,sx:{borderRadius:3},children:Object(l.jsx)(ve.a,{sx:{paddingBlockEnd:2,minHeight:"30vh"},p:2,children:Object(l.jsxs)(me.a,{container:!0,spacing:3,align:"center",pr:2,sx:{minHeight:"25vh",overflow:"auto"},children:[Object(l.jsx)(me.a,{item:!0,xs:12,children:Object(l.jsx)(N.a,{variant:"h5",color:"initial",children:"basic calculator"})}),Object(l.jsx)(me.a,{item:!0,xs:12,md:4,children:Object(l.jsx)(Se.a,{fullWidth:!0,label:"Price",type:"number",name:"price",InputProps:{inputProps:{min:"0",step:"10"},startAdornment:Object(l.jsx)(Ne.a,{position:"start",children:Object(l.jsx)(N.a,{variant:"h5",color:"primary",children:"$"})})},value:d.price,onChange:u,onKeyPress:function(e){"Enter"===e.key&&O()}})}),Object(l.jsx)(me.a,{item:!0,xs:12,md:4,children:Object(l.jsx)(Se.a,{fullWidth:!0,label:"Date",type:"date",InputProps:{startAdornment:Object(l.jsx)(Ne.a,{position:"start",children:Object(l.jsx)(N.a,{variant:"body1",color:"primary",children:"from"})})},name:"str_date",value:d.str_date,onChange:u,onKeyPress:function(e){"Enter"===e.key&&O()}})}),Object(l.jsx)(me.a,{item:!0,xs:12,md:4,children:Object(l.jsx)(Q.a,{fullWidth:!0,onClick:O,size:"large",sx:{minHeight:"75%"},variant:"contained",color:"success",endIcon:Object(l.jsx)(_.a,{}),children:Object(l.jsx)(N.a,{variant:"body1",children:"GET PRICE"})})})]})})})})},Ke=a(245),Je=function(e){var t=e.history,a=Object(n.useMemo)((function(){var e=[],a=(new Date).getTime(),n=a;return t.length>0?t.forEach((function(t){var r=ke(a,t._id.$date);n!==r&&(e.push({divider:r}),n=r),e.push(t)})):e.push({divider:"There are no previous calculations"}),e}),[t]);return Object(l.jsx)(me.a,{item:!0,xs:12,md:5,children:Object(l.jsx)(ve.a,{sx:{paddingBlockEnd:2,height:"75vh",backgroundColor:"primary.dark"},borderRadius:3,p:2,children:Object(l.jsxs)(me.a,{container:!0,spacing:1,align:"center",pr:2,alignItems:"top",alignContent:"flex-start",sx:{height:"70vh",overflow:"auto"},children:[Object(l.jsx)(me.a,{item:!0,xs:12,children:Object(l.jsx)(N.a,{variant:"h5",color:"initial",children:"Result / History"})}),a.map((function(e,t){var a,n;(e.divider&&(a=Object(l.jsx)(me.a,{item:!0,xs:12,children:Object(l.jsx)(H.a,{children:Object(l.jsx)(ge.a,{color:"warning",size:"small",label:e.divider})})},e.divider)),e._id)&&(1!==t&&(n={color:"primary.main"}),a=Object(l.jsx)(me.a,{item:!0,xs:12,children:Object(l.jsx)(f.a,{elevation:7,children:Object(l.jsx)(Ke.a,{title:e.footnote,placement:"right",disableInteractive:!0,arrow:!0,followCursor:!0,children:Object(l.jsx)(N.a,Object(z.a)(Object(z.a)({variant:"h6"},n),{},{children:e.calculation}))})})},e._id.$date));return a}))]})})})},qe=function(){var e=Object(n.useContext)(j).user,t=Object(n.useState)({msg:"",vnt:""}),a=Object(i.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)([]),o=Object(i.a)(s,2),d=o[0],b=o[1],u=Object(n.useState)(!1),O=Object(i.a)(u,2),h=O[0],m=O[1];Object(n.useEffect)((function(){var t=ue.a.CancelToken.source();return Object(de.a)(je.a.mark((function a(){var n;return je.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ue.a.get(U+"/calculator/get-history",{cancelToken:t.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(e.token)}});case 2:(n=a.sent).data.hist&&b(n.data.hist),n.data.msg,n.data.err&&console.error(n.data.err);case 6:case"end":return a.stop()}}),a)})))(),function(){t.cancel()}}),[e,b]);var x=function(e,t){c({msg:e,vnt:t}),m(!0)},p=Object(n.useState)(!1),v=Object(i.a)(p,2),f=v[0],g=v[1];return Object(l.jsxs)(he.a,{maxWidth:"xl",children:[Object(l.jsxs)(me.a,{container:!0,spacing:1,margin:0,pt:3,children:[Object(l.jsx)(me.a,{item:!0,xs:12,children:Object(l.jsx)(Be.a,{labelPlacement:"start",label:Object(l.jsx)(N.a,{px:1,children:"Calculator"}),control:Object(l.jsx)(Be.a,{control:Object(l.jsx)(Fe.a,{checked:f,onChange:function(e){var t=e.target.checked;g(t)}}),label:"Basic"})})}),f?Object(l.jsx)($e,{history:d,setHistory:b,handleMessage:x}):Object(l.jsx)(Ge,{history:d,setHistory:b,handleMessage:x}),Object(l.jsx)(Je,{history:d,setHistory:b})]}),Object(l.jsx)(xe.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:h,autoHideDuration:3e3,onClose:function(){m(!1)},children:Object(l.jsx)(pe.a,{variant:"filled",color:r.vnt,children:r.msg})})]})},Ye=function(){return Object(l.jsx)(N.a,{variant:"h1",color:"primary",children:"\ud83d\udd27 Answers \ud83d\udd28"})},Xe=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(N.a,{variant:"h6",color:"secondary",children:"Settings"}),Object(l.jsx)(O.b,{})]})},Qe=function(){return Object(l.jsx)(N.a,{variant:"h1",color:"primary",children:"\ud83d\udd27 Answers Settings \ud83d\udd28"})},Ze=function(){return Object(l.jsx)(N.a,{variant:"h1",color:"primary",children:"\ud83d\udd27 Calculator Settings \ud83d\udd28"})},et=function(){return Object(l.jsx)(N.a,{variant:"h1",color:"primary",children:"\ud83d\udd27 Regexs Settings \ud83d\udd28"})},tt=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),s=Object(i.a)(c,2),o=s[0],d=s[1],b=Object(n.useState)(""),u=Object(i.a)(b,2),h=u[0],m=u[1],x=Object(n.useContext)(j),p=x.user,v=x.setUser,f=Object(O.h)(),g=Object(O.g)(),y="/login"===g.pathname?-1:g.pathname,w=function(){var e=Object(de.a)(je.a.mark((function e(t){var n;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,ue.a.post(U+"/users/signin",{username:a,password:o});case 4:(n=e.sent).data.user?v(Object(z.a)(Object(z.a)({},n.data.user),{},{username:a})):(r(""),d(""),m(n.data.msg),setTimeout((function(){m("")}),2500)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:f(y,{replace:!0});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsx)(l.Fragment,{children:p?Object(l.jsx)(O.a,{to:y}):Object(l.jsx)(he.a,{children:Object(l.jsxs)(me.a,{container:!0,spacing:3,margin:0,children:[Object(l.jsx)(me.a,{item:!0,xs:12,children:Object(l.jsx)(N.a,{variant:"h3",color:"primary",children:"User Login"})}),Object(l.jsx)(me.a,{item:!0,children:Object(l.jsx)(D.a,{in:Boolean(h),timeout:1e3,children:Object(l.jsx)(pe.a,{severity:"warning",variant:"outlined",children:h})})}),Object(l.jsx)(me.a,{item:!0,xs:12,children:Object(l.jsx)(Se.a,{id:"uName",label:"Username",value:a,onChange:function(e){r(e.target.value)}})}),Object(l.jsx)(me.a,{item:!0,xs:12,children:Object(l.jsx)(Se.a,{id:"uPass",label:"Password",type:"password",value:o,onChange:function(e){d(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&w(e)}})}),Object(l.jsx)(me.a,{item:!0,xs:12,children:Object(l.jsx)(Q.a,{variant:"contained",color:"primary",onClick:w,children:"Login"})})]})})})},at=["user","setUser"],nt=function(e){var t=e.user,a=e.setUser,r=Object(P.a)(e,at),c=Object(n.useState)({username:"",email:"",password:"",new_password:"",confirm_new_password:"",first_name:"",last_name:"",is_admin:!1}),s=Object(i.a)(c,2),o=s[0],j=s[1];Object(n.useEffect)((function(){var e=ue.a.CancelToken.source();return(null===t||void 0===t?void 0:t.token)&&Object(de.a)(je.a.mark((function a(){var n;return je.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ue.a.get(U+"/users/get-user-data",{cancelToken:e.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:n=a.sent,j(Object(z.a)(Object(z.a)({},n.data),{},{password:"",new_password:"",confirm_new_password:""})),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))(),function(){e.cancel()}}),[t]);var d=function(e){var t=e.target,a=t.name,n=t.value,r=t.checked;j(Object(z.a)(Object(z.a)({},o),{},Object(_e.a)({},a,"is_admin"!==a?n:r)))},b=Object(n.useState)(!0),u=Object(i.a)(b,2),O=u[0],h=u[1],m=function(e){var t=e.target,a=t.name,n=t.value;"new_password"===a?(j(Object(z.a)(Object(z.a)({},o),{},Object(_e.a)({},a,n))),h(o.confirm_new_password===n)):(j(Object(z.a)(Object(z.a)({},o),{},Object(_e.a)({},a,n))),h(o.new_password===n))},x=Object(n.useState)({msg:"",vnt:"info"}),p=Object(i.a)(x,2),v=p[0],g=p[1],y=function(){if(!O)return g({msg:"new password doesn't match",vnt:"error"}),void setTimeout((function(){g({msg:"",vnt:"error"})}),2500);Object(de.a)(je.a.mark((function e(){var n,r;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.a.post(U+"/users/update-user",o,{headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:(n=e.sent).data.msg?(g({msg:n.data.msg,vnt:"success"}),r=Object(z.a)(Object(z.a)({},t),{},{username:o.username,first_name:o.first_name,last_name:o.last_name,is_admin:o.is_admin}),setTimeout((function(){g({msg:"",vnt:"success"})}),2500),n.data.wrn?(setTimeout((function(){g({msg:n.data.wrn,vnt:"warning"})}),2600),setTimeout((function(){g({msg:"",vnt:"warning"}),a(r)}),5100)):a(r)):(g({msg:n.data.err,vnt:"error"}),setTimeout((function(){g({msg:"",vnt:"error"})}),2500)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))(),setTimeout((function(){h(!0)}),500)};return Object(l.jsx)(n.Fragment,Object(z.a)(Object(z.a)({},r),{},{children:Object(l.jsx)(me.a,{item:!0,xs:12,md:4,children:Object(l.jsx)(f.a,{elevation:3,children:Object(l.jsxs)(me.a,{container:!0,spacing:2,margin:0,px:{xs:0,md:3},children:[Object(l.jsx)(me.a,{item:!0,children:Object(l.jsx)(N.a,{variant:"h6",color:"primary",children:"Update My User Account"})}),Object(l.jsx)(me.a,{item:!0,xs:12,mx:1,children:Object(l.jsx)(N.a,{variant:"h6",color:"GrayText",children:o.email})}),Object(l.jsx)(me.a,{item:!0,children:Object(l.jsx)(Se.a,{size:"small",name:"username",label:"Username",value:o.username,onChange:d})}),t.is_admin&&Object(l.jsx)(me.a,{item:!0,mb:0,children:Object(l.jsx)(Be.a,{control:Object(l.jsx)(Fe.a,{size:"small",name:"is_admin",checked:o.is_admin,onChange:d}),label:"Is Admin"})}),Object(l.jsx)(me.a,{item:!0,children:Object(l.jsx)(Se.a,{size:"small",name:"first_name",label:"First Name",value:o.first_name,onChange:d})}),Object(l.jsx)(me.a,{item:!0,children:Object(l.jsx)(Se.a,{size:"small",name:"last_name",label:"Last Name",value:o.last_name,onChange:d})}),Object(l.jsxs)(me.a,{item:!0,children:[Object(l.jsxs)(f.a,{elevation:1,sx:{background:"darkGray2",display:"inline-block"},children:[Object(l.jsx)(me.a,{item:!0,pb:2,children:Object(l.jsx)(Se.a,{size:"small",error:!O,name:"new_password",label:"New Password",type:"password",value:o.new_password,onChange:m})}),Object(l.jsx)(me.a,{item:!0,children:Object(l.jsx)(Se.a,{size:"small",error:!O,name:"confirm_new_password",label:"Confirm New Password",type:"password",value:o.confirm_new_password,onChange:m})})]}),Object(l.jsxs)(me.a,{container:!0,columns:2,pt:2,children:[Object(l.jsx)(me.a,{item:!0,pb:2,children:Object(l.jsx)(Se.a,{size:"small",color:"warning",focused:!0,name:"password",label:"Password",type:"password",value:o.password,onChange:d,onKeyPress:function(e){"Enter"===e.key&&y()}})}),Object(l.jsx)(ee,{title:"Update User",message:"Confirm user update?",confirmText:"UPDATE",action:y,children:Object(l.jsx)(me.a,{item:!0,px:2,pb:2,children:Object(l.jsx)(Q.a,{variant:"contained",color:"warning",children:"UPDATE"})})})]}),Object(l.jsx)(me.a,{item:!0,pb:2,children:Object(l.jsx)(D.a,{in:Boolean(v.msg),timeout:1e3,children:Object(l.jsx)(pe.a,{severity:v.vnt,variant:"outlined",children:v.msg})})})]})]})})})}))},rt=a(253),ct=a(241),st=a(242),it=a(240),ot=["user","setEdit","usersSate","setUsersState","initialOtherUser","setOtherUserData"],lt=function(e){var t=e.user,a=e.setEdit,r=e.usersSate,c=e.setUsersState,s=e.initialOtherUser,o=e.setOtherUserData,j=Object(P.a)(e,ot),d=Object(n.useState)([]),b=Object(i.a)(d,2),u=b[0],O=b[1];Object(n.useEffect)((function(){var e=ue.a.CancelToken.source();return(null===t||void 0===t?void 0:t.token)&&Object(de.a)(je.a.mark((function a(){var n;return je.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ue.a.get(U+"/users/get-users",{cancelToken:e.token,headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:n=a.sent,O(n.data),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))(),function(){e.cancel()}}),[t,r]);return Object(l.jsx)(n.Fragment,Object(z.a)(Object(z.a)({},j),{},{children:Object(l.jsxs)(me.a,{item:!0,xs:12,md:4,children:[Object(l.jsx)(f.a,{elevation:3,children:Object(l.jsxs)(me.a,{container:!0,spacing:2,margin:0,px:{xs:0,md:3},children:[Object(l.jsx)(me.a,{item:!0,children:Object(l.jsx)(N.a,{variant:"h6",color:"primary",children:"List of Active Users"})}),u.map((function(e){return Object(l.jsx)(rt.a,{secondaryAction:Object(l.jsx)(ee,{title:"Delete",message:"Confirm user Delete?",confirmText:"DELETE",action:function(){return n=e.email,Object(de.a)(je.a.mark((function e(){var a;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.a.post(U+"/users/delete-other-user",{email:n},{headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:(a=e.sent).data.msg?(c({msg:a.data.msg,vnt:"info"}),setTimeout((function(){c({msg:"",vnt:"info"})}),2500)):(c({msg:a.data.err,vnt:"error"}),setTimeout((function(){c({msg:"",vnt:"error"})}),2500)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))(),a(!1),void o(s);var n},children:Object(l.jsx)(W.a,{edge:"end",children:Object(l.jsx)(it.a,{fontSize:"large",color:"error"})})}),children:Object(l.jsx)(ct.a,{onClick:function(){!function(e){o(Object(z.a)({},e)),a(!0)}(e)},children:Object(l.jsx)(st.a,{primary:["".concat(e.username," -"),e.first_name,e.last_name].join(" "),secondary:e.email})})},e.username)}))]})}),Object(l.jsx)(me.a,{item:!0,pt:3,children:Object(l.jsx)(D.a,{in:Boolean(r.msg),timeout:1e3,children:Object(l.jsx)(pe.a,{severity:r.vnt,variant:"outlined",children:r.msg})})})]})}))},jt=["user","edit","setEdit","setUsersState","initialOtherUser","otherUserData","setOtherUserData"],dt=function(e){var t=e.user,a=e.edit,r=e.setEdit,c=e.setUsersState,s=e.initialOtherUser,o=e.otherUserData,j=e.setOtherUserData,d=Object(P.a)(e,jt),b=function(e){var t=e.target,a=t.name,n=t.value,r=t.checked;j(Object(z.a)(Object(z.a)({},o),{},Object(_e.a)({},a,"is_admin"!==a?n:r)))},u=Object(n.useState)(!0),O=Object(i.a)(u,2),h=O[0],m=O[1],x=function(e){var t=e.target,a=t.name,n=t.value;"email"===a?(j(Object(z.a)(Object(z.a)({},o),{},Object(_e.a)({},a,n))),m(o.confirm_email===n)):(j(Object(z.a)(Object(z.a)({},o),{},Object(_e.a)({},a,n))),m(o.email===n))};return Object(l.jsx)(n.Fragment,Object(z.a)(Object(z.a)({},d),{},{children:Object(l.jsx)(me.a,{item:!0,xs:12,md:4,children:Object(l.jsx)(f.a,{elevation:3,children:Object(l.jsxs)(me.a,{container:!0,spacing:2,margin:0,px:{xs:0,md:3},children:[Object(l.jsx)(me.a,{item:!0,children:Object(l.jsx)(N.a,{variant:"h6",color:"primary",children:"Update My User Account"})}),a?Object(l.jsx)(me.a,{item:!0,xs:12,mx:1,children:Object(l.jsx)(N.a,{variant:"h6",color:"GrayText",children:o.email})}):Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(me.a,{item:!0,children:Object(l.jsxs)(f.a,{elevation:1,sx:{background:"darkGray2",display:"inline-block"},children:[Object(l.jsx)(me.a,{item:!0,pb:2,children:Object(l.jsx)(Se.a,{size:"small",error:!h,name:"email",label:"Email (ID - immutable)",value:o.email,onChange:x})}),Object(l.jsx)(me.a,{item:!0,children:Object(l.jsx)(Se.a,{size:"small",error:!h,name:"confirm_email",label:"Confirm Email",value:o.confirm_email,onChange:x})})]})})}),Object(l.jsx)(me.a,{item:!0,children:Object(l.jsx)(Se.a,{size:"small",name:"username",label:"Username",value:o.username,onChange:b})}),Object(l.jsx)(me.a,{item:!0,mb:0,children:Object(l.jsx)(Be.a,{control:Object(l.jsx)(Fe.a,{name:"is_admin",checked:o.is_admin,onChange:b}),label:"Is Admin"})}),Object(l.jsx)(me.a,{item:!0,children:Object(l.jsx)(Se.a,{size:"small",name:"first_name",label:"Fisrs Name",value:o.first_name,onChange:b})}),Object(l.jsx)(me.a,{item:!0,children:Object(l.jsx)(Se.a,{size:"small",name:"last_name",label:"Last Name",value:o.last_name,onChange:b})}),Object(l.jsx)(me.a,{item:!0,children:Object(l.jsx)(me.a,{container:!0,columns:2,sx:{alignItems:"flex-end"},children:a?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(me.a,{item:!0,pl:2,pb:2,children:Object(l.jsx)(Q.a,{variant:"contained",color:"error",onClick:function(){j(s),r(!1),m(!0)},children:"CANCEL"})}),Object(l.jsx)(ee,{title:"Update Other User",message:"Confirm user update?",confirmText:"UPDATE",action:function(){Object(de.a)(je.a.mark((function e(){var a;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.a.post(U+"/users/update-other-user",{email:(n=o).email,username:n.username,first_name:n.first_name,last_name:n.last_name,is_admin:n.is_admin},{headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:(a=e.sent).data.msg?(c({msg:a.data.msg,vnt:"success"}),setTimeout((function(){c({msg:"",vnt:"success"})}),2500)):(c({msg:a.data.err,vnt:"error"}),setTimeout((function(){c({msg:"",vnt:"error"})}),2500)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}var n}),e,null,[[0,7]])})))(),j(s),r(!1)},children:Object(l.jsx)(me.a,{item:!0,pl:2,pb:2,children:Object(l.jsx)(Q.a,{variant:"contained",color:"warning",children:"UPDATE"})})})]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(me.a,{item:!0,pb:2,children:Object(l.jsx)(f.a,{elevation:1,sx:{maxWidth:"230px",background:"darkGray2",display:"inline-block"},children:Object(l.jsx)(me.a,{item:!0,p:2,children:Object(l.jsx)(N.a,{variant:"body1",color:"warning.main",children:'By default the password will be "abc123" the user must change it later'})})})}),Object(l.jsx)(me.a,{item:!0,px:2,pb:2,children:Object(l.jsx)(Q.a,{variant:"contained",color:"success",onClick:function(){for(var e=0,a=Object.entries(o);e<a.length;e++){var n=Object(i.a)(a[e],2),r=n[0];if(!n[1])return c({msg:"Missing Value ".concat(r),vnt:"error"}),void setTimeout((function(){c({msg:"",vnt:"error"})}),2500)}if(!h)return c({msg:"Email doesn't match",vnt:"error"}),void setTimeout((function(){c({msg:"",vnt:"error"})}),2500);Object(de.a)(je.a.mark((function e(){var a;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.a.post(U+"/users/signup",o,{headers:{Accept:"*/*",Authorization:"Bearer ".concat(t.token)}});case 3:(a=e.sent).data.msg?(c({msg:a.data.msg,vnt:"success"}),j(s),setTimeout((function(){c({msg:"",vnt:"success"})}),2500)):(c({msg:a.data.err,vnt:"error"}),setTimeout((function(){c({msg:"",vnt:"error"})}),2500)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))(),setTimeout((function(){m(!0)}),500)},children:"CREATE"})})]})})})]})})})}))},bt=function(){var e=Object(n.useContext)(j),t=e.user,a=e.setUser,r={username:"",email:"",confirm_email:"",first_name:"",last_name:"",is_admin:!1},c=Object(n.useState)(!1),s=Object(i.a)(c,2),o=s[0],d=s[1],b=Object(n.useState)(r),u=Object(i.a)(b,2),O=u[0],h=u[1],m=Object(n.useState)({msg:"",vnt:"success"}),x=Object(i.a)(m,2),p=x[0],v=x[1];return Object(l.jsxs)(he.a,{maxWidth:"xl",children:[Object(l.jsx)(me.a,{item:!0,xs:12,children:Object(l.jsx)(N.a,{variant:"h3",color:"secondary",children:"User Account"})}),Object(l.jsxs)(me.a,{container:!0,spacing:3,children:[Object(l.jsx)(nt,{user:t,setUser:a}),t.is_admin&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(lt,{user:t,setEdit:d,usersSate:p,setUsersState:v,initialOtherUser:r,setOtherUserData:h}),Object(l.jsx)(dt,{user:t,edit:o,setEdit:d,setUsersState:v,initialOtherUser:r,otherUserData:O,setOtherUserData:h})]})]})]})},ut=Object(h.a)({palette:{mode:"dark",primary:x.a,secondary:p.a}}),Ot=function(){var e=Object(n.useContext)(j),t=e.user,a=e.setUser,r=Object(n.useContext)(d),c=r.auth,s=r.setAuth;return Object(n.useEffect)((function(){(null===t||void 0===t?void 0:t.token)&&s(!0)}),[t,s]),Object(l.jsx)(m.a,{theme:ut,children:Object(l.jsx)(v.a,{enableColorScheme:!0,children:Object(l.jsxs)(f.a,{sx:{paddingBlockEnd:2,minHeight:"100vh"},square:!0,children:[Object(l.jsx)(oe,{}),c?Object(l.jsx)(Oe,{setAuth:s,user:t,setUser:a,children:Object(l.jsxs)(O.e,{children:[Object(l.jsx)(O.c,{path:"/",element:Object(l.jsx)(O.a,{to:A[0]})}),Object(l.jsx)(O.c,{path:A[0],element:Object(l.jsx)(De,{})}),Object(l.jsx)(O.c,{path:A[1],element:Object(l.jsx)(qe,{})}),Object(l.jsx)(O.c,{path:A[2],element:Object(l.jsx)(Ye,{})}),Object(l.jsxs)(O.c,{path:A[3],element:Object(l.jsx)(Xe,{}),children:[Object(l.jsx)(O.c,{path:E[0],element:Object(l.jsx)(Qe,{})}),Object(l.jsx)(O.c,{path:E[1],element:Object(l.jsx)(Ze,{})}),Object(l.jsx)(O.c,{path:E[2],element:Object(l.jsx)(et,{})})]}),Object(l.jsx)(O.c,{path:"login",element:Object(l.jsx)(tt,{})}),Object(l.jsx)(O.c,{path:"account",element:Object(l.jsx)(bt,{})})]})}):Object(l.jsx)(tt,{})]})})})};c.a.render(Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(s.a,{children:Object(l.jsx)(u,{children:Object(l.jsx)(Ot,{})})})}),document.getElementById("root"))}},[[171,1,2]]]);
//# sourceMappingURL=main.adfdd451.chunk.js.map